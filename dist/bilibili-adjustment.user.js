// ==UserScript==
// @name         哔哩哔哩（bilibili.com）调整
// @namespace    哔哩哔哩（bilibili.com）调整
// @version      2.2.0
// @author       QIAN
// @description  一、首页新增推荐视频历史记录(仅记录前6个推荐位中的非广告内容)，以防误点刷新错过想看的视频。二、动态页调整：默认显示"投稿视频"内容，可自行设置URL以免未来URL发生变化。三、播放页调整：1.自动定位到播放器（进入播放页，可自动定位到播放器，可设置偏移量及是否在点击主播放器时定位）；2.可设置播放器默认模式；3.可设置是否自动选择最高画质；4.新增快速返回播放器漂浮按钮；5.新增点击评论区时间锚点可快速返回播放器；6.网页全屏模式解锁(网页全屏模式下可滚动查看评论，并在播放器控制栏新增快速跳转至评论区按钮)；7.将视频简介内容优化后插入评论区或直接替换原简介区内容(替换原简介中固定格式的静态内容为跳转链接)；8.视频播放过程中跳转指定时间节点至目标时间节点(可用来跳过片头片尾及中间广告等)；9.新增点击视频合集、下方推荐视频、结尾推荐视频卡片快速返回播放器；
// @license      GPL-3.0 License
// @copyright    QIAN
// @match        *://www.bilibili.com/*
// @match        *://www.bilibili.com/video/*
// @match        *://www.bilibili.com/bangumi/play/*
// @match        *://www.bilibili.com/list/*
// @match        *://t.bilibili.com/*
// @require      https://cdn.jsdelivr.net/npm/systemjs@6.15.1/dist/system.min.js
// @require      https://cdn.jsdelivr.net/npm/systemjs@6.15.1/dist/extras/named-register.min.js
// @require      data:application/javascript,%3B(typeof%20System!%3D'undefined')%26%26(System%3Dnew%20System.constructor())%3B
// @grant        GM_addStyle
// @grant        GM_getValue
// @grant        GM_registerMenuCommand
// @grant        GM_setValue
// @grant        unsafeWindow
// ==/UserScript==


System.register("./__entry.js", ['./__monkey.entry-L6FtwPzP.js'], (function (exports, module) {
	'use strict';
	return {
		setters: [null],
		execute: (function () {



		})
	};
}));

System.register("./__monkey.entry-L6FtwPzP.js", [], (function (exports, module) {
	'use strict';
	return {
		execute: (function () {

			var Jt=Object.defineProperty;var Qe=t=>{throw TypeError(t)};var Wt=(t,e,n)=>e in t?Jt(t,e,{enumerable:true,configurable:true,writable:true,value:n}):t[e]=n;var ce=(t,e,n)=>Wt(t,typeof e!="symbol"?e+"":e,n),ke=(t,e,n)=>e.has(t)||Qe("Cannot "+n);var h=(t,e,n)=>(ke(t,e,"read from private field"),n?n.call(t):e.get(t)),T=(t,e,n)=>e.has(t)?Qe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),B=(t,e,n,r)=>(ke(t,e,"write to private field"),e.set(t,n),n),C=(t,e,n)=>(ke(t,e,"access private method"),n);const Kt=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),Xt=function(t){return "/"+t},Ze={},ve=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(f=>{if(f=Xt(f),f in Ze)return;Ze[f]=true;const l=f.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Kt,l||(d.as="script"),d.crossOrigin="",d.href=f,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((b,g)=>{d.addEventListener("load",b),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${f}`)));})}));}function o(i){const a=new Event("vite:preloadError",{cancelable:true});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},Gt=()=>{const{host:t,pathname:e,origin:n}=window.location,s=[{test:()=>/^\/video\//.test(e),type:"播放页调整"},{test:()=>/^\/bangumi\//.test(e),type:"番剧页调整"},{test:()=>t==="www.bilibili.com"&&e==="/",type:"首页调整"},{test:()=>n==="https://t.bilibili.com",type:"动态页调整"}].find(o=>o.test());return (s==null?void 0:s.type)||"其他页调整"},H=class H{constructor(e){this.module=e;}log(e,...n){H.ENABLED_LEVELS[e]&&console.log(`%c${H.PAGE_TYPE_PREFIX}${e==="debug"?"(调试)丨":""}`,H.LEVELS[e],...n);}info(...e){this.log("info",...e);}error(...e){this.log("error",...e);}warn(...e){this.log("warn",...e);}debug(...e){this.log("debug",...e);}};ce(H,"LEVELS",{info:"color:white;background:#006aff;padding:2px;border-radius:2px",error:"color:white;background:#f33;padding:2px;border-radius:2px",warn:"color:white;background:#ff6d00;padding:2px;border-radius:2px",debug:"color:white;background:#cc00ff;padding:2px;border-radius:2px"}),ce(H,"ENABLED_LEVELS",{info:true,error:true,warn:true,debug:false}),ce(H,"PAGE_TYPE_PREFIX",Gt());let X=exports("X", H);var Re,ne,P,W,fe,Ae,mt;const Z=class Z{constructor(){T(this,Ae);T(this,Re,new X("EventBus"));T(this,P,new Map);T(this,W,[]);T(this,fe,false);if(h(Z,ne))return h(Z,ne);B(Z,ne,this);}on(e,n,r={}){const{priority:s=0,once:o=false,namespace:i=""}=r,a=i?`${i}:${e}`:e;return h(this,P).has(a)||h(this,P).set(a,[]),h(this,P).get(a).push({handler:n,once:o,priority:s}),h(this,P).get(a).sort((f,l)=>l.priority-f.priority),()=>this.off(a,n)}once(e,n,r){return this.on(e,n,{...r,once:true})}off(e,n){if(!h(this,P).has(e))return;const r=h(this,P).get(e),s=n?r.filter(o=>o.handler!==n):[];s.length?h(this,P).set(e,s):h(this,P).delete(e);}async emit(e,...n){const r=e.split(":")[0],s=[e,r,"*"];let o=false;const i={event:e,cancel:()=>o=true,get isCancelled(){return o}};for(const a of h(this,W))if(await a(i,...n),i.isCancelled)return;for(const a of s){if(!h(this,P).has(a))continue;const f=[...h(this,P).get(a)];for(const{handler:l,once:u}of f){u&&this.off(a,l);try{const d=l(i,...n);d instanceof Promise&&await d;}catch(d){C(this,Ae,mt).call(this,d,i,l);}if(i.isCancelled)return}}}addInterceptor(e){return h(this,W).push(e),()=>{B(this,W,h(this,W).filter(n=>n!==e));}}setDebug(e){B(this,fe,e);}listenAll(e){return this.on("*",e)}clear(){h(this,P).clear();}};Re=new WeakMap,ne=new WeakMap,P=new WeakMap,W=new WeakMap,fe=new WeakMap,Ae=new WeakSet,mt=function(e,n,r){h(this,fe)&&h(this,Re).error(`[EventBus] Error in handler for ${n.event}:`,{error:e,handler:r.name||"anonymous",args:n.args}),this.emit("error",{error:e,context:n});},T(Z,ne);let Ue=Z;const j=exports("j", new Ue),Yt=3e4;class Qt{constructor(e,n,r){this.dbName=e,this.version=n,this.storeConfig=r,this.db=null,this.lastOperationTime=Date.now();}async connect(){return this.db?(this._updateLastOperation(),this.db):new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.version);r.onupgradeneeded=s=>{const o=s.target.result;this._createStores(o);},r.onsuccess=s=>{this.db=s.target.result,this._setupConnectionMonitoring(),e(this.db);},r.onerror=s=>{n(new Error(`Database error: ${s.target.error}`));};})}isStoreExists(e){return this.db&&this.db.objectStoreNames.contains(e)}async add(e,n){return this._execute(e,"readwrite",r=>r.add(n))}async get(e,n){return this._execute(e,"readonly",r=>r.get(n))}async getAll(e,n,r,s){const o=await this.getAllRaw(e,n,r,s);return {results:o.results.reduce((i,a)=>(i[a.key]=a.value,i),{}),continue:o.continue}}async getAllRaw(e,n,r,s){return this._executeCursorQuery(e,n,r,s)}async update(e,n){return this._execute(e,"readwrite",r=>r.put(n))}async delete(e,n){return this._execute(e,"readwrite",r=>r.delete(n))}async count(e,n){return this._execute(e,"readonly",r=>n?r.count(n):r.count())}async clear(e){return this._execute(e,"readwrite",n=>n.clear())}async _execute(e,n,r){return await this.connect(),new Promise((s,o)=>{const a=this.db.transaction(e,n).objectStore(e),f=r(a);f.onsuccess=()=>s(f.result),f.onerror=l=>o(l.target.error);})}async _executeCursorQuery(e,n,r,s=100){return await this.connect(),new Promise((o,i)=>{const f=this.db.transaction(e,"readonly").objectStore(e),l=n?f.index(n):f,u=[];let d;const b=l.openCursor(r);b.onsuccess=g=>{if(d=g.target.result,d){if(u.push(d.value),u.length>=s)return o({results:u,continue:()=>d.continue()});d.continue();}else o({results:u,continue:null});},b.onerror=i;})}close(){this.db&&(this.db.close(),this.db=null);}_createStores(e){this.storeConfig.forEach(n=>{var r;if(!e.objectStoreNames.contains(n.name)){const s=e.createObjectStore(n.name,{keyPath:n.keyPath});(r=n.indexes)==null||r.forEach(o=>{s.createIndex(o.name,o.keyPath,{unique:o.unique||false});});}});}_setupConnectionMonitoring(){this._idleTimer=setInterval(()=>{Date.now()-this.lastOperationTime>Yt&&this.close();},5e3);}_updateLastOperation(){this.lastOperationTime=Date.now();}}const Zt=t=>new Qt(t.dbName,t.version,t.storeConfig);var re,k,se,Te;const ee=class ee{constructor(){T(this,k);T(this,se);T(this,Te,{user:{dbName:"BilibiliAdjustmentUserConfigs",version:2,storeConfig:[{name:"keyval",keyPath:"key",indexes:[{name:"by_timestamp",keyPath:"timestamp",unique:false}]}]},index:{dbName:"BilibiliAdjustmentIndexRecommendVideoHistory",version:2,storeConfig:[{name:"keyval",keyPath:"key",indexes:[{name:"by_timestamp",keyPath:"timestamp",unique:false}]}]}});if(!window.indexedDB)throw new Error("Browser does not support IndexedDB");if(h(ee,re))return h(ee,re);B(this,se,new X("StorageService")),B(this,k,new Map),Object.entries(h(this,Te)).forEach(([e,n])=>{h(this,k).set(e,Zt(n));}),B(ee,re,this);}async init(){try{for(const[e,n]of h(this,k))if(await n.connect(),!n.isStoreExists("keyval"))throw new Error(`数据库 ${e} 初始化丨数据表不存在`);h(this,se).debug("数据库集群初始化丨成功");}catch(e){throw h(this,se).error("数据库集群初始化丨失败",e),e}}async set(e,n,r){await h(this,k).get(e).update("keyval",{key:n,value:r,timestamp:Date.now()});}async get(e,n){return h(this,k).get(e).get("keyval",n).then(s=>s==null?void 0:s.value)}legacySet(e,n){return this.set("user",e,n)}legacyGet(e){return this.get("user",e)}async getAll(e,n,r,s){return (await h(this,k).get(e).getAll("keyval",n,r,s)).results}async getAllRaw(e,n,r,s){return (await h(this,k).get(e)._executeCursorQuery("keyval",n,r,s)).results.map(a=>({key:a.key,value:a.value,timestamp:a.timestamp}))}async getByTimeRange(e,n,r=100){const s=IDBKeyRange.bound(e,n);return this.getAll("by_timestamp",s,r)}async batch(e,n){return h(this,k).get(e).transaction(["keyval"],"readwrite",async s=>{for(const{type:o,key:i,value:a}of n)o==="set"?await s.keyval.put({key:i,value:a,timestamp:Date.now()}):o==="delete"&&await s.keyval.delete(i);})}async getCount(e,n){return h(this,k).get(e,n).count("keyval")}async clear(e){return h(this,k).get(e).clear("keyval")}};re=new WeakMap,k=new WeakMap,se=new WeakMap,Te=new WeakMap,T(ee,re);let Be=ee;const ye=exports("y", new Be);var $,M,q;class Q{static async initialize(){if(!h(this,M))try{await ye.init(),B(this,M,!0);}catch(e){throw h(this,$).error("配置服务初始化失败",e),e}}static async initializeDefaults(){h(this,M)||await this.initialize();try{for(const[e,n]of this.DEFAULT_VALUES.entries()){const r=await ye.legacyGet(e);r==null&&await this.setValue(e,n);}h(this,$).debug("默认配置初始化完成");}catch(e){throw h(this,$).error("默认配置初始化失败",e),e}}static async getValue(e){h(this,M)||await this.initialize();try{if(h(this,q).has(e))return h(this,q).get(e);const n=await ye.legacyGet(e);if(n==null){const r=this.DEFAULT_VALUES.get(e);return r!==void 0?(await this.setValue(e,r),r):null}return h(this,q).set(e,n),n}catch(n){return h(this,$).error("配置读取失败",n),null}}static async setValue(e,n){h(this,M)||await this.initialize();try{h(this,q).set(e,n),await ye.legacySet(e,n);}catch(r){throw h(this,q).delete(e),h(this,$).error("配置存储失败",r),r}}static clearCache(){h(this,q).clear();}}$=new WeakMap,M=new WeakMap,q=new WeakMap,T(Q,$,new X("ConfigService")),T(Q,M,false),T(Q,q,new Map),ce(Q,"DEFAULT_VALUES",new Map([["is_vip",true],["player_type","video"],["offset_top",5],["player_offset_top",168],["video_player_offset_top",168],["bangumi_player_offset_top",104],["auto_locate",true],["get_offset_method","function"],["auto_locate_video",true],["auto_locate_bangumi",true],["click_player_auto_locate",true],["current_player_mode","normal"],["selected_player_mode","wide"],["auto_select_video_highest_quality",true],["auto_cancel_mute",true],["contain_quality_4k",false],["contain_quality_8k",false],["webfull_unlock",false],["auto_reload",false],["auto_skip",false],["insert_video_description_to_comment",true],["dynamic_video_link","https://t.bilibili.com/?tab=video"],["pause_video",false],["continue_play",false],["auto_subtitle",false],["show_location",true]]));var oe,z,N,de,E,qe,yt,wt,bt,gt,Et,St,Ie,He;const te=class te{constructor(){T(this,E);T(this,z,new X("ModuleSystem"));T(this,N,new Map);T(this,de,{lazyInit:false});if(h(te,oe))return h(te,oe);B(te,oe,this),C(this,E,gt).call(this);}configure({lazyInit:e=false}){h(this,de).lazyInit=e;}register(e){C(this,E,wt).call(this,e);const{name:n}=e;if(h(this,N).has(n)){C(this,E,He).call(this,`Module ${n} already registered`,"warn");return}h(this,N).set(n,{definition:e,instance:null,status:"registered",version:(e==null?void 0:e.version)||"1.0.0",timestamp:Date.now()}),j.emit("module:registered",{name:n}),h(this,z).debug(`模块已注册: ${n}`);}async init(e={}){await Q.initializeDefaults();const n=Date.now();j.emit("system:init-start",{timestamp:n});try{const r=Array.from(h(this,N).keys());h(this,z).debug(`模块初始化: ${r.join(", ")}`),await C(this,E,yt).call(this,r),j.emit("system:init-success",{duration:Date.now()-n,moduleCount:h(this,N).size}),h(this,z).debug(`模块初始化耗时： ${Date.now()-n} ms`);}catch(r){throw j.emit("system:init-fail",{error:r}),C(this,E,Ie).call(this,r,"System initialization failed")}}getModule(e){const n=h(this,N).get(e);return n?(h(this,de).lazyInit&&!n.instance&&C(this,E,qe).call(this,n),n.instance):null}};oe=new WeakMap,z=new WeakMap,N=new WeakMap,de=new WeakMap,E=new WeakSet,qe=function(e){try{e.instance=C(this,E,bt).call(this,e.definition),typeof e.instance.install=="function"&&e.instance.install(),e.status="active",h(this,z).debug(`模块初始化✅: ${e.definition.name}`);}catch(n){e.status="error",C(this,E,He).call(this,n,"critical",{module:e.definition.name});}},yt=async function(e){await Promise.all(e.map(n=>{const r=h(this,N).get(n);C(this,E,qe).call(this,r);}));},wt=function(e){if(!e.name)throw new Error("Module must have a name property")},bt=function(e){const n=Object.create(e);return Object.entries(e).forEach(([r,s])=>{typeof s=="function"?n[r]=s.bind(n):n[r]=s;}),n},gt=function(){j.on("network:offline",()=>{C(this,E,St).call(this);}),j.on("module:error",({module:e,error:n})=>{C(this,E,Et).call(this,e,n);});},Et=function(e,n){const r=h(this,N).get(`${e}-fallback`);r&&(this.register(r),j.emit("module:fallback",{original:e}));},St=function(){h(this,N).forEach(e=>{e.definition.offline&&e.instance.enableOfflineMode();});},Ie=function(e,n){return e.moduleSystemContext=n,e.timestamp=new Date().toISOString(),e},He=function(e,n="error",r={}){const s=new Error(e),o=C(this,E,Ie).call(this,s,"operation");j.emit("module:error",{error:o,level:n,...r}),n==="critical"&&h(this,z).error(`[CRITICAL] ${e}`,r);},T(te,oe);let je=te;const et=new je;function Rt(t,e){return function(){return t.apply(e,arguments)}}const{toString:en}=Object.prototype,{getPrototypeOf:Ke}=Object,Oe=(t=>e=>{const n=en.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),F=t=>(t=t.toLowerCase(),e=>Oe(e)===t),_e=t=>e=>typeof e===t,{isArray:ie}=Array,ue=_e("undefined");function tn(t){return t!==null&&!ue(t)&&t.constructor!==null&&!ue(t.constructor)&&v(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const At=F("ArrayBuffer");function nn(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&At(t.buffer),e}const rn=_e("string"),v=_e("function"),Tt=_e("number"),xe=t=>t!==null&&typeof t=="object",sn=t=>t===true||t===false,we=t=>{if(Oe(t)!=="object")return  false;const e=Ke(t);return (e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},on=F("Date"),an=F("File"),cn=F("Blob"),ln=F("FileList"),un=t=>xe(t)&&v(t.pipe),fn=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||v(t.append)&&((e=Oe(t))==="formdata"||e==="object"&&v(t.toString)&&t.toString()==="[object FormData]"))},dn=F("URLSearchParams"),[hn,pn,mn,yn]=["ReadableStream","Request","Response","Headers"].map(F),wn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function he(t,e,{allOwnKeys:n=false}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),ie(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else {const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(r=0;r<i;r++)a=o[r],e.call(null,t[a],a,t);}}function Ot(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const J=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_t=t=>!ue(t)&&t!==J;function $e(){const{caseless:t}=_t(this)&&this||{},e={},n=(r,s)=>{const o=t&&Ot(e,s)||s;we(e[o])&&we(r)?e[o]=$e(e[o],r):we(r)?e[o]=$e({},r):ie(r)?e[o]=r.slice():e[o]=r;};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&he(arguments[r],n);return e}const bn=(t,e,n,{allOwnKeys:r}={})=>(he(e,(s,o)=>{n&&v(s)?t[o]=Rt(s,n):t[o]=s;},{allOwnKeys:r}),t),gn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),En=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n);},Sn=(t,e,n,r)=>{let s,o,i;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=true);t=n!==false&&Ke(t);}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Rn=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},An=t=>{if(!t)return null;if(ie(t))return t;let e=t.length;if(!Tt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Tn=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ke(Uint8Array)),On=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1]);}},_n=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},xn=F("HTMLFormElement"),Cn=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),tt=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Pn=F("RegExp"),xt=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};he(n,(s,o)=>{let i;(i=e(s,o,t))!==false&&(r[o]=i||s);}),Object.defineProperties(t,r);},Ln=t=>{xt(t,(e,n)=>{if(v(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return  false;const r=t[n];if(v(r)){if(e.enumerable=false,"writable"in e){e.writable=false;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")});}});},kn=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=true;});};return ie(t)?r(t):r(String(t).split(e)),n},vn=()=>{},Nn=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Fn(t){return !!(t&&v(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Dn=t=>{const e=new Array(10),n=(r,s)=>{if(xe(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const o=ie(r)?[]:{};return he(r,(i,a)=>{const f=n(i,s+1);!ue(f)&&(o[a]=f);}),e[s]=void 0,o}}return r};return n(t,0)},Un=F("AsyncFunction"),Bn=t=>t&&(xe(t)||v(t))&&v(t.then)&&v(t.catch),Ct=((t,e)=>t?setImmediate:e?((n,r)=>(J.addEventListener("message",({source:s,data:o})=>{s===J&&o===n&&r.length&&r.shift()();},false),s=>{r.push(s),J.postMessage(n,"*");}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",v(J.postMessage)),jn=typeof queueMicrotask<"u"?queueMicrotask.bind(J):typeof process<"u"&&process.nextTick||Ct,c={isArray:ie,isArrayBuffer:At,isBuffer:tn,isFormData:fn,isArrayBufferView:nn,isString:rn,isNumber:Tt,isBoolean:sn,isObject:xe,isPlainObject:we,isReadableStream:hn,isRequest:pn,isResponse:mn,isHeaders:yn,isUndefined:ue,isDate:on,isFile:an,isBlob:cn,isRegExp:Pn,isFunction:v,isStream:un,isURLSearchParams:dn,isTypedArray:Tn,isFileList:ln,forEach:he,merge:$e,extend:bn,trim:wn,stripBOM:gn,inherits:En,toFlatObject:Sn,kindOf:Oe,kindOfTest:F,endsWith:Rn,toArray:An,forEachEntry:On,matchAll:_n,isHTMLForm:xn,hasOwnProperty:tt,hasOwnProp:tt,reduceDescriptors:xt,freezeMethods:Ln,toObjectSet:kn,toCamelCase:Cn,noop:vn,toFiniteNumber:Nn,findKey:Ot,global:J,isContextDefined:_t,isSpecCompliantForm:Fn,toJSONObject:Dn,isAsyncFn:Un,isThenable:Bn,setImmediate:Ct,asap:jn};function y(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null);}c.inherits(y,Error,{toJSON:function(){return {message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:c.toJSONObject(this.config),code:this.code,status:this.status}}});const Pt=y.prototype,Lt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Lt[t]={value:t};});Object.defineProperties(y,Lt);Object.defineProperty(Pt,"isAxiosError",{value:true});y.from=(t,e,n,r,s,o)=>{const i=Object.create(Pt);return c.toFlatObject(t,i,function(f){return f!==Error.prototype},a=>a!=="isAxiosError"),y.call(i,t.message,e,n,r,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const qn=null;function Me(t){return c.isPlainObject(t)||c.isArray(t)}function kt(t){return c.endsWith(t,"[]")?t.slice(0,-2):t}function nt(t,e,n){return t?t.concat(e).map(function(s,o){return s=kt(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function In(t){return c.isArray(t)&&!t.some(Me)}const Hn=c.toFlatObject(c,{},null,function(e){return /^is[A-Z]/.test(e)});function Ce(t,e,n){if(!c.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=c.toFlatObject(n,{metaTokens:true,dots:false,indexes:false},false,function(w,m){return !c.isUndefined(m[w])});const r=n.metaTokens,s=n.visitor||u,o=n.dots,i=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&c.isSpecCompliantForm(e);if(!c.isFunction(s))throw new TypeError("visitor must be a function");function l(p){if(p===null)return "";if(c.isDate(p))return p.toISOString();if(!f&&c.isBlob(p))throw new y("Blob is not supported. Use a Buffer instead.");return c.isArrayBuffer(p)||c.isTypedArray(p)?f&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,w,m){let S=p;if(p&&!m&&typeof p=="object"){if(c.endsWith(w,"{}"))w=r?w:w.slice(0,-2),p=JSON.stringify(p);else if(c.isArray(p)&&In(p)||(c.isFileList(p)||c.endsWith(w,"[]"))&&(S=c.toArray(p)))return w=kt(w),S.forEach(function(O,U){!(c.isUndefined(O)||O===null)&&e.append(i===true?nt([w],U,o):i===null?w:w+"[]",l(O));}),false}return Me(p)?true:(e.append(nt(m,w,o),l(p)),false)}const d=[],b=Object.assign(Hn,{defaultVisitor:u,convertValue:l,isVisitable:Me});function g(p,w){if(!c.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(p),c.forEach(p,function(S,A){(!(c.isUndefined(S)||S===null)&&s.call(e,S,c.isString(A)?A.trim():A,w,b))===true&&g(S,w?w.concat(A):[A]);}),d.pop();}}if(!c.isObject(t))throw new TypeError("data must be an object");return g(t),e}function rt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Xe(t,e){this._pairs=[],t&&Ce(t,this,e);}const vt=Xe.prototype;vt.append=function(e,n){this._pairs.push([e,n]);};vt.toString=function(e){const n=e?function(r){return e.call(this,r,rt)}:rt;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function $n(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nt(t,e,n){if(!e)return t;const r=n&&n.encode||$n;c.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(e,n):o=c.isURLSearchParams(e)?e.toString():new Xe(e,n).toString(r),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o;}return t}class st{constructor(){this.handlers=[];}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:false,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null);}clear(){this.handlers&&(this.handlers=[]);}forEach(e){c.forEach(this.handlers,function(r){r!==null&&e(r);});}}const Ft={silentJSONParsing:true,forcedJSONParsing:true,clarifyTimeoutError:false},Mn=typeof URLSearchParams<"u"?URLSearchParams:Xe,zn=typeof FormData<"u"?FormData:null,Vn=typeof Blob<"u"?Blob:null,Jn={isBrowser:true,classes:{URLSearchParams:Mn,FormData:zn,Blob:Vn},protocols:["http","https","file","blob","url","data"]},Ge=typeof window<"u"&&typeof document<"u",ze=typeof navigator=="object"&&navigator||void 0,Wn=Ge&&(!ze||["ReactNative","NativeScript","NS"].indexOf(ze.product)<0),Kn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Xn=Ge&&window.location.href||"http://localhost",Gn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ge,hasStandardBrowserEnv:Wn,hasStandardBrowserWebWorkerEnv:Kn,navigator:ze,origin:Xn},Symbol.toStringTag,{value:"Module"})),_={...Gn,...Jn};function Yn(t,e){return Ce(t,new _.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return _.isNode&&c.isBuffer(n)?(this.append(r,n.toString("base64")),false):o.defaultVisitor.apply(this,arguments)}},e))}function Qn(t){return c.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Zn(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function Dt(t){function e(n,r,s,o){let i=n[o++];if(i==="__proto__")return  true;const a=Number.isFinite(+i),f=o>=n.length;return i=!i&&c.isArray(s)?s.length:i,f?(c.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!a):((!s[i]||!c.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],o)&&c.isArray(s[i])&&(s[i]=Zn(s[i])),!a)}if(c.isFormData(t)&&c.isFunction(t.entries)){const n={};return c.forEachEntry(t,(r,s)=>{e(Qn(r),s,n,0);}),n}return null}function er(t,e,n){if(c.isString(t))try{return (e||JSON.parse)(t),c.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return (n||JSON.stringify)(t)}const pe={transitional:Ft,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=c.isObject(e);if(o&&c.isHTMLForm(e)&&(e=new FormData(e)),c.isFormData(e))return s?JSON.stringify(Dt(e)):e;if(c.isArrayBuffer(e)||c.isBuffer(e)||c.isStream(e)||c.isFile(e)||c.isBlob(e)||c.isReadableStream(e))return e;if(c.isArrayBufferView(e))return e.buffer;if(c.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",false),e.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Yn(e,this.formSerializer).toString();if((a=c.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Ce(a?{"files[]":e}:e,f&&new f,this.formSerializer)}}return o||s?(n.setContentType("application/json",false),er(e)):e}],transformResponse:[function(e){const n=this.transitional||pe.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(c.isResponse(e)||c.isReadableStream(e))return e;if(e&&c.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?y.from(a,y.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_.classes.FormData,Blob:_.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};c.forEach(["delete","get","head","post","put","patch"],t=>{pe.headers[t]={};});const tr=c.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nr=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&tr[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r);}),e},ot=Symbol("internals");function le(t){return t&&String(t).trim().toLowerCase()}function be(t){return t===false||t==null?t:c.isArray(t)?t.map(be):String(t)}function rr(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const sr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ne(t,e,n,r,s){if(c.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!c.isString(e)){if(c.isString(r))return e.indexOf(r)!==-1;if(c.isRegExp(r))return r.test(e)}}function or(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function ir(t,e){const n=c.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,i){return this[r].call(this,e,s,o,i)},configurable:true});});}let L=class{constructor(e){e&&this.set(e);}set(e,n,r){const s=this;function o(a,f,l){const u=le(f);if(!u)throw new Error("header name must be a non-empty string");const d=c.findKey(s,u);(!d||s[d]===void 0||l===true||l===void 0&&s[d]!==false)&&(s[d||f]=be(a));}const i=(a,f)=>c.forEach(a,(l,u)=>o(l,u,f));if(c.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(c.isString(e)&&(e=e.trim())&&!sr(e))i(nr(e),n);else if(c.isHeaders(e))for(const[a,f]of e.entries())o(f,a,r);else e!=null&&o(n,e,r);return this}get(e,n){if(e=le(e),e){const r=c.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===true)return rr(s);if(c.isFunction(n))return n.call(this,s,r);if(c.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=le(e),e){const r=c.findKey(this,e);return !!(r&&this[r]!==void 0&&(!n||Ne(this,this[r],r,n)))}return  false}delete(e,n){const r=this;let s=false;function o(i){if(i=le(i),i){const a=c.findKey(r,i);a&&(!n||Ne(r,r[a],a,n))&&(delete r[a],s=true);}}return c.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=false;for(;r--;){const o=n[r];(!e||Ne(this,this[o],o,e,true))&&(delete this[o],s=true);}return s}normalize(e){const n=this,r={};return c.forEach(this,(s,o)=>{const i=c.findKey(r,o);if(i){n[i]=be(s),delete n[o];return}const a=e?or(o):String(o).trim();a!==o&&delete n[o],n[a]=be(s),r[a]=true;}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return c.forEach(this,(r,s)=>{r!=null&&r!==false&&(n[s]=e&&c.isArray(r)?r.join(", "):r);}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return "AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[ot]=this[ot]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=le(i);r[a]||(ir(s,i),r[a]=true);}return c.isArray(e)?e.forEach(o):o(e),this}};L.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);c.reduceDescriptors(L.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return {get:()=>t,set(r){this[n]=r;}}});c.freezeMethods(L);function Fe(t,e){const n=this||pe,r=e||n,s=L.from(r.headers);let o=r.data;return c.forEach(t,function(a){o=a.call(n,o,s.normalize(),e?e.status:void 0);}),s.normalize(),o}function Ut(t){return !!(t&&t.__CANCEL__)}function ae(t,e,n){y.call(this,t??"canceled",y.ERR_CANCELED,e,n),this.name="CanceledError";}c.inherits(ae,y,{__CANCEL__:true});function Bt(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new y("Request failed with status code "+n.status,[y.ERR_BAD_REQUEST,y.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n));}function ar(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function cr(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(f){const l=Date.now(),u=r[o];i||(i=l),n[s]=f,r[s]=l;let d=o,b=0;for(;d!==s;)b+=n[d++],d=d%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),l-i<e)return;const g=u&&l-u;return g?Math.round(b*1e3/g):void 0}}function lr(t,e){let n=0,r=1e3/e,s,o;const i=(l,u=Date.now())=>{n=u,s=null,o&&(clearTimeout(o),o=null),t.apply(null,l);};return [(...l)=>{const u=Date.now(),d=u-n;d>=r?i(l,u):(s=l,o||(o=setTimeout(()=>{o=null,i(s);},r-d)));},()=>s&&i(s)]}const Ee=(t,e,n=3)=>{let r=0;const s=cr(50,250);return lr(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,f=i-r,l=s(f),u=i<=a;r=i;const d={loaded:i,total:a,progress:a?i/a:void 0,bytes:f,rate:l||void 0,estimated:l&&a&&u?(a-i)/l:void 0,event:o,lengthComputable:a!=null,[e?"download":"upload"]:true};t(d);},n)},it=(t,e)=>{const n=t!=null;return [r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},at=t=>(...e)=>c.asap(()=>t(...e)),ur=_.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,_.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(_.origin),_.navigator&&/(msie|trident)/i.test(_.navigator.userAgent)):()=>true,fr=_.hasStandardBrowserEnv?{write(t,e,n,r,s,o){const i=[t+"="+encodeURIComponent(e)];c.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),c.isString(r)&&i.push("path="+r),c.isString(s)&&i.push("domain="+s),o===true&&i.push("secure"),document.cookie=i.join("; ");},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5);}}:{write(){},read(){return null},remove(){}};function dr(t){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function hr(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function jt(t,e,n){let r=!dr(e);return t&&r||n==false?hr(t,e):e}const ct=t=>t instanceof L?{...t}:t;function G(t,e){e=e||{};const n={};function r(l,u,d,b){return c.isPlainObject(l)&&c.isPlainObject(u)?c.merge.call({caseless:b},l,u):c.isPlainObject(u)?c.merge({},u):c.isArray(u)?u.slice():u}function s(l,u,d,b){if(c.isUndefined(u)){if(!c.isUndefined(l))return r(void 0,l,d,b)}else return r(l,u,d,b)}function o(l,u){if(!c.isUndefined(u))return r(void 0,u)}function i(l,u){if(c.isUndefined(u)){if(!c.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,d){if(d in e)return r(l,u);if(d in t)return r(void 0,l)}const f={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(l,u,d)=>s(ct(l),ct(u),d,true)};return c.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=f[u]||s,b=d(t[u],e[u],u);c.isUndefined(b)&&d!==a||(n[u]=b);}),n}const qt=t=>{const e=G({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:a}=e;e.headers=i=L.from(i),e.url=Nt(jt(e.baseURL,e.url),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let f;if(c.isFormData(n)){if(_.hasStandardBrowserEnv||_.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((f=i.getContentType())!==false){const[l,...u]=f?f.split(";").map(d=>d.trim()).filter(Boolean):[];i.setContentType([l||"multipart/form-data",...u].join("; "));}}if(_.hasStandardBrowserEnv&&(r&&c.isFunction(r)&&(r=r(e)),r||r!==false&&ur(e.url))){const l=s&&o&&fr.read(o);l&&i.set(s,l);}return e},pr=typeof XMLHttpRequest<"u",mr=pr&&function(t){return new Promise(function(n,r){const s=qt(t);let o=s.data;const i=L.from(s.headers).normalize();let{responseType:a,onUploadProgress:f,onDownloadProgress:l}=s,u,d,b,g,p;function w(){g&&g(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u);}let m=new XMLHttpRequest;m.open(s.method.toUpperCase(),s.url,true),m.timeout=s.timeout;function S(){if(!m)return;const O=L.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:O,config:t,request:m};Bt(function(V){n(V),w();},function(V){r(V),w();},x),m=null;}"onloadend"in m?m.onloadend=S:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(S);},m.onabort=function(){m&&(r(new y("Request aborted",y.ECONNABORTED,t,m)),m=null);},m.onerror=function(){r(new y("Network Error",y.ERR_NETWORK,t,m)),m=null;},m.ontimeout=function(){let U=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const x=s.transitional||Ft;s.timeoutErrorMessage&&(U=s.timeoutErrorMessage),r(new y(U,x.clarifyTimeoutError?y.ETIMEDOUT:y.ECONNABORTED,t,m)),m=null;},o===void 0&&i.setContentType(null),"setRequestHeader"in m&&c.forEach(i.toJSON(),function(U,x){m.setRequestHeader(x,U);}),c.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),a&&a!=="json"&&(m.responseType=s.responseType),l&&([b,p]=Ee(l,true),m.addEventListener("progress",b)),f&&m.upload&&([d,g]=Ee(f),m.upload.addEventListener("progress",d),m.upload.addEventListener("loadend",g)),(s.cancelToken||s.signal)&&(u=O=>{m&&(r(!O||O.type?new ae(null,t,m):O),m.abort(),m=null);},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const A=ar(s.url);if(A&&_.protocols.indexOf(A)===-1){r(new y("Unsupported protocol "+A+":",y.ERR_BAD_REQUEST,t));return}m.send(o||null);})},yr=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const o=function(l){if(!s){s=true,a();const u=l instanceof Error?l:this.reason;r.abort(u instanceof y?u:new ae(u instanceof Error?u.message:u));}};let i=e&&setTimeout(()=>{i=null,o(new y(`timeout ${e} of ms exceeded`,y.ETIMEDOUT));},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o);}),t=null);};t.forEach(l=>l.addEventListener("abort",o));const{signal:f}=r;return f.unsubscribe=()=>c.asap(a),f}},wr=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s;},br=async function*(t,e){for await(const n of gr(t))yield*wr(n,e);},gr=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r;}}finally{await e.cancel();}},lt=(t,e,n,r)=>{const s=br(t,e);let o=0,i,a=f=>{i||(i=true,r&&r(f));};return new ReadableStream({async pull(f){try{const{done:l,value:u}=await s.next();if(l){a(),f.close();return}let d=u.byteLength;if(n){let b=o+=d;n(b);}f.enqueue(new Uint8Array(u));}catch(l){throw a(l),l}},cancel(f){return a(f),s.return()}},{highWaterMark:2})},Pe=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",It=Pe&&typeof ReadableStream=="function",Er=Pe&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Ht=(t,...e)=>{try{return !!t(...e)}catch{return  false}},Sr=It&&Ht(()=>{let t=!1;const e=new Request(_.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),ut=64*1024,Ve=It&&Ht(()=>c.isReadableStream(new Response("").body)),Se={stream:Ve&&(t=>t.body)};Pe&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Se[e]&&(Se[e]=c.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new y(`Response type '${e}' is not supported`,y.ERR_NOT_SUPPORT,r)});});})(new Response);const Rr=async t=>{if(t==null)return 0;if(c.isBlob(t))return t.size;if(c.isSpecCompliantForm(t))return (await new Request(_.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(c.isArrayBufferView(t)||c.isArrayBuffer(t))return t.byteLength;if(c.isURLSearchParams(t)&&(t=t+""),c.isString(t))return (await Er(t)).byteLength},Ar=async(t,e)=>{const n=c.toFiniteNumber(t.getContentLength());return n??Rr(e)},Tr=Pe&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:f,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:b}=qt(t);l=l?(l+"").toLowerCase():"text";let g=yr([s,o&&o.toAbortSignal()],i),p;const w=g&&g.unsubscribe&&(()=>{g.unsubscribe();});let m;try{if(f&&Sr&&n!=="get"&&n!=="head"&&(m=await Ar(u,r))!==0){let x=new Request(e,{method:"POST",body:r,duplex:"half"}),I;if(c.isFormData(r)&&(I=x.headers.get("content-type"))&&u.setContentType(I),x.body){const[V,me]=it(m,Ee(at(f)));r=lt(x.body,ut,V,me);}}c.isString(d)||(d=d?"include":"omit");const S="credentials"in Request.prototype;p=new Request(e,{...b,signal:g,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:S?d:void 0});let A=await fetch(p);const O=Ve&&(l==="stream"||l==="response");if(Ve&&(a||O&&w)){const x={};["status","statusText","headers"].forEach(Ye=>{x[Ye]=A[Ye];});const I=c.toFiniteNumber(A.headers.get("content-length")),[V,me]=a&&it(I,Ee(at(a),!0))||[];A=new Response(lt(A.body,ut,V,()=>{me&&me(),w&&w();}),x);}l=l||"text";let U=await Se[c.findKey(Se,l)||"text"](A,t);return !O&&w&&w(),await new Promise((x,I)=>{Bt(x,I,{data:U,headers:L.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:p});})}catch(S){throw w&&w(),S&&S.name==="TypeError"&&/fetch/i.test(S.message)?Object.assign(new y("Network Error",y.ERR_NETWORK,t,p),{cause:S.cause||S}):y.from(S,S&&S.code,t,p)}}),Je={http:qn,xhr:mr,fetch:Tr};c.forEach(Je,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e});}catch{}Object.defineProperty(t,"adapterName",{value:e});}});const ft=t=>`- ${t}`,Or=t=>c.isFunction(t)||t===null||t===false,$t={getAdapter:t=>{t=c.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let o=0;o<e;o++){n=t[o];let i;if(r=n,!Or(n)&&(r=Je[(i=String(n)).toLowerCase()],r===void 0))throw new y(`Unknown adapter '${i}'`);if(r)break;s[i||"#"+o]=r;}if(!r){const o=Object.entries(s).map(([a,f])=>`adapter ${a} `+(f===false?"is not supported by the environment":"is not available in the build"));let i=e?o.length>1?`since :
`+o.map(ft).join(`
`):" "+ft(o[0]):"as no adapter specified";throw new y("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Je};function De(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ae(null,t)}function dt(t){return De(t),t.headers=L.from(t.headers),t.data=Fe.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",false),$t.getAdapter(t.adapter||pe.adapter)(t).then(function(r){return De(t),r.data=Fe.call(t,t.transformResponse,r),r.headers=L.from(r.headers),r},function(r){return Ut(r)||(De(t),r&&r.response&&(r.response.data=Fe.call(t,t.transformResponse,r.response),r.response.headers=L.from(r.response.headers))),Promise.reject(r)})}const Mt="1.8.1",Le={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Le[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t};});const ht={};Le.transitional=function(e,n,r){function s(o,i){return "[Axios v"+Mt+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return (o,i,a)=>{if(e===false)throw new y(s(i," has been removed"+(n?" in "+n:"")),y.ERR_DEPRECATED);return n&&!ht[i]&&(ht[i]=true,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,i,a):true}};Le.spelling=function(e){return (n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),true)};function _r(t,e,n){if(typeof t!="object")throw new y("options must be an object",y.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],i=e[o];if(i){const a=t[o],f=a===void 0||i(a,o,t);if(f!==true)throw new y("option "+o+" must be "+f,y.ERR_BAD_OPTION_VALUE);continue}if(n!==true)throw new y("Unknown option "+o,y.ERR_BAD_OPTION)}}const ge={assertOptions:_r,validators:Le},D=ge.validators;let K=class{constructor(e){this.defaults=e,this.interceptors={request:new st,response:new st};}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o;}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=G(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&ge.assertOptions(r,{silentJSONParsing:D.transitional(D.boolean),forcedJSONParsing:D.transitional(D.boolean),clarifyTimeoutError:D.transitional(D.boolean)},false),s!=null&&(c.isFunction(s)?n.paramsSerializer={serialize:s}:ge.assertOptions(s,{encode:D.function,serialize:D.function},true)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=true),ge.assertOptions(n,{baseUrl:D.spelling("baseURL"),withXsrfToken:D.spelling("withXSRFToken")},true),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&c.merge(o.common,o[n.method]);o&&c.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p];}),n.headers=L.concat(i,o);const a=[];let f=true;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===false||(f=f&&w.synchronous,a.unshift(w.fulfilled,w.rejected));});const l=[];this.interceptors.response.forEach(function(w){l.push(w.fulfilled,w.rejected);});let u,d=0,b;if(!f){const p=[dt.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),b=p.length,u=Promise.resolve(n);d<b;)u=u.then(p[d++],p[d++]);return u}b=a.length;let g=n;for(d=0;d<b;){const p=a[d++],w=a[d++];try{g=p(g);}catch(m){w.call(this,m);break}}try{u=dt.call(this,g);}catch(p){return Promise.reject(p)}for(d=0,b=l.length;d<b;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=G(this.defaults,e);const n=jt(e.baseURL,e.url,e.allowAbsoluteUrls);return Nt(n,e.params,e.paramsSerializer)}};c.forEach(["delete","get","head","options"],function(e){K.prototype[e]=function(n,r){return this.request(G(r||{},{method:e,url:n,data:(r||{}).data}))};});c.forEach(["post","put","patch"],function(e){function n(r){return function(o,i,a){return this.request(G(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}K.prototype[e]=n(),K.prototype[e+"Form"]=n(true);});let xr=class zt{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o;});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null;}),this.promise.then=s=>{let o;const i=new Promise(a=>{r.subscribe(a),o=a;}).then(s);return i.cancel=function(){r.unsubscribe(o);},i},e(function(o,i,a){r.reason||(r.reason=new ae(o,i,a),n(r.reason));});}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e];}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1);}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r);};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return {token:new zt(function(s){e=s;}),cancel:e}}};function Cr(t){return function(n){return t.apply(null,n)}}function Pr(t){return c.isObject(t)&&t.isAxiosError===true}const We={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(We).forEach(([t,e])=>{We[e]=t;});function Vt(t){const e=new K(t),n=Rt(K.prototype.request,e);return c.extend(n,K.prototype,e,{allOwnKeys:true}),c.extend(n,e,null,{allOwnKeys:true}),n.create=function(s){return Vt(G(t,s))},n}const R=exports("R", Vt(pe));R.Axios=K;R.CanceledError=ae;R.CancelToken=xr;R.isCancel=Ut;R.VERSION=Mt;R.toFormData=Ce;R.AxiosError=y;R.Cancel=R.CanceledError;R.all=function(e){return Promise.all(e)};R.spread=Cr;R.isAxiosError=Pr;R.mergeConfig=G;R.AxiosHeaders=L;R.formToJSON=t=>Dt(c.isHTMLForm(t)?new FormData(t):t);R.getAdapter=$t.getAdapter;R.HttpStatusCode=We;R.default=R;const {Axios:Hr,AxiosError:$r,CanceledError:Mr,isCancel:zr,CancelToken:Vr,VERSION:Jr,all:Wr,Cancel:Kr,isAxiosError:Xr,spread:Gr,toFormData:Yr,AxiosHeaders:Qr,HttpStatusCode:Zr,formToJSON:es,getAdapter:ts,mergeConfig:ns}=R,rs=t=>new Promise(e=>setTimeout(e,t)),ss=(t,e=300,n=false)=>{let r=null,s=null,o=new AbortController;const i=function(...a){s=a,o.abort(),o=new AbortController,n&&!r&&t.apply(this,a),r=setTimeout(()=>{n||t.apply(this,s),r=null;},e),o.signal.addEventListener("abort",()=>{clearTimeout(r),r=null;});};return i.cancel=()=>o.abort(),i},Lr=()=>{const{host:t,pathname:e,origin:n}=window.location;return e.startsWith("/video/")||e.startsWith("/bangumi/")?"video":t==="www.bilibili.com"&&e==="/"?"home":n==="https://t.bilibili.com"?"dynamic":"other"},os=(t,e)=>{let n=t.offsetWidth,r=t.offsetHeight;const s=new ResizeObserver(o=>{for(const i of o)if(i.contentBoxSize){const a=i.target.offsetWidth,f=i.target.offsetHeight;a!==n||f!==r?(n=a,r=f,e==null||e(true,{width:a,height:f})):e==null||e(false);}});return s.observe(t),s},is=(t,e={})=>{const{maxRetries:n=3,retryDelay:r=300,tolerance:s=2}=e;return new Promise((o,i)=>{let a=0;const f=async()=>{try{window.scrollTo({top:t,behavior:"instant"}),await new Promise(b=>setTimeout(b,200));const l=window.scrollY,u=t;l===u||Math.abs(l-u)<=s||t===-5?o():a<n?(a++,setTimeout(f,r*2**(a-1))):i(new Error(`Failed to scroll after ${n} attempts`));}catch(l){i(l);}};f();})},as=t=>t.getBoundingClientRect().top+window.scrollY-parseFloat(getComputedStyle(t).marginTop),cs=(t,e)=>{const n=window.getComputedStyle(t);return Array.isArray(e)?e.reduce((r,s)=>(r[s]=n.getPropertyValue(s),r),{}):typeof e=="string"?n.getPropertyValue(e):Array.from(n).reduce((r,s)=>(r[s]=n.getPropertyValue(s),r),{})},ls=(t,e,n,r={})=>{const s=Array.isArray(t)?t:[t];if(typeof r!="object")throw new Error("Options must be an object or undefined");return s.forEach(o=>{o.addEventListener(e,n,r);}),()=>{s.forEach(o=>{o.removeEventListener(e,n,r);});}},kr=t=>t.constructor.name==="AsyncFunction",pt=t=>{if(t.length>0){const e=t.shift();kr(e)?e().then(n=>{if(n){const{callback:r}=n;r&&Array.isArray(r)&&pt(r);}pt(t);}).catch(n=>{console.log(n);}):e();}},us=()=>{let t=true;const e=(()=>{const n=["","webkit","ms","moz"];for(const r of n)if((r?`${r}Hidden`:"hidden")in document)return {event:r?`${r}visibilitychange`:"visibilitychange",state:r?`${r}VisibilityState`:"visibilityState"};return null})();if(e){const n=()=>{t=document[e.state]==="visible";};return document.addEventListener(e.event,n,{passive:true}),()=>(document.removeEventListener(e.event,n,{passive:true}),t)}else {const n=()=>{t=true;},r=()=>{t=false;};return window.addEventListener("focus",n,{passive:true}),window.addEventListener("blur",r,{passive:true}),t=document.hasFocus(),()=>(window.removeEventListener("focus",n,{passive:true}),window.removeEventListener("blur",r,{passive:true}),t)}},fs=t=>{const e=u=>{const d=new URL(u),b=d.searchParams.get("p");return `${d.href.split("?")[0].trim()}${b?`?p=${b}`:""}`.replace(/\/+$/,"")};let n=location.href,r=e(n);const s=()=>{const u=location.href;if(e(u)!==r){n=u,r=e(n);try{t();}catch(b){console.error("Href change callback error:",b);}}},o={passive:true},i=history.pushState,a=history.replaceState,f=()=>{window.addEventListener("hashchange",s,o),window.addEventListener("popstate",s,o),history.pushState=function(...u){const d=i.apply(this,u);return s(),d},history.replaceState=function(...u){const d=a.apply(this,u);return s(),d};},l=()=>{window.removeEventListener("hashchange",s,o),window.removeEventListener("popstate",s,o),history.pushState=i,history.replaceState=a;};return f(),l},ds=(t,e,n)=>{const r=document.createElement("template");r.innerHTML=t.trim();const o=r.content.cloneNode(true),i=[...o.children];return e[n](o),i.length>1?i:i[0]},hs=t=>{const e=t.split(":");if(e.length===1)return parseInt(e[0],10);if(e.length===2){const[n,r]=e.map(Number);return n*60+r}else if(e.length===3){const[n,r,s]=e.map(Number);return n*3600+r*60+s}return 0},ps=t=>{if(typeof t=="object"&&!Array.isArray(t))for(const[e,n]of Object.entries(t)){let r=document.getElementById(e);if(!n){r&&r.remove();continue}r||(r=document.createElement("style"),r.id=e,document.head.append(r)),r.textContent=n;}else throw new Error("Invalid argument type. Expected an object.")},ms=()=>{const t=document.body.clientHeight||0,e=document.documentElement.clientHeight||0;return t<e?t:e},ys=t=>t.replace(/(?:^|\.?)([A-Z])/g,(e,n)=>"_"+n.toLowerCase()).replace(/^_/,""),vr=async()=>{try{return (await R.get("https://asifadeaway.com/bilibili/bilibili-adjustment.user.js")).data}catch(t){return console.error("Failed to fetch the latest script:",t),null}},Nr=t=>{const e=t.match(/\/\/\s*@version\s*([\d.]+)/);return e&&e[1]?e[1]:null},Fr=(t,e)=>{const n=t.split(".").map(Number),r=e.split(".").map(Number);for(let s=0;s<Math.max(n.length,r.length);s++){const o=n[s]||0,i=r[s]||0;if(i>o)return  true;if(i<o)return  false}return  false},Dr=async t=>{const e=await vr();if(!e)return;const n=Nr(e);if(!n){console.error("Failed to extract version from the latest script");return}Fr(t,n)&&alert(`A new version (${n}) is available. Please update to the latest version.`);},Ur="2.2.0",Br={version:Ur},Y=new X("Main"); exports({ r: rs, s: ss, L: Lr, o: os, i: is, b: as, c: cs, l: ls, p: pt, u: us, f: fs, d: ds, h: hs, a: ps, m: ms, e: ys });Dr(Br.version);Q.initialize().then(()=>(Y.debug("ConfigService 初始化完成"),Lr())).then(t=>{Y.debug(`页面类型: ${t}`);const e={video:()=>ve(()=>module.import('./video.module-EqUTSmWY-DYK7cPV4.js'),void 0),home:()=>ve(()=>module.import('./home.module-DnWX1JxV-64hGWM6g.js'),void 0),dynamic:()=>ve(()=>module.import('./dynamic.module-CkZsXyiy-t3LcGd30.js'),void 0)};if(e[t])return e[t]().then(n=>{const r=n.default;Y.debug(`注册模块: ${r.name}`),et.register(r);});Y.error(`No module found for type: ${t}`);}).then(()=>et.init()).then(()=>{Y.info("应用初始化完成"),j.emit("app:ready");}).catch(t=>{Y.error("应用初始化失败",t);});

		})
	};
}));

System.register("./video.module-EqUTSmWY-DYK7cPV4.js", ['./__monkey.entry-L6FtwPzP.js', './regexps-Cya52ERd-C0yF2jAD.js', './templates-BzjD1LcL-sDN0hXs-.js', './biliApis-Bo05EvjX-CTneyNbn.js'], (function (exports, module) {
	'use strict';
	var pt, ds, ls, ps, ms, X, j, rs, hs, cs, as, is, ye$1, os, fs, ss, us, B, Q, f$1, g, h, x$1, A$1;
	return {
		setters: [module => {
			pt = module.p;
			ds = module.d;
			ls = module.l;
			ps = module.a;
			ms = module.m;
			X = module.X;
			j = module.j;
			rs = module.r;
			hs = module.h;
			cs = module.c;
			as = module.b;
			is = module.i;
			ye$1 = module.y;
			os = module.o;
			fs = module.f;
			ss = module.s;
			us = module.u;
		}, module => {
			B = module.B;
			Q = module.Q;
		}, module => {
			f$1 = module.f;
			g = module.g;
			h = module.h;
			x$1 = module.x;
		}, module => {
			A$1 = module.A;
		}],
		execute: (function () {

			var Y=s=>{throw TypeError(s)};var O=(s,e,t)=>e.has(s)||Y("Cannot "+t);var y=(s,e,t)=>(O(s,e,"read from private field"),t?t.call(s):e.get(s)),_=(s,e,t)=>e.has(s)?Y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Z=(s,e,t,o)=>(O(s,e,"write to private field"),e.set(s,t),t),l=(s,e,t)=>(O(s,e,"access private method"),t);var A,I,T,L,D,n,ie,R,z,se,J,ae,ne,re,ce,le,x,ue,de,he,$,pe,ye,G,K;const E=class E{static init(){var t;if(this.initialized||(t=Element.prototype.attachShadow)!=null&&t.__monkeyPatched)return;const e=Element.prototype.attachShadow;Element.prototype.attachShadow=function(o){const i=e.call(this,o);return y(E,A).set(this,i),i},Element.prototype.attachShadow.__monkeyPatched=true,this.initialized=true,l(this,n,ie).call(this);}static getShadowRoot(e){return e.shadowRoot??y(this,A).get(e)??null}static querySelector(e,t){return l(this,n,z).call(this,e,t,false)[0]||null}static querySelectorAll(e,t){return l(this,n,z).call(this,e,t,true)}static batchQuery(e,t,o={}){const{deconstruct:i=false}=o,a={};return Object.entries(t).forEach(([c,u])=>{a[c]=this.querySelectorAll(e,u);}),i?a:[...new Set(Object.values(a).flat())]}static watchQuery(e,t,o,i={}){const{nodeNameFilter:a,checkHostTree:r=true,observeExisting:c=true,debounce:u=50,maxRetries:h=3,scanInterval:m=0,allowReprocess:p=false}=i;if(!a&&!t)throw new Error("必须提供 selector 或 nodeNameFilter");const w=new MutationObserver(l(this,n,he).call(this,u,fe=>{fe.flatMap(U=>[...U.addedNodes]).forEach(U=>l(this,n,ne).call(this,U,e,t,o,{nodeNameFilter:a,checkHostTree:r,maxRetries:h,allowReprocess:p}));}));let N;m>0&&(N=setInterval(()=>{l(this,n,J).call(this,e,t,o,{nodeNameFilter:a,checkHostTree:r,allowReprocess:p});},m));const F=()=>{w.disconnect(),N&&clearInterval(N),y(this,I).delete(e),p||Z(this,L,new WeakSet);};return y(this,I).set(e,{observer:w,callback:o,cleanup:F}),w.observe(this.getShadowRoot(e)??e,{childList:true,subtree:true}),c&&l(this,n,J).call(this,e,t,o,{nodeNameFilter:a,checkHostTree:r,allowReprocess:p}),F}static addStyle(e,t,o,i={}){const{isolate:a=true,mode:r="append",priority:c="low"}=i,u=this.querySelectorAll(e,t);if(u.length===0)return  false;const h=l(this,n,ue).call(this,o);return u.forEach(m=>{const p=l(this,n,pe).call(this,m,a),w=a?`[${p.dataset.uniqueAttr}] { ${h} }`:h;l(this,n,le).call(this,p,w,r,c);}),true}static debugQuery(e,t){console.groupCollapsed("[ShadowDOMHelper] 查询路径调试");const o=this.querySelector(e,t);return l(this,n,x).call(this,t).forEach((a,r)=>{console.group(`层级 ${r+1}: ${a.isShadow?"Shadow":"DOM"} 选择器 "${a.selector}"`),console.info("上下文元素:",a.contexts),console.info("匹配元素:",a.results),console.groupEnd();}),console.info("最终结果:",o),console.groupEnd(),o}static debugShadowRoot(e){var t,o;console.groupCollapsed("[ShadowDOMHelper] ShadowRoot 诊断");try{const i=this.getShadowRoot(e);console.info("宿主:",e),console.info("模式:",e.shadowRoot?"open":"closed"),console.info("内容摘要:",((t=i==null?void 0:i.innerHTML)==null?void 0:t.slice(0,200))+(((o=i==null?void 0:i.innerHTML)==null?void 0:o.length)>200?"...":""));}catch(i){console.error("诊断失败:",i);}console.groupEnd();}static async queryUntil(e,t,o={}){const{timeout:i=1e3,findAll:a=false,interval:r=50}=o;let c=0;const u=Date.now();for(;c<i;){const h=a?this.querySelectorAll(e,t):this.querySelector(e,t);if(a?h.length>0:h)return h;await new Promise(m=>setTimeout(m,r)),c=Date.now()-u;}return null}};A=new WeakMap,I=new WeakMap,T=new WeakMap,L=new WeakMap,D=new WeakMap,n=new WeakSet,ie=function(){const e=document.createTreeWalker(document.documentElement,NodeFilter.SHOW_ELEMENT);let t;for(;t=e.nextNode();)t.shadowRoot&&!y(this,A).has(t)&&y(this,A).set(t,t.shadowRoot);},R=function(e){return e.nodeType===Node.ELEMENT_NODE&&e.namespaceURI==="http://www.w3.org/1999/xhtml"},z=function(e,t,o){l(this,n,ye).call(this,t);const i=l(this,n,x).call(this,t);let a=[e];for(const r of i){const c=[];for(const u of a){if(!l(this,n,R).call(this,u))break;l(this,n,se).call(this,u,r).forEach(m=>{try{const p=this.getShadowRoot(m),w=(p==null?void 0:p.querySelectorAll(r.selector))??m.querySelectorAll(r.selector);c.push(...w);}catch(p){throw console.error(`选择器错误: "${r.selector}"`,p),p}});}if(a=[...new Set(c)],!o&&a.length===0)break}return o?a:a.slice(0,1)},se=function(e,t){const o=[];if(t.isShadow){const i=l(this,n,re).call(this,e);o.push(e,...i);}else o.push(e);return o},J=function(e,t,o,i){const{nodeNameFilter:a,checkHostTree:r,allowReprocess:c}=i,u=h=>{const m=document.createTreeWalker(h,NodeFilter.SHOW_ELEMENT,{acceptNode:w=>{if(!l(this,n,R).call(this,w)||l(this,n,G).call(this,w,c))return NodeFilter.FILTER_REJECT;const N=a&&w.nodeName===a.toUpperCase(),F=t&&w.matches(t);return N||F?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let p;for(;p=m.nextNode();)r&&!l(this,n,de).call(this,p,e)||(l(this,n,K).call(this,p),l(this,n,$).call(this,o,p));};u(e.shadowRoot??e),l(this,n,ae).call(this,e).forEach(h=>u(h));},ae=function(e){const t=new Set,o=[e];for(;o.length>0;){const i=o.pop(),a=this.getShadowRoot(i);a&&(t.add(a),o.push(...a.querySelectorAll("*")));}return [...t]},ne=function(e,t,o,i,a){const{nodeNameFilter:r,allowReprocess:c}=a;if(l(this,n,R).call(this,e)&&!l(this,n,G).call(this,e,c)){if(l(this,n,K).call(this,e),r){e.nodeName===r.toUpperCase()&&l(this,n,$).call(this,i,e);return}l(this,n,ce).call(this,e,t,o)&&l(this,n,$).call(this,i,e);}},re=function(e){const t=[],o=[e];for(;o.length>0;){const i=o.pop();if(!l(this,n,R).call(this,i))continue;const a=this.getShadowRoot(i);if(!a)continue;const r=[...a.childNodes].filter(c=>l(this,n,R).call(this,c));t.push(...r),o.push(...r);}return t},ce=function(e,t,o){try{const i=[...l(this,n,x).call(this,o)].reverse();let a=e;for(const r of i){const c=r.isShadow?a.getRootNode().host:a.parentElement;if(!(c!=null&&c.matches(r.selector)))return !1;a=c;}return a===t}catch{return  false}},le=function(e,t,o,i){if(o==="replace")e.textContent=t;else {const a=i==="high"?"insertBefore":"appendChild",r=document.createTextNode(t);e[a](r,e.firstChild);}},x=function(e){if(y(this,T).has(e))return y(this,T).get(e);const t=e.split(/(\s*>>\s*|\s*>\s*)/g).map(r=>r.trim()).filter(Boolean),o=[];let i=false,a="";return t.length===1&&![">>",">"].includes(t[0])?o.push({selector:t[0],isShadow:true}):(t.forEach(r=>{r===">>"?(a&&o.push({selector:a,isShadow:true}),a="",i=true):r===">"?(a&&o.push({selector:a,isShadow:false}),a="",i=false):a+=r;}),a&&o.push({selector:a,isShadow:i})),y(this,T).size>=y(this,D)&&y(this,T).delete(y(this,T).keys().next().value),y(this,T).set(e,o),o},ue=function(e){if(typeof e=="string")return e.replace(/^\s*\{|\}\s*$/g,"").replace(/;(\s*})/g,"$1").trim();if(typeof e=="object")return Object.entries(e).map(([t,o])=>`${t.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${o}`).join("; ");throw new TypeError("样式必须是字符串或对象")},de=function(e,t){var i;let o=e.getRootNode();for(;o;){if(o===t.getRootNode())return  true;o=(i=o.host)==null?void 0:i.getRootNode();}return  false},he=function(e,t){let o;return (...i)=>{clearTimeout(o),o=setTimeout(()=>t(...i),e);}},$=function(e,t){try{t!=null&&t.isConnected&&e(t);}catch(o){console.error("回调执行失败:",o);}},pe=function(e,t){if(!l(this,n,R).call(this,e))return null;const o=this.getShadowRoot(e)??e.attachShadow({mode:"open"});[...o.childNodes].filter(a=>a.nodeType===Node.COMMENT_NODE).forEach(a=>a.remove());let i=o.querySelector("style[data-shadow-style]");if(!i&&(i=document.createElement("style"),i.dataset.shadowStyle=true,o.prepend(i),t)){const a=`s-${Math.random().toString(36).slice(2,8)}`;i.dataset.uniqueAttr=a,e.setAttribute(a,"");}return i},ye=function(e){if(typeof e!="string"||!e.trim())throw new TypeError("选择器必须是有效的非空字符串")},G=function(e,t){return !t&&y(this,L).has(e)},K=function(e){y(this,L).add(e);},_(E,n),_(E,A,new WeakMap),_(E,I,new WeakMap),_(E,T,new Map),_(E,L,new WeakSet),_(E,D,100);let S=E;const k=Object.freeze({querySelector:(s,e)=>S.querySelector(s,e),querySelectorAll:(s,e)=>S.querySelectorAll(s,e),batchQuery:(s,e,t)=>S.batchQuery(s,e,t),watchQuery:(s,e,t,o)=>S.watchQuery(s,e,t,o),addStyle:(s,e,t,o)=>S.addStyle(s,e,t,o),queryUntil:(s,e,t)=>S.queryUntil(s,e,t),debugQuery:(s,e)=>S.debugQuery(s,e),debugShadowRoot:s=>S.debugShadowRoot(s)});S.init();const f=new X("VideoModule"),Ce=new Q,Me=exports("default", {name:"video",version:"2.0.0",async install(){ps({BodyOverflowHiddenStyle:h.BodyOverflowHidden}),j.on("app:ready",async()=>{f.info("视频模块｜已加载"),await this.preFunctions();});},async preFunctions(){await ye$1.legacySet("player_type",location.pathname.startsWith("/video/")?"video":"bangumi"),await rs(300),this.userConfigs=await ye$1.getAll("user"),this.registSettings(),this.initEventListeners(),this.initMonitors(),us()&&(f.info("标签页｜已激活"),ps({VideoPageAdjustment:h.VideoPageAdjustment,VideoSettings:h.VideoSettings}),this.checkVideoCanplaythrough(await f$1.video));},async initEventListeners(){j.on("logger:show",(s,{type:e,message:t})=>{f[e](t);}),j.on("video:canplaythrough",ss(this.autoSelectPlayerMode,true)),j.on("video:playerModeSelected",ss(this.autoLocateToPlayer,true)),j.once("video:startOtherFunctions",ss(this.handleExecuteFunctionsSequentially,500,true)),j.once("video:webfullPlayerModeUnlock",ss(this.insertLocateToCommentButton,500,true));},async registSettings(){await Ce.init(this.userConfigs);},initMonitors(){fs(()=>{f.info("视频资源丨链接已改变"),this.handleHrefChangedFunctionsSequentially();});},isVideoCanplaythrough(s){return new Promise(e=>{if((s==null?void 0:s.readyState)>=HTMLMediaElement.HAVE_ENOUGH_DATA)return e(true);const t=new AbortController,o=()=>{s.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA&&(t.abort(),e(true));};["canplaythrough","loadeddata"].forEach(a=>s.addEventListener(a,o,{signal:t.signal}));})},async checkVideoCanplaythrough(s,e=true){if(await this.isVideoCanplaythrough(s))return e&&j.emit("video:canplaythrough"),f.info("视频资源｜可以播放"),true},async autoSelectPlayerMode(){var e;if((e=[{type:"wide",action:async()=>{(await f$1.playerModeWideEnterButton).click();}},{type:"web",action:async()=>{(await f$1.playerModeWebEnterButton).click();}},{type:"normal",action:async()=>{f.info("屏幕模式丨功能已关闭"),j.emit("video:playerModeSelected");}}].find(t=>t.type===this.userConfigs.selected_player_mode))==null||e.action(),await rs(350),this.userConfigs.selected_player_mode!=="normal"){const t=await f$1.video;await this.isPlayerModeSwitchSuccess(this.userConfigs.selected_player_mode,t)&&(f.info(`屏幕模式丨${this.userConfigs.selected_player_mode==="wide"?"宽屏":"网页全屏"}丨切换成功`),j.emit("video:playerModeSelected"));}},async isPlayerModeSwitchSuccess(s,e){const t=await f$1.playerContainer;await ye$1.legacySet("player_offset_top",await as(t));const o=t.getAttribute("data-screen");if(f.debug(`屏幕模式丨当前模式：${o}，目标模式：${s}`),o===s)return  true;const i=os(e,async(a,r)=>{if(a&&t.getAttribute("data-screen")===s)return i.disconnect(),true});this.autoSelectPlayerMode();},async autoLocateToPlayer(){if(ps({BodyOverflowHiddenStyle:""}),this.userConfigs.webfull_unlock||this.userConfigs.player_type==="web"){j.emit("video:startOtherFunctions");return}if(!this.userConfigs.auto_locate){f.info("自动定位丨功能已关闭"),j.emit("video:startOtherFunctions");return}await rs(300),await this.locateToPlayer(),f.info("自动定位丨成功"),j.emit("video:startOtherFunctions");},async locateToPlayer(){const s=await f$1.query("playerContainer"),t=s.getAttribute("data-screen")!=="mini"?await as(s):this.userConfigs.player_offset_top,o=cs(await f$1.headerMini,["position","height"]),i=o.position==="fixed"?t-parseInt(o.height):t;is(i-this.userConfigs.offset_top);},async clickPlayerAutoLocate(){this.userConfigs.click_player_auto_locate&&ls(await f$1.video,"click",async()=>{await this.locateToPlayer();});},handleJumpToVideoTime(s,e){const t=e.dataset.videoTime;t>s.duration&&alert("当前时间点大于视频总时长，将跳到视频结尾！"),s.currentTime=t,s.play();},async clickVideoTimeAutoLocation(){const s=["video","videoCommentRoot"],[e,t]=await f$1.batch(s),o=this.userConfigs.player_type==="video"?await k.querySelectorAll(t,x$1.descriptionVideoTime):[];o.length>0&&o.forEach(i=>{ls(i,"click",async a=>{a.stopPropagation(),await this.locateToPlayer(),this.handleJumpToVideoTime(e,i);});});},async doSomethingToCommentElements(){const s=["video","videoCommentRoot"],[e,t]=await f$1.batch(s),o=(a,r)=>{const c=`<div id="location" style="margin-left:5px">${r}</div>`,u=k.querySelectorAll(a,x$1.replyPublicDate);queueMicrotask(()=>{u.forEach(h=>{ds(c,h,"after");});});},i=a=>{k.watchQuery(a,"",async r=>{o(r,r.data.reply_control.location??"IP属地：未知");},{nodeNameFilter:"bili-comment-reply-renderer",debounce:100,maxRetries:5,observeExisting:true,scanInterval:1e3});};k.watchQuery(t,x$1.commentRenderderContainer,async a=>{k.batchQuery(a,{videoTime:x$1.videoTime,replyVideoTime:x$1.replyVideoTime}).forEach(c=>{ls(c,"click",async u=>{u.stopPropagation(),await this.locateToPlayer(),this.handleJumpToVideoTime(e,c);});}),this.userConfigs.show_location&&k.batchQuery(a,{comment:x$1.commentRenderder,replies:x$1.commentRepliesRenderer}).forEach(u=>{o(u,u.data.reply_control.location??"IP属地：未知"),u.nodeName.toLowerCase()==="bili-comment-replies-renderer"&&i(u);});},{nodeNameFilter:"bili-comment-thread-renderer",debounce:100,maxRetries:5,observeExisting:true,scanInterval:1e3});},async autoSelectVideoHighestQuality(){if(!this.userConfigs.auto_select_video_highest_quality)return;const s={127:"8K超清",120:"4K超清",116:"1080P60",112:"1080P高码率",80:"1080P高清",64:"720P高清",32:"480P清晰",16:"360P流畅"},o=Array.from(await f$1.queryAll("qualitySwitchButtons")).map(i=>({value:+i.dataset.value,element:i,isVIP:i.children.length<2})).sort((i,a)=>a.value-i.value).filter(i=>this.userConfigs.is_vip?true:i.isVIP).find(i=>!this.userConfigs.is_vip||this.userConfigs.contain_quality_8k&&i.value===127||this.userConfigs.contain_quality_4k&&i.value===120?true:i.value<120);o&&(o.element.click(),f.info(`最高画质｜${this.userConfigs.is_vip?"VIP":"非VIP"}｜${s[o.value]||o.value}｜切换成功`));},async autoCancelMute(){if(!this.userConfigs.auto_cancel_mute)return;const s=["mutedButton","volumeButton"],[e,t]=await f$1.batch(s);if(!e||!t)return;const o={muted:cs(e),volume:cs(t)};(o.muted.display==="block"||o.volume.display==="none")&&(e.click(),f.info("静音丨已关闭"));},async autoEnableSubtitle(){if(!this.userConfigs.auto_subtitle)return;const s=await f$1.switchSubtitleButton;s.children[0].children[0].children[0].children[1].childElementCount===1||(s.children[0].children[0].click(),f.info("视频字幕丨已开启"));},async insertSideFloatNavToolsButtons(){const s=this.userConfigs.player_type==="video"?await f$1.videoFloatNav:await f$1.bangumiFloatNav,e=s.lastChild.attributes[1].name;let t,o;if(this.userConfigs.player_type==="video"&&(t=ds(g.replace("videoLocateButton",{dataV:e}),s.lastChild,"prepend"),o=ds(g.replace("videoSettingsOpenButton",{dataV:e}),s.lastChild,"prepend")),this.userConfigs.player_type==="bangumi"){const i=s.lastChild.lastChild.getAttribute("class");t=ds(g.replace("bangumiLocateButton",{floatNavMenuItemClass:i}),s.lastChild,"before");}ls(t,"click",async()=>{await this.locateToPlayer();}),ls(o,"click",async()=>{(await f$1.VideoSettingsPopover).showPopover();});},processVideoCommentDescriptionHtml(s){return s.replace(B.video.specialBlank,"%20").replace(B.video.nbspToBlank," ").replace(B.video.timeString,e=>`<a data-type="seek" data-video-part="-1" data-video-time="${hs(e)}">${e}</a>`).replace(B.video.url,e=>`<a href="${e}" target="_blank">${e}</a>`).replace(B.video.videoId,e=>`<a href="https://www.bilibili.com/video/${e}" target="_blank">${e}</a>`).replace(B.video.readId,e=>`<a href="https://www.bilibili.com/read/${e}" target="_blank">${e}</a>`).replace(B.video.blankLine,"")},async insertVideoDescriptionToComment(){if(!this.userConfigs.insert_video_description_to_comment||this.userConfigs.player_type==="bangumi")return;const s=["videoDescription","videoDescriptionInfo","videoCommentRoot"],[e,t,o]=await f$1.batch(s),i=setInterval(async()=>{if(t.baseURI===location.href){clearInterval(i);const r=await f$1.query("adjustmentCommentDescription");r==null||r.remove();const c=await k.queryUntil(o,x$1.commentRenderderContainer);if(e.childElementCount>1&&t.childElementCount>0){const u="//www.asifadeaway.com/Stylish/bilibili/avatar-description.png",h$1=document.createElement("template");h$1.innerHTML=g.replace("shadowRootVideoDescriptionReply",{videoCommentDescription:h.videoCommentDescription,upAvatarFaceLink:u,processVideoCommentDescription:this.processVideoCommentDescriptionHtml(t.innerHTML)});const m=h$1.content.cloneNode(true);c==null||c.prepend(m),await rs(300),await k.querySelector(o,x$1.descriptionRenderer)?f.info("视频简介丨已插入"):this.insertVideoDescriptionToComment();}else {const u=await f$1.videoDescriptionInfo;u.innerHTML=this.processVideoCommentDescriptionHtml(u.innerHTML),f.info("视频简介丨已替换");}}},300);},async unlockEpisodeSelector(){const s=await A$1.getVideoInformation(A$1.getCurrentVideoID(window.location.href)),{pages:e=false,ugc_season:t=false}=s.data;(t||e.length>1)&&(ps({UnlockEpisodeSelectorStyle:h.UnlockEpisodeSelector}),f$1.each("videoEpisodeListMultiMenuItem",o=>{ls(o,"click",async()=>{await this.locateToPlayer();});}));},async webfullPlayerModeUnlock(){if(!this.userConfigs.webfull_unlock||this.userConfigs.selected_player_mode!=="web"||this.userConfigs.player_type==="bangumi")return;const s=["app","playerWrap","player","playerWebscreen","playerModeWideEnterButton","playerModeWideLeaveButton","playerModeWebEnterButton","playerModeWebLeaveButton","playerModeFullControlButton"],[e,t,o,i,a,r,c,u,h$1]=await f$1.batch(s),m=async()=>{ps({UnlockWebPlayerStyle:h.UnlockWebPlayer,ResetPlayerLayoutStyle:h.ResetPlayerLayout}),t.append(o),await ye$1.set("current_player_mode","wide"),await this.locateToPlayer();};ps({UnlockWebPlayerStyle:h.UnlockWebPlayer.replace(/BODYHEIGHT/gi,`${ms()}px`)}),e.prepend(i),ls([u,a,r,h$1],"click",async()=>{await rs(100),await m();}),ls(c,"click",async()=>{f$1.UnlockWebPlayerStyle||ps({UnlockWebPlayerStyle:h.UnlockWebPlayer.replace(/BODYHEIGHT/gi,`${ms()}px`)}),e.prepend(i),await this.locateToPlayer();}),f.info("网页全屏丨已解锁"),j.emit("video:webfullPlayerModeUnlock");},async insertLocateToCommentButton(){if(!this.userConfigs.webfull_unlock||this.userConfigs.player_type==="bangumi"||this.userConfigs.selected_player_mode!=="web")return;const s=["playerControllerBottomRight","videoComment"],[e,t]=await f$1.batch(s),o=ds(g.locateToCommentBtn,e,"append");ls(o,"click",async i=>{i.stopPropagation(),is(await as(t)-10);});},async handleHrefChangedFunctionsSequentially(){this.locateToPlayer();const s=[this.insertVideoDescriptionToComment,this.clickVideoTimeAutoLocation,this.doSomethingToCommentElements,this.unlockEpisodeSelector];await this.checkVideoCanplaythrough(await f$1.video,false)&&pt(s);},handleExecuteFunctionsSequentially(){const s=[this.webfullPlayerModeUnlock,this.clickPlayerAutoLocate,this.autoSelectVideoHighestQuality,this.autoCancelMute,this.autoEnableSubtitle,this.insertVideoDescriptionToComment,this.insertSideFloatNavToolsButtons,this.clickVideoTimeAutoLocation,this.doSomethingToCommentElements,this.unlockEpisodeSelector];pt(s);}});

		})
	};
}));

System.register("./home.module-DnWX1JxV-64hGWM6g.js", ['./__monkey.entry-L6FtwPzP.js', './biliApis-Bo05EvjX-CTneyNbn.js', './templates-BzjD1LcL-sDN0hXs-.js'], (function (exports, module) {
	'use strict';
	var pt, ye, ds, ls, X, us, ps, j, rs, A, f, g, h;
	return {
		setters: [module => {
			pt = module.p;
			ye = module.y;
			ds = module.d;
			ls = module.l;
			X = module.X;
			us = module.u;
			ps = module.a;
			j = module.j;
			rs = module.r;
		}, module => {
			A = module.A;
		}, module => {
			f = module.f;
			g = module.g;
			h = module.h;
		}],
		execute: (function () {

			const x=new X("VideoModule"),S=exports("default", {name:"home",version:"1.0.0",async install(){j.on("app:ready",async()=>{x.info("首页模块｜已加载"),await this.preFunctions();});},async preFunctions(){this.userConfigs=await ye.getAll("user"),us()&&(x.info("标签页｜已激活"),ps({IndexAdjustment:h.IndexAdjustment}),this.handleExecuteFunctionsSequentially(),this.initEventListeners());},async initEventListeners(){const o=await f.indexRecommendVideoRollButton;ls(o,"click",async()=>{pt([this.setRecordRecommendVideoHistory,this.generatorIndexRecommendVideoHistoryContents]);});},async setRecordRecommendVideoHistory(){(await f.all('.recommended-container_floor-aside .feed-card:nth-child(-n+11):not(:has([class*="-ad"]))')).forEach(async c=>{const d=c.querySelector("a").href,m=c.querySelector("h3").title;if(location.host.includes("bilibili.com")&&!d.includes("cm.bilibili.com")){const{data:{tid:l,tid_v2:y,tname:n,tname_v2:r,pic:u}}=await A.getVideoInformation(A.getCurrentVideoID(d));await ye.set("index",m,{title:m,tid:l,tid_v2:y,tname:n,tname_v2:r,url:d,pic:u});}}),x.info("首页视频推荐历史记录｜已开启");},async insertIndexRecommendVideoHistoryPopover(){const o=await f.indexRecommendVideoRollButtonWrapper,c=g.indexRecommendVideoHistoryOpenButton,d=g.indexRecommendVideoHistoryPopover;ds(c,o,"append");const m=ds(d,document.body,"append"),l=["indexApp","indexRecommendVideoHistoryPopoverTitle"];ls(m,"toggle",async n=>{const[r,u]=await f.batch(l);n.newState==="open"&&(r.style.pointerEvents="none",this.generatorIndexRecommendVideoHistoryContents()),n.newState==="closed"&&(r.style.pointerEvents="auto",u.querySelector("span").innerText="首页视频推荐历史记录");});const y=await f.indexRecommendVideoHistoryOpenButton;ls(y,"click",async()=>{const n=await f.clearRecommendVideoHistoryButton;ls(n,"click",async()=>{this.clearRecommendVideoHistory();});});},async generatorIndexRecommendVideoHistoryContents(){const o=await ye.getAll("index"),c=await ye.getCount("index"),d=["indexRecommendVideoHistoryPopoverTitleCount","indexRecommendVideoHistoryCategory","indexRecommendVideoHistoryCategoryV2","indexRecommendVideoHistoryList"],[m,l,y,n]=await f.batch(d);l.innerHTML='<li class="all adjustment_button primary plain">全部</li>',y.innerHTML="",n.innerHTML="",m.innerText=`首页视频推荐历史记录(${c})`;const r=async e=>{f.each("indexRecommendVideoHistoryCategoryButtons",s=>{s.classList.remove("active");}),await rs(100),e.classList.add("active");},u=Array.from(Object.entries(o).reduce((e,[s,t])=>{const R=`${t.tid}_${t.tname}`;return e.has(R)?e:e.set(R,{tname:t.tname,tid:t.tid})},new Map).values()),f$1=Array.from(Object.entries(o).reduce((e,[s,t])=>{const R=`${t.tid_v2}_${t.tname_v2}`;return e.has(R)?e:e.set(R,{tname_v2:t.tname_v2,tid_v2:t.tid_v2})},new Map).values());for(const e of u)ds(`<li data-tid="${e.tid}">${e.tname}</li>`,l,"append");for(const e of f$1)ds(`<li data-tid="${e.tid_v2}">${e.tname_v2}</li>`,y,"append");for(const e of Object.entries(o))ds(`<li><span><img src="${e[1].pic}"></span><a href="${e[1].url}" target="_blank">${e[1].title}</a></li>`,n,"append");f.each("indexRecommendVideoHistoryCategoryButtons",e=>{ls(e,"click",async()=>{r(e),n.innerHTML="";const s=Number(e.dataset.tid);for(const t of Object.entries(o))[t[1].tid,t[1].tid_v2].includes(s)&&ds(`<li><span><img src="${t[1].pic}"></span><a href="${t[1].url}" target="_blank">${t[1].title}</a></li>`,n,"append");});}),f.each("indexRecommendVideoHistoryCategoryButtonAll",e=>{ls(e,"click",async()=>{r(e),n.innerHTML="";for(const s of Object.entries(o))ds(`<li><span><img src="${s[1].pic}"></span><a href="${s[1].url}" target="_blank">${s[1].title}</a></li>`,n,"append");});});},async clearRecommendVideoHistory(){await ye.clear("index"),(await f.indexRecommendVideoHistoryPopover).hidePopover();},handleExecuteFunctionsSequentially(){const o=[this.setRecordRecommendVideoHistory,this.insertIndexRecommendVideoHistoryPopover,this.generatorIndexRecommendVideoHistoryContents];pt(o);}});

		})
	};
}));

System.register("./biliApis-Bo05EvjX-CTneyNbn.js", ['./__monkey.entry-L6FtwPzP.js'], (function (exports, module) {
	'use strict';
	var R$1, X, ye;
	return {
		setters: [module => {
			R$1 = module.R;
			X = module.X;
			ye = module.y;
		}],
		execute: (function () {

			function M(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var x={exports:{}},B={exports:{}},I;function D(){return I||(I=1,function(){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d={rotl:function(u,a){return u<<a|u>>>32-a},rotr:function(u,a){return u<<32-a|u>>>a},endian:function(u){if(u.constructor==Number)return d.rotl(u,8)&16711935|d.rotl(u,24)&4278255360;for(var a=0;a<u.length;a++)u[a]=d.endian(u[a]);return u},randomBytes:function(u){for(var a=[];u>0;u--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(u){for(var a=[],c=0,f=0;c<u.length;c++,f+=8)a[f>>>5]|=u[c]<<24-f%32;return a},wordsToBytes:function(u){for(var a=[],c=0;c<u.length*32;c+=8)a.push(u[c>>>5]>>>24-c%32&255);return a},bytesToHex:function(u){for(var a=[],c=0;c<u.length;c++)a.push((u[c]>>>4).toString(16)),a.push((u[c]&15).toString(16));return a.join("")},hexToBytes:function(u){for(var a=[],c=0;c<u.length;c+=2)a.push(parseInt(u.substr(c,2),16));return a},bytesToBase64:function(u){for(var a=[],c=0;c<u.length;c+=3)for(var f=u[c]<<16|u[c+1]<<8|u[c+2],s=0;s<4;s++)c*8+s*6<=u.length*8?a.push(l.charAt(f>>>6*(3-s)&63)):a.push("=");return a.join("")},base64ToBytes:function(u){u=u.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],c=0,f=0;c<u.length;f=++c%4)f!=0&&a.push((l.indexOf(u.charAt(c-1))&Math.pow(2,-2*f+8)-1)<<f*2|l.indexOf(u.charAt(c))>>>6-f*2);return a}};B.exports=d;}()),B.exports}var F,C;function S(){if(C)return F;C=1;var l={utf8:{stringToBytes:function(d){return l.bin.stringToBytes(unescape(encodeURIComponent(d)))},bytesToString:function(d){return decodeURIComponent(escape(l.bin.bytesToString(d)))}},bin:{stringToBytes:function(d){for(var u=[],a=0;a<d.length;a++)u.push(d.charCodeAt(a)&255);return u},bytesToString:function(d){for(var u=[],a=0;a<d.length;a++)u.push(String.fromCharCode(d[a]));return u.join("")}}};return F=l,F}/*!
			 * Determine if an object is a Buffer
			 *
			 * @author   Feross Aboukhadijeh <https://feross.org>
			 * @license  MIT
			 */var m,b;function W(){if(b)return m;b=1,m=function(u){return u!=null&&(l(u)||d(u)||!!u._isBuffer)};function l(u){return !!u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u)}function d(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&l(u.slice(0,0))}return m}var R;function $(){return R||(R=1,function(){var l=D(),d=S().utf8,u=W(),a=S().bin,c=function(f,s){f.constructor==String?s&&s.encoding==="binary"?f=a.stringToBytes(f):f=d.stringToBytes(f):u(f)?f=Array.prototype.slice.call(f,0):!Array.isArray(f)&&f.constructor!==Uint8Array&&(f=f.toString());for(var i=l.bytesToWords(f),p=f.length*8,r=1732584193,t=-271733879,e=-1732584194,n=271733878,o=0;o<i.length;o++)i[o]=(i[o]<<8|i[o]>>>24)&16711935|(i[o]<<24|i[o]>>>8)&4278255360;i[p>>>5]|=128<<p%32,i[(p+64>>>9<<4)+14]=p;for(var h=c._ff,g=c._gg,y=c._hh,v=c._ii,o=0;o<i.length;o+=16){var U=r,k=t,q=e,E=n;r=h(r,t,e,n,i[o+0],7,-680876936),n=h(n,r,t,e,i[o+1],12,-389564586),e=h(e,n,r,t,i[o+2],17,606105819),t=h(t,e,n,r,i[o+3],22,-1044525330),r=h(r,t,e,n,i[o+4],7,-176418897),n=h(n,r,t,e,i[o+5],12,1200080426),e=h(e,n,r,t,i[o+6],17,-1473231341),t=h(t,e,n,r,i[o+7],22,-45705983),r=h(r,t,e,n,i[o+8],7,1770035416),n=h(n,r,t,e,i[o+9],12,-1958414417),e=h(e,n,r,t,i[o+10],17,-42063),t=h(t,e,n,r,i[o+11],22,-1990404162),r=h(r,t,e,n,i[o+12],7,1804603682),n=h(n,r,t,e,i[o+13],12,-40341101),e=h(e,n,r,t,i[o+14],17,-1502002290),t=h(t,e,n,r,i[o+15],22,1236535329),r=g(r,t,e,n,i[o+1],5,-165796510),n=g(n,r,t,e,i[o+6],9,-1069501632),e=g(e,n,r,t,i[o+11],14,643717713),t=g(t,e,n,r,i[o+0],20,-373897302),r=g(r,t,e,n,i[o+5],5,-701558691),n=g(n,r,t,e,i[o+10],9,38016083),e=g(e,n,r,t,i[o+15],14,-660478335),t=g(t,e,n,r,i[o+4],20,-405537848),r=g(r,t,e,n,i[o+9],5,568446438),n=g(n,r,t,e,i[o+14],9,-1019803690),e=g(e,n,r,t,i[o+3],14,-187363961),t=g(t,e,n,r,i[o+8],20,1163531501),r=g(r,t,e,n,i[o+13],5,-1444681467),n=g(n,r,t,e,i[o+2],9,-51403784),e=g(e,n,r,t,i[o+7],14,1735328473),t=g(t,e,n,r,i[o+12],20,-1926607734),r=y(r,t,e,n,i[o+5],4,-378558),n=y(n,r,t,e,i[o+8],11,-2022574463),e=y(e,n,r,t,i[o+11],16,1839030562),t=y(t,e,n,r,i[o+14],23,-35309556),r=y(r,t,e,n,i[o+1],4,-1530992060),n=y(n,r,t,e,i[o+4],11,1272893353),e=y(e,n,r,t,i[o+7],16,-155497632),t=y(t,e,n,r,i[o+10],23,-1094730640),r=y(r,t,e,n,i[o+13],4,681279174),n=y(n,r,t,e,i[o+0],11,-358537222),e=y(e,n,r,t,i[o+3],16,-722521979),t=y(t,e,n,r,i[o+6],23,76029189),r=y(r,t,e,n,i[o+9],4,-640364487),n=y(n,r,t,e,i[o+12],11,-421815835),e=y(e,n,r,t,i[o+15],16,530742520),t=y(t,e,n,r,i[o+2],23,-995338651),r=v(r,t,e,n,i[o+0],6,-198630844),n=v(n,r,t,e,i[o+7],10,1126891415),e=v(e,n,r,t,i[o+14],15,-1416354905),t=v(t,e,n,r,i[o+5],21,-57434055),r=v(r,t,e,n,i[o+12],6,1700485571),n=v(n,r,t,e,i[o+3],10,-1894986606),e=v(e,n,r,t,i[o+10],15,-1051523),t=v(t,e,n,r,i[o+1],21,-2054922799),r=v(r,t,e,n,i[o+8],6,1873313359),n=v(n,r,t,e,i[o+15],10,-30611744),e=v(e,n,r,t,i[o+6],15,-1560198380),t=v(t,e,n,r,i[o+13],21,1309151649),r=v(r,t,e,n,i[o+4],6,-145523070),n=v(n,r,t,e,i[o+11],10,-1120210379),e=v(e,n,r,t,i[o+2],15,718787259),t=v(t,e,n,r,i[o+9],21,-343485551),r=r+U>>>0,t=t+k>>>0,e=e+q>>>0,n=n+E>>>0;}return l.endian([r,t,e,n])};c._ff=function(f,s,i,p,r,t,e){var n=f+(s&i|~s&p)+(r>>>0)+e;return (n<<t|n>>>32-t)+s},c._gg=function(f,s,i,p,r,t,e){var n=f+(s&p|i&~p)+(r>>>0)+e;return (n<<t|n>>>32-t)+s},c._hh=function(f,s,i,p,r,t,e){var n=f+(s^i^p)+(r>>>0)+e;return (n<<t|n>>>32-t)+s},c._ii=function(f,s,i,p,r,t,e){var n=f+(i^(s|~p))+(r>>>0)+e;return (n<<t|n>>>32-t)+s},c._blocksize=16,c._digestsize=16,x.exports=function(f,s){if(f==null)throw new Error("Illegal argument "+f);var i=l.wordsToBytes(c(f,s));return s&&s.asBytes?i:s&&s.asString?a.bytesToString(i):l.bytesToHex(i)};}()),x.exports}var L=$();const V=M(L),_=new X("BiliApis"),A=exports("A", {async getQueryWithWbi(l){const d=[46,47,18,2,53,8,23,32,15,50,10,31,58,3,45,35,27,43,5,49,33,9,42,19,29,28,14,39,12,38,41,13,37,48,7,16,24,55,40,61,26,17,0,1,60,51,30,4,22,25,54,21,56,59,6,63,57,62,11,36,20,34,44,52],u=s=>d.map(i=>s[i]).join("").slice(0,32),a=(s,i,p)=>{const r=u(i+p),t=Math.round(Date.now()/1e3),e=/[!'()*]/g;Object.assign(s,{wts:t});const n=Object.keys(s).sort().map(h=>{const g=s[h].toString().replace(e,"");return `${encodeURIComponent(h)}=${encodeURIComponent(g)}`}).join("&"),o=V(n+r);return n+"&w_rid="+o},c=async()=>{const i=await R$1.get("https://api.bilibili.com/x/web-interface/nav",{withCredentials:true}),{data:{wbi_img:{img_url:p,sub_url:r}}}=i.data;return {img_key:p.slice(p.lastIndexOf("/")+1,p.lastIndexOf(".")),sub_key:r.slice(r.lastIndexOf("/")+1,r.lastIndexOf("."))}};return (async()=>{const s=await c(),i=l,p=s.img_key,r=s.sub_key;return a(i,p,r)})()},getCurrentVideoID(l=location.href){const{pathname:d}=new URL(l),[,u]=d.match(/\/(video\/BV\w+|bangumi\/play\/ss\d+)/)||[];return (u==null?void 0:u.split("/").pop())||"error"},async getVideoInformation(l){const d=`https://api.bilibili.com/x/web-interface/view?bvid=${l}`,{data:u,data:{code:a}}=await R$1.get(d,{withCredentials:true});if(a===0)return u;a===-400?_.info("获取视频基本信息丨请求错误"):a===-403?_.info("获取视频基本信息丨权限不足"):a===-404?_.info("获取视频基本信息丨无视频"):a===62002?_.info("获取视频基本信息丨稿件不可见"):a===62004?_.info("获取视频基本信息丨稿件审核中"):a==="ERR_BAD_REQUEST"?_.info("获取视频基本信息丨请求失败"):_.warn("获取视频基本信息丨请求错误");},async getUserInformation(l){const d=`https://api.bilibili.com/x/web-interface/card?mid=${l}`,{data:u,data:{code:a}}=await R$1.get(d,{withCredentials:true});if(a===0)return u;a===-400?_.info("获取用户基本信息丨请求错误"):a===-403?_.info("获取用户基本信息丨权限不足"):a===-404?_.info("获取用户基本信息丨用户不存在"):a==="ERR_BAD_REQUEST"?_.info("获取用户基本信息丨请求失败"):_.warn("获取用户基本信息丨请求失败");},async isVip(){const l=this.getCookieByName("DedeUserID"),{data:{card:{vip:{status:d}}}}=await A.getUserInformation(l);d?ye.legacySet("is_vip",true):ye.legacySet("is_vip",false);},async getUserVideoList(l){const u=`https://api.bilibili.com/x/space/wbi/arc/search?${await A.getQueryWithWbi({mid:l})}`,{data:a,data:{code:c}}=await R$1.get(u,{withCredentials:true});if(c===0)return a;c===-400?_.info("获取用户投稿视频列表丨权限不足"):c===-412?_.info("获取用户投稿视频列表丨请求被拦截"):_.info("获取用户投稿视频列表丨请求失败");}});

		})
	};
}));

System.register("./dynamic.module-CkZsXyiy-t3LcGd30.js", ['./__monkey.entry-L6FtwPzP.js', './regexps-Cya52ERd-C0yF2jAD.js', './templates-BzjD1LcL-sDN0hXs-.js'], (function (exports, module) {
	'use strict';
	var pt, ds, ls, X, ye, us, j, B, Q, f, g;
	return {
		setters: [module => {
			pt = module.p;
			ds = module.d;
			ls = module.l;
			X = module.X;
			ye = module.y;
			us = module.u;
			j = module.j;
		}, module => {
			B = module.B;
			Q = module.Q;
		}, module => {
			f = module.f;
			g = module.g;
		}],
		execute: (function () {

			const i=new X("VideoModule"),S=new Q,b=exports("default", {name:"dynamic",version:"1.0.0",async install(){j.on("app:ready",async()=>{i.info("动态模块｜已加载"),await this.preFunctions();});},async preFunctions(){this.userConfigs=await ye.getAll("user"),this.registSettings(),us()&&(i.info("标签页｜已激活"),this.handleExecuteFunctionsSequentially());},async registSettings(){await S.init(this.userConfigs);},changeCurrentHrefToVideoSubmissions(){const t=this.userConfigs.dynamic_video_link,e=location.href;if(e==="https://t.bilibili.com/pages/nav/index"||B.dynamic.newIndexLink.test(e)||B.dynamic.indexVoteLink.test(e)||B.dynamic.webVoteLink.test(e)||B.dynamic.indexLotteryLink.test(e)||B.dynamic.webLotteryLink.test(e)||B.dynamic.moreDataLink.test(e)||B.dynamic.DetailLink.test(e)||B.dynamic.TopicDetailLink.test(e))return  false;e!==t?location.href=t:i.info("动态页｜已切换至投稿视频");},async insertSidebarButtons(){const t=["dynamicSidebar","DynamicSettingsPopover"],[e,s]=await f.batch(t),a=ds(g.dynamicSettingsOpenButton,e,"prepend");ls(a,"click",()=>{s.showPopover();});},handleExecuteFunctionsSequentially(){const t=[this.insertSidebarButtons,this.changeCurrentHrefToVideoSubmissions];pt(t);}});

		})
	};
}));

System.register("./regexps-Cya52ERd-C0yF2jAD.js", ['./__monkey.entry-L6FtwPzP.js', './templates-BzjD1LcL-sDN0hXs-.js'], (function (exports, module) {
	'use strict';
	var Lr, ps, ds, ls, ys, ye, g, f, h;
	return {
		setters: [module => {
			Lr = module.L;
			ps = module.a;
			ds = module.d;
			ls = module.l;
			ys = module.e;
			ye = module.y;
		}, module => {
			g = module.g;
			f = module.f;
			h = module.h;
		}],
		execute: (function () {

			class Q{constructor(){this.userConfigs={};}async init(t){this.userConfigs=t,this.pageType=Lr(),ps({BilibiliAdjustmentStyle:h.BilibiliAdjustment}),this.render(this.pageType);}render(t){switch(t){case "video":this.renderVideoSettings(),this.initVideoSettingsEventListeners();break;case "dynamic":this.renderDynamicSettings(),this.initDynamicSettingsEventListeners();break}}renderVideoSettings(){const t=g.replace("videoSettings",{IsVip:this.userConfigs.is_vip,AutoLocate:this.userConfigs.auto_locate,AutoLocateVideo:this.userConfigs.auto_locate_video,AutoLocateBangumi:this.userConfigs.auto_locate_bangumi,OffsetTop:this.userConfigs.offset_top,PlayerOffsetTop:this.userConfigs.player_offset_top,ClickPlayerAutoLocation:this.userConfigs.click_player_auto_location,SelectedPlayerModeClose:this.userConfigs.selected_player_mode==="close",SelectedPlayerModeWide:this.userConfigs.selected_player_mode==="wide",SelectedPlayerModeWeb:this.userConfigs.selected_player_mode==="web",WebfullUnlock:this.userConfigs.webfull_unlock,AutoSelectVideoHighestQuality:this.userConfigs.auto_select_video_highest_quality,ContainQuality4kStyle:this.userConfigs.is_vip?"flex":"none",ContainQuality4k:this.userConfigs.contain_quality_4k,ContainQuality8kStyle:this.userConfigs.is_vip?"flex":"none",ContainQuality8k:this.userConfigs.contain_quality_8k,InsertVideoDescriptionToComment:this.userConfigs.insert_video_description_to_comment,AutoSkip:this.userConfigs.auto_skip,PauseVideo:this.userConfigs.pause_video,ContinuePlayStyle:this.userConfigs.is_vip?"flex":"none",ContinuePlay:this.userConfigs.continue_play,AutoSubtitle:this.userConfigs.auto_subtitle,AutoReload:this.userConfigs.auto_reload});ds(t,document.body,"append");}async initVideoSettingsEventListeners(){const t=["app","VideoSettingsPopover","IsVip","AutoLocate","AutoLocateVideo","AutoLocateBangumi","ClickPlayerAutoLocation","WebfullUnlock","AutoSelectVideoHighestQuality","ContainQuality4k","ContainQuality8k","InsertVideoDescriptionToComment","AutoSkip","PauseVideo","ContinuePlay","AutoSubtitle","OffsetTop","Checkbox4K","Checkbox8K"],[i,l,a,d,g,p,y,h,f$1,m,b,C,S,k,_,v,L,A,V]=await f.batch(t);ls(l,"toggle",e=>{e.newState==="open"&&(i.style.pointerEvents="none"),e.newState==="closed"&&(i.style.pointerEvents="auto");}),ls([a,d,g,p,y,h,f$1,m,b,C,S,k,_,v],"change",async e=>{const o=ys(e.target.id);await ye.legacySet(o,e.target.checked),e.target.attributes.checked.value=await ye.legacyGet(o),e.target.id==="IsVip"&&(A.style.display=e.target.checked?"flex":"none",V.style.display=e.target.checked?"flex":"none"),e.target.id==="OffsetTop"&&await ye.legacySet(o,e.target.value);}),ls(L,"change",async e=>{await ye.legacySet("offset_top",e.target.value);}),f.each("SelectPlayerModeButtons",e=>{ls(e,"click",async o=>{await ye.legacySet("selected_player_mode",o.target.value);});});}renderDynamicSettings(){const t=g.replace("dynamicSettings",{DynamicVideoLink:this.userConfigs.dynamic_video_link});ds(t,document.body,"append");}async initDynamicSettingsEventListeners(){const t=["app","DynamicSettingsPopover"],[i,l]=await f.batch(t);ls(l,"toggle",a=>{a.newState==="open"&&(i.style.pointerEvents="none"),a.newState==="closed"&&(i.style.pointerEvents="auto");});}} exports("Q", Q);const B=exports("B", {video:{nbspToBlank:/&nbsp;/gi,timeString:/\b(?:[0-9]|1\d|2[0-3]):[0-5]\d(?::[0-5]\d)?\b/g,url:new RegExp('(?<!((href|url)="))(http|https|ftp):\\/\\/[\\w-]+(\\.[\\w-]+)*([\\w\\-.,@?^=%&:/~+#;]*[\\w\\-@?^=%&/~+#;])?',"g"),videoId:new RegExp("(?<!(>|\\/))\\bBV(?:1[1-9a-km-zA-Z]|2[0-9a-zA-Z])[0-9a-zA-Z]{8}\\b(?!<)","g"),readId:/\bcv\d{7}\b/g,blankLine:/^\s*$(?:\r?\n?)/gm,specialBlank:/(%09)+/g},dynamic:{newIndexLink:/(https:\/\/t.bilibili.com\/pages\/nav\/index_new).*/i,indexVoteLink:/https:\/\/t.bilibili.com\/vote\/h5\/index\/#\/result\?vote_id=.*/i,webVoteLink:/t.bilibili.com\/h5\/dynamic\/vote#\/result\?vote_id=.*/i,indexLotteryLink:/https:\/\/t.bilibili.com\/lottery\/h5\/index\/.*/i,webLotteryLink:/https:\/\/t.bilibili.com\/lottery\/.*/i,moreDataLink:/https:\/\/t.bilibili.com\/[0-9]+\?tab=[0-9]+/i,DetailLink:/https:\/\/t.bilibili.com\/[0-9]+/i,TopicDetailLink:/https:\/\/t.bilibili.com\/topic\/[0-9]+/i}});

		})
	};
}));

System.register("./templates-BzjD1LcL-sDN0hXs-.js", [], (function (exports, module) {
    'use strict';
    return {
        execute: (function () {

            const s=new Map,l={app:"#app",header:"#biliMainHeader",headerMini:"#biliMainHeader .bili-header .mini-header",player:"#bilibili-player",playerWrap:"#playerWrap",playerWebscreen:"#bilibili-player.mode-webscreen",playerContainer:"#bilibili-player .bpx-player-container",playerController:"#bilibili-player .bpx-player-ctrl-btn",playerControllerBottomRight:".bpx-player-control-bottom-right",playerTooltipArea:".bpx-player-tooltip-area",playerTooltipTitle:".bpx-player-tooltip-title",playerDanmuSetting:".bpx-player-dm-setting",playerEndingRelateVideo:".bpx-player-ending-related-item",volumeButton:".bpx-player-ctrl-volume-icon",mutedButton:".bpx-player-ctrl-muted-icon",video:"#bilibili-player video",videoWrap:"#bilibili-player .bpx-player-video-wrap",videoBwp:"bwp-video",videoTitleArea:"#viewbox_report",videoFloatNav:".fixed-sidenav-storage",videoComment:"#commentapp",videoCommentRoot:"#commentapp > bili-comments",videoCommentReplyList:"#comment .reply-list",videoRootReplyContainer:"#comment .root-reply-container",videoTime:'a[data-type="seek"]',videoDescription:"#v_desc",videoDescriptionInfo:"#v_desc .basic-desc-info",videoDescriptionText:"#v_desc .desc-info-text",adjustmentCommentDescription:"#adjustment-comment-description",videoNextPlayAndRecommendLink:".video-page-card-small .card-box",videoSectionsEpisodeLink:".video-pod__list .video-pod__item",videoEpisodeListMultiMenuItem:".bpx-player-ctrl-eplist-multi-menu-item",videoMultiPageLink:"#multi_page ul li",videoPreviousButton:".bpx-player-ctrl-btn.bpx-player-ctrl-prev",videoNextButton:".bpx-player-ctrl-btn.bpx-player-ctrl-next",bangumiApp:"#__next",bangumiComment:"#comment_module",bangumiFloatNav:'#__next div[class*="navTools_floatNavExp"] div[class*="navTools_navMenu"]',bangumiMainContainer:".main-container",bangumiSectionsEpisodeLink:'#__next div[class*="numberList_wrapper"] div[class*="numberListItem_number_list_item"] ',qualitySwitchButtons:".bpx-player-ctrl-quality-menu-item",playerModeWideEnterButton:".bpx-player-ctrl-wide-enter",playerModeWideLeaveButton:".bpx-player-ctrl-wide-leave",playerModeWebEnterButton:".bpx-player-ctrl-web-enter",playerModeWebLeaveButton:".bpx-player-ctrl-web-leave",playerModeFullControlButton:".bpx-player-ctrl-full",danmukuBox:"#danmukuBox",danmuShowHideTip:'div[aria-label="弹幕显示隐藏"]',membersContainer:".members-info-container",membersUpAvatarFace:".membersinfo-upcard:first-child picture img",upAvatarFace:".up-info-container .up-avatar-wrap .bili-avatar .bili-avatar-face",upAvatarDecoration:".up-info-container .up-avatar-wrap .bili-avatar .bili-avatar-pendent-dom .bili-avatar-img",upAvatarIcon:".up-info-container .up-avatar-wrap .bili-avatar .bili-avatar-icon",setSkipTimeNodesPopover:"#setSkipTimeNodesPopover",setSkipTimeNodesPopoverToggleButton:"#setSkipTimeNodesPopoverToggleButton",setSkipTimeNodesPopoverHeaderExtra:"#setSkipTimeNodesPopover .header .extra",setSkipTimeNodesPopoverTips:"#setSkipTimeNodesPopover .tips",setSkipTimeNodesPopoverTipsDetail:"#setSkipTimeNodesPopover .tips .detail",setSkipTimeNodesPopoverTipsContents:"#setSkipTimeNodesPopover .tips .contents",setSkipTimeNodesPopoverRecords:"#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .records",setSkipTimeNodesPopoverClouds:"#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .clouds",setSkipTimeNodesPopoverResult:"#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .result",setSkipTimeNodesInput:"#setSkipTimeNodesInput",skipTimeNodesRecordsArray:"#skipTimeNodesRecordsArray",skipTimeNodesCloudsArray:"#skipTimeNodesCloudsArray",clearRecordsButton:"#clearRecordsButton",saveRecordsButton:"#saveRecordsButton",uploadSkipTimeNodesButton:"#uploadSkipTimeNodesButton",syncSkipTimeNodesButton:"#syncSkipTimeNodesButton",indexApp:"#i_cecream",indexRecommendVideo:'.recommended-container_floor-aside .feed-card:nth-child(-n+11):not(:has([class*="-ad"]))',indexRecommendVideoRollButtonWrapper:".recommended-container_floor-aside .feed-roll-btn",indexRecommendVideoHistoryPopoverTitle:"#indexRecommendVideoHistoryPopoverTitle",indexRecommendVideoHistoryPopoverTitleCount:"#indexRecommendVideoHistoryPopoverTitle span",indexRecommendVideoRollButton:".recommended-container_floor-aside .feed-roll-btn button.roll-btn",indexRecommendVideoHistoryOpenButton:"#indexRecommendVideoHistoryOpenButton",indexRecommendVideoHistoryPopover:"#indexRecommendVideoHistoryPopover",indexRecommendVideoHistoryCategory:"#indexRecommendVideoHistoryCategory",indexRecommendVideoHistoryCategoryV2:"#indexRecommendVideoHistoryCategoryV2",indexRecommendVideoHistoryCategoryButtons:"#indexRecommendVideoHistoryCategory li,#indexRecommendVideoHistoryCategoryV2 li",indexRecommendVideoHistoryCategoryButtonsExceptAll:"#indexRecommendVideoHistoryCategory li:not(.all)",indexRecommendVideoHistoryCategoryButtonAll:"#indexRecommendVideoHistoryCategory li.all,#indexRecommendVideoHistoryCategoryV2 li.all_v2",indexRecommendVideoHistoryList:"#indexRecommendVideoHistoryList",indexRecommendVideoHistoryListItem:"#indexRecommendVideoHistoryList li",clearRecommendVideoHistoryButton:"#clearRecommendVideoHistoryButton",notChargeHighLevelCover:".not-charge-high-level-cover",switchSubtitleButton:".bpx-player-ctrl-btn.bpx-player-ctrl-subtitle",dynamicSidebar:".bili-dyn-sidebar",DynamicSettingsPopover:"#DynamicSettingsPopover",DynamicSettingSaveButton:"#DynamicSettingSaveButton",DynamicSettingsPopoverTips:"#DynamicSettingsPopoverTips",DynamicHeaderContainer:"#bili-header-container",VideoSettingsPopover:"#VideoSettingsPopover",VideoSettingsSaveButton:"#VideoSettingsSaveButton",AutoSkipSwitchInput:"#AutoSkipSwitch",AutoEnableSubtitleSwitchInput:"#AutoEnableSubtitle",WebVideoLinkInput:"#WebVideoLink",IsVip:"#IsVip",AutoLocate:"#AutoLocate",AutoLocateVideo:"#AutoLocateVideo",AutoLocateBangumi:"#AutoLocateBangumi",OffsetTop:"#OffsetTop",ClickPlayerAutoLocation:"#ClickPlayerAutoLocation",AutoSelectVideoHighestQuality:"#AutoSelectVideoHighestQuality",ContainQuality4k:"#ContainQuality4k",ContainQuality8k:"#ContainQuality8k",Checkbox4K:"#Checkbox4K",Checkbox8K:"#Checkbox8K",FourKAndEightK:".fourK,.eightK",SelectPlayerModeButtons:'input[name="PlayerMode"]',WebfullUnlock:"#WebfullUnlock",AutoReload:"#AutoReload",AutoSkip:"#AutoSkip",InsertVideoDescriptionToComment:"#InsertVideoDescriptionToComment",PauseVideo:"#PauseVideo",ContinuePlay:"#ContinuePlay",AutoSubtitle:"#AutoSubtitle",BilibiliAdjustmentStyle:"#BilibiliAdjustmentStyle",VideoPageAdjustmentStyle:"#VideoPageAdjustmentStyle",FreezeHeaderAndVideoTitleStyle:"#FreezeHeaderAndVideoTitleStyle",UnlockEpisodeSelectorStyle:"#UnlockEpisodeSelectorStyle",UnlockWebPlayerStyle:"#UnlockWebPlayerStyle",ResetPlayerLayoutStyle:"#ResetPlayerLayoutStyle",VideoSettingsStyle:"#VideoSettingsStyle",IndexAdjustmentStyle:"#IndexAdjustmentStyle",DynamicSettingStyle:"#DynamicSettingStyle",BodyOverflowHiddenStyle:"#BodyOverflowHiddenStyle"},x={descriptionRenderer:"#feed > bili-adjustment-comment-thread-renderer",descriptionVideoTime:'#feed > #bili-adjustment-contents > [data-type="seek"]',videoTime:'#comment >> bili-rich-text >> #contents > a[data-type="seek"]',replyVideoTime:'bili-comment-replies-renderer >> bili-comment-reply-renderer >> bili-rich-text >> #contents > a[data-type="seek"]',commentRenderderContainer:"#feed",commentRenderder:"bili-comment-renderer",commentRepliesRenderer:"bili-comment-replies-renderer",replyPublicDate:"#footer > bili-comment-action-buttons-renderer >> #pubdate"},p=async(o,e=false)=>{const t=`${o}|${e}`;if(s.has(t)){const i=s.get(t),r=Array.isArray(i.element)?i.element:[i.element];if(r.every(d=>{var c;return (d==null?void 0:d.isConnected)&&((c=d.matches)==null?void 0:c.call(d,o))}))return e?r:r[0];s.delete(t);}const a=e?"querySelectorAll":"querySelector",m=()=>{const i=document[a](o);return i&&!e&&i!==null||e&&(i==null?void 0:i.length)>0?i:new Promise(r=>{const d=new MutationObserver(()=>{const c=document[a](o);(e&&c.length>0||!e&&c)&&(d.disconnect(),r(c));});d.observe(document,{childList:true,subtree:true}),setTimeout(()=>{d.disconnect(),r(e?[]:null);},1e4);})};let n=document[a](o)||await m();return e&&!(n instanceof NodeList)&&(n=n?[n]:[]),s.set(t,{element:e?[...n]:n,observer:new MutationObserver(()=>s.delete(t))}),n&&!e&&n.parentElement&&s.get(t).observer.observe(n.parentElement,{childList:true}),e?[...n]:n},u=async(o,e)=>{const t=l[o];(await p(t,true)).forEach(e);},f=new Proxy(l,{get(o,e){return e==="batch"?async t=>{const a=t.map(i=>o[i]).join(", "),m=await p(a,true),n=new Map;return m.forEach(i=>{t.forEach(r=>{i.matches(o[r])&&n.set(r,i);});}),t.map(i=>n.get(i))}:e==="all"?t=>p(t,true):e==="value"?t=>l[t]:e==="query"?t=>document.querySelector(l[t]):e==="queryAll"?t=>document.querySelectorAll(l[t]):e==="each"?u:p(o[e])}}); exports({ x, f });window.addEventListener("unload",()=>{s.forEach(o=>o.observer.disconnect());});const h={BilibiliAdjustment:'::-webkit-scrollbar{width:6px!important;height:6px!important}::-webkit-scrollbar-track-piece{border-radius:0!important;background-color:#212121!important}::-webkit-scrollbar-thumb:vertical{height:5px!important;border-radius:6px!important;background-color:#00a1d6!important}::-webkit-scrollbar-thumb:horizontal{width:5px!important;border-radius:6px!important;background-color:#00a1d6!important}::-webkit-scrollbar-corner{border-radius:0!important;background-color:#141414!important}.adjustment-popover{position:fixed;top:50%;left:50%;box-sizing:border-box;margin:0;padding:15px;width:400px;max-height:70vh;border:0;border-radius:6px;font-size:1em;transform:translate(-50%,-50%);overscroll-behavior:contain;background:#212121;overflow-y:auto;color:#868686;border:1px solid #424242}.adjustment-popover::backdrop{backdrop-filter:blur(3px)}.adjustment-popover-title{margin-bottom:15px;text-align:center;font-weight:700;font-size:22px}.adjustment-popover-title .subTitle{font-size:14px}.recommend{padding:3px;border:1px solid #424242;border-radius:6px;box-sizing:border-box;text-align:center;margin-bottom:15px;font-size:14px}.recommend a{color:#00a1d6;text-decoration:none}.adjustment-buttonGroup{display:flex;margin-top:10px;align-items:center;justify-content:end;gap:10px}.adjustment-button{display:inline-block;box-sizing:border-box;margin:0;padding:10px 20px;outline:0;border:1px solid #424242;border-radius:4px;background:#fff;color:#606266;text-align:center;white-space:nowrap;font-weight:500;font-size:14px;line-height:1;cursor:pointer;transition:.1s;-webkit-appearance:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.adjustment-button.plain:disabled,.adjustment-button.plain:disabled:active,.adjustment-button.plain:disabled:focus,.adjustment-button.plain:disabled:hover,.adjustment-button:disabled,.adjustment-button:disabled:active,.adjustment-button:disabled:focus,.adjustment-button:disabled:hover{border-color:#ebeef5;background-color:#fff;background-image:none;color:#c0c4cc;cursor:not-allowed}.adjustment-button.primary{border-color:#00a1d6;background-color:#00a1d6;color:#fff}.adjustment-button.success{border-color:#67c23a;background-color:#67c23a;color:#fff}.adjustment-button.info{border-color:#909399;background-color:#909399;color:#fff}.adjustment-button.warning{border-color:#e6a23c;background-color:#e6a23c;color:#fff}.adjustment-button.danger{border-color:#f56c6c;background-color:#f56c6c;color:#fff}.adjustment-button.primary:focus,.adjustment-button.primary:hover{border-color:#66b1ff;background:#66b1ff;color:#fff}.adjustment-button.success:focus,.adjustment-button.success:hover{border-color:#85ce61;background:#85ce61;color:#fff}.adjustment-button.info:focus,.adjustment-button.info:hover{border-color:#a6a9ad;background:#a6a9ad;color:#fff}.adjustment-button.warning:focus,.adjustment-button.warning:hover{border-color:#ebb563;background:#ebb563;color:#fff}.adjustment-button.danger:focus,.adjustment-button.danger:hover{border-color:#f78989;background:#f78989;color:#fff}.adjustment-button.primary.plain{border-color:#b3d8ff;background:#ecf5ff;color:#409eff}.adjustment-button.success.plain{border-color:#c2e7b0;background:#f0f9eb;color:#67c23a}.adjustment-button.info.plain{border-color:#a6a9ad;background:#a6a9ad;color:#fff}.adjustment-button.warning.plain{border-color:#f5dab1;background:#fdf6ec;color:#e6a23c}.adjustment-button.danger.plain{border-color:#fbc4c4;background:#fef0f0;color:#f56c6c}.adjustment-button.primary.plain:focus,.adjustment-button.primary.plain:hover{border-color:#409eff;background:#409eff;color:#fff}.adjustment-button.success.plain:focus,.adjustment-button.success.plain:hover{border-color:#67c23a;background-color:#67c23a;color:#fff}.adjustment-button.info.plain:focus,.adjustment-button.info.plain:hover{border-color:#909399;background-color:#909399;color:#fff}.adjustment-button.warning.plain:focus,.adjustment-button.warning.plain:hover{border-color:#e6a23c;background-color:#e6a23c;color:#fff}.adjustment-button.danger.plain:focus,.adjustment-button.danger.plain:hover{border-color:#f56c6c;background-color:#f56c6c;color:#fff}.adjustment-button.primary:disabled,.adjustment-button.primary:disabled:active,.adjustment-button.primary:disabled:focus,.adjustment-button.primary:disabled:hover{border-color:#a0cfff;background-color:#a0cfff;color:#fff}.adjustment-button.success:disabled,.adjustment-button.success:disabled:active,.adjustment-button.success:disabled:focus,.adjustment-button.success:disabled:hover{border-color:#b3e19d;background-color:#b3e19d;color:#fff}.adjustment-button.info:disabled,.adjustment-button.info:disabled:active,.adjustment-button.info:disabled:focus,.adjustment-button.info:disabled:hover{border-color:#c8c9cc;background-color:#c8c9cc;color:#fff}.adjustment-button.warning:disabled,.adjustment-button.warning:disabled:active,.adjustment-button.warning:disabled:focus,.adjustment-button.warning:disabled:hover{border-color:#f3d19e;background-color:#f3d19e;color:#fff}.adjustment-button.danger:disabled,.adjustment-button.danger:disabled:active,.adjustment-button.danger:disabled:focus,.adjustment-button.danger:disabled:hover{border-color:#fab6b6;background-color:#fab6b6;color:#fff}.adjustment-button.primary.plain:disabled,.adjustment-button.primary.plain:disabled:active,.adjustment-button.primary.plain:disabled:focus,.adjustment-button.primary.plain:disabled:hover{border-color:#d9ecff;background-color:#ecf5ff;color:#8cc5ff}.adjustment-button.success.plain:disabled,.adjustment-button.success.plain:disabled:active,.adjustment-button.success.plain:disabled:focus,.adjustment-button.success.plain:disabled:hover{border-color:#e1f3d8;background-color:#f0f9eb;color:#a4da89}.adjustment-button.info.plain:disabled,.adjustment-button.info.plain:disabled:active,.adjustment-button.info.plain:disabled:focus,.adjustment-button.info.plain:disabled:hover{border-color:#e9e9eb;background-color:#f4f4f5;color:#bcbec2}.adjustment-button.warning.plain:disabled,.adjustment-button.warning.plain:disabled:active,.adjustment-button.warning.plain:disabled:focus,.adjustment-button.warning.plain:disabled:hover{border-color:#faecd8;background-color:#fdf6ec;color:#f0c78a}.adjustment-button.danger.plain:disabled,.adjustment-button.danger.plain:disabled:active,.adjustment-button.danger.plain:disabled:focus,.adjustment-button.danger.plain:disabled:hover{border-color:#fde2e2;background-color:#fef0f0;color:#f9a7a7}.adjustment-tips{display:inline-block;box-sizing:border-box;padding:3px 5px;height:fit-content;border:1px solid #d9ecff;border-radius:4px;background-color:#272727;color:#409eff;font-size:14px;line-height:1.5}.adjustment-tips.info{border-color:#424242;background-color:#272727;color:#868686}.adjustment-tips.success{border-color:#e1f3d8;background-color:#f0f9eb;color:#67c23a}.adjustment-tips.warning{border-color:#faecd8;background-color:#fdf6ec;color:#e6a23c}.adjustment-tips.danger{border-color:#fde2e2;background-color:#fef0f0;color:#f56c6c}.adjustment-form,.adjustment-form-item{display:flex;flex-direction:column}.adjustment-form{gap:15px}.adjustment-form-item{gap:15px;background:#2c2c2c;padding:15px;border-radius:6px}.adjustment-checkbox,.adjustment-form-item-content{display:flex;align-items:center;justify-content:space-between}.adjustment-checkbox-btn .btn-bg,.adjustment-checkbox-btn .knob{position:absolute;top:0;right:0;bottom:0;left:0}.adjustment-checkbox-btn,.adjustment-radio-btn{position:relative;top:50%;width:54px;height:26px;overflow:hidden}.adjustment-checkbox-btn.btn-pill,.adjustment-checkbox-btn.btn-pill>.btn-bg{border-radius:100px}.adjustment-checkbox .radio,.adjustment-checkbox-btn .checkbox{position:relative;width:100%;height:100%;padding:0;margin:0;opacity:0;cursor:pointer;z-index:3}.adjustment-checkbox-btn .knob{z-index:2}.adjustment-checkbox-btn .checkbox[checked=false]+.knob::before,.adjustment-checkbox-btn .knob::before{content:"";position:absolute;top:3px;left:3px;width:9px;height:4px;color:#fff;font-size:10px;font-weight:700;text-align:center;line-height:1;padding:8px 6px;background-color:#f44336;border-radius:50%;transition:.3s cubic-bezier(.18,.89,.35,1.15) all}.adjustment-checkbox-btn .btn-bg,.adjustment-checkbox-btn .checkbox[checked=false]~.btn-bg{width:100%;background-color:#fcebeb;transition:.3s ease all;z-index:1}.adjustment-checkbox-btn .checkbox[checked=true]+.knob::before,.adjustment-checkbox-btn .checkbox[checked]:not([checked=false])+.knob::before{content:"";left:30px;background-color:#00a1d6}.adjustment-checkbox-btn .checkbox[checked=true]~.btn-bg,.adjustment-checkbox-btn .checkbox[checked]:not([checked=false])~.btn-bg{background-color:#ebf7fc}.adjustment-checkbox-btn .btn-bg,.adjustment-checkbox-btn .knob,.adjustment-checkbox-btn .knob::before{transition:.3s ease all}.adjustment-radio-btn{gap:15px;width:66px;overflow:auto;height:26px;display:flex;align-items:center;justify-content:flex-start}.adjustment-radio-btn .radio{width:auto;height:auto}.adjustment-radio-btn .circle{position:absolute;top:0;right:0;bottom:0;left:0;z-index:2}.adjustment-radio-btn .radio+.circle::before{content:"";position:absolute;top:7px;left:5px;width:8px;height:8px;border-radius:50%;background:#424242;border:3px solid #272727;outline:2px solid #424242}.adjustment-radio-btn .radio:checked+.circle::before{background-color:#00a1d6;border-color:#ebf7fc;outline-color:#00a1d6}.adjustment-form-item label{font-size:18px}.adjustment-checkboxGroup{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:10px}.adjustment-checkboxGroup span{color:#666}.adjustment-checkbox{width:100%;font-size:16px;gap:3px}.adjustment-input{display:inline-flex;padding:1px 11px;outline:0;border:1px solid #424242;border-radius:6px;background:#272727;line-height:32px;cursor:text;align-items:center;justify-content:center;color:#868686;width:100%;box-sizing:border-box}',IndexAdjustment:'#indexRecommendVideoHistoryOpenButton{margin-top:10px}#indexRecommendVideoHistoryPopover{width:fit-content;border:1px solid #424242;outline:0;background:#2c2c2c;border-radius:4px;color:#868686;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:15px;max-height:777px;overflow:hidden}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryPopoverTitle{display:flex;box-sizing:border-box;padding-bottom:15px;border-bottom:1px solid #424242;font-weight:700;font-size:22px;align-items:center;justify-content:space-between}#indexRecommendVideoHistoryPopover ul{display:flex;flex-direction:column;align-items:center}#indexRecommendVideohistoryContents{display:flex;gap:10px}#indexRecommendVideohistoryCategories{width:440px;border-right:1px solid #424242;padding-right:10px;max-height:700px;overflow:auto;overscroll-behavior:contain}#indexRecommendVideohistoryCategories hr{height:1px;background:#424242;border:none;position:relative}#indexRecommendVideohistoryCategories hr:before{width:fit-content;content:"以下是 V2 版本分区";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#868686;background:#2c2c2c;display:block;text-align:center;padding:0 5px;font-size:12px}ul#indexRecommendVideoHistoryCategory,ul#indexRecommendVideoHistoryCategoryV2{display:grid;margin:10px 0 0;padding:0 0 10px 0;border-bottom:1px solid #424242!important;gap:5px;grid-template-columns:repeat(3,1fr);align-items:center;justify-content:center}ul#indexRecommendVideoHistoryCategory{border:none!important;margin:10px 0 15px;padding:0}ul#indexRecommendVideoHistoryCategoryV2{margin-top:15px;padding-bottom:10px}ul#indexRecommendVideoHistoryCategory li,ul#indexRecommendVideoHistoryCategoryV2 li{padding:5px 0!important;border:1px solid;border-radius:6px;justify-content:center;text-wrap-mode:nowrap}ul#indexRecommendVideoHistoryCategory li:hover,ul#indexRecommendVideoHistoryCategoryV2 li:hover{cursor:pointer;color:#00a1d6;border-color:#00a1d6!important}ul#indexRecommendVideoHistoryCategory li:hover,ul#indexRecommendVideoHistoryCategoryV2 li:hover{cursor:pointer;color:#00a1d6;border-color:#00a1d6}ul#indexRecommendVideoHistoryCategory li.active,ul#indexRecommendVideoHistoryCategoryV2 li.active{cursor:pointer;color:#fff;background:#00a1d6;border-color:#00a1d6!important}#indexRecommendVideoHistoryPopover ul li{display:flex;align-items:center;padding:7px 0;width:100%;border:1px solid #424242!important;line-height:24px}#indexRecommendVideoHistoryList{width:500px;max-height:700px;overflow:auto;overscroll-behavior:contain}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li{border-width:0 0 1px!important}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li span{display:flex;width:32px;height:24px;margin-right:5px;border-radius:4px;overflow:hidden}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li span img{width:100%;height:24px;object-fit:inherit}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li a{width:fit-content;color:#868686!important}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li:hover a{color:#00a1d6!important}#clearRecommendVideoHistoryButton{position:sticky;display:flex;padding:10px;width:80px;border-radius:6px;background:#00a1d6;color:#fff;font-size:15px;line-height:16px;cursor:pointer;align-items:center;justify-content:center}',VideoPageAdjustment:'.bpx-player-container[data-screen=full] #goToComments{opacity:.6;cursor:not-allowed;pointer-events:none}#comment-description .user-name{display:flex;padding:0 5px;height:22px;border:1px solid;border-radius:4px;align-items:center;justify-content:center}.bpx-player-ctrl-skip{border:none!important;background:0 0!important}.bpx-player-container[data-screen=full] #setSkipTimeNodesPopoverToggleButton,.bpx-player-container[data-screen=web] #setSkipTimeNodesPopoverToggleButton{height:32px!important;line-height:32px!important}#setSkipTimeNodesPopover{top:50%!important;left:50%!important;box-sizing:border-box!important;padding:15px!important;max-width:456px!important;border:0!important;border-radius:6px!important;font-size:14px!important;transform:translate(-50%,-50%)!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper{display:flex!important;flex-direction:column!important;gap:7px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper button{display:flex!important;width:100%;height:34px!important;border-style:solid!important;border-width:1px!important;border-radius:6px!important;text-align:center!important;line-height:34px!important;cursor:pointer;align-items:center!important;justify-content:center!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper button:disabled{cursor:not-allowed}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .header{display:flex!important;font-weight:700!important;align-items:center!important;justify-content:space-between!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .header .title{font-weight:700!important;font-size:16px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .header .extra{font-size:12px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .header .extra,#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .result{padding:2px 5px!important;border:1px solid #d9ecff!important;border-radius:6px!important;background-color:#ecf5ff!important;color:#409eff!important;font-weight:400!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .success{display:flex!important;padding:2px 5px!important;border-color:#e1f3d8!important;background-color:#f0f9eb!important;color:#67c23a!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .danger{display:flex!important;padding:2px 5px!important;border-color:#fde2e2!important;background-color:#fef0f0!important;color:#f56c6c!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .handles{display:flex!important;align-items:center!important;justify-content:space-between!important;gap:7px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips{position:relative!important;overflow:hidden;box-sizing:border-box!important;padding:7px!important;border-color:#e9e9eb!important;border-radius:6px!important;background-color:#f4f4f5!important;color:#909399!important;font-size:13px!important;transition:height .3s!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips.open{height:134px!important;line-height:20px!important;}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips.close{height:34px!important;line-height:22px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips .detail{position:absolute!important;top:9px!important;right:7px!important;display:flex!important;cursor:pointer!important;transition:transform .3s!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips .detail.open{transform:rotate(0)}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips .detail.close{transform:rotate(180deg)}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .records{display:none;flex-direction:column!important;gap:7px}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .records .recordsButtonsGroup{display:flex!important;align-items:center!important;justify-content:space-between!important;gap:7px!important}#clearRecordsButton{border-color:#d3d4d6!important;background:#f4f4f5!important;color:#909399!important}#clearRecordsButton:disabled{border-color:#e9e9eb!important;background-color:#f4f4f5!important;color:#bcbec2!important}#saveRecordsButton{border-color:#c2e7b0!important;background:#f0f9eb!important;color:#67c23a!important}#saveRecordsButton:disabled{border-color:#e1f3d8!important;background-color:#f0f9eb!important;color:#a4da89!important}#setSkipTimeNodesInput{box-sizing:border-box!important;padding:5px!important;width:calc(100% - 39px)!important;height:34px!important;border:1px solid #cecece!important;border-radius:6px!important;line-height:34px!important}#uploadSkipTimeNodesButton,#syncSkipTimeNodesButton{width:52px!important;height:34px!important;border:none!important;background:#00a1d6!important;color:#fff!important}#uploadSkipTimeNodesButton:hover{background:#00b5e5!important}#skipTimeNodesRecordsArray{display:flex!important;padding:2px 5px!important;border-radius:6px!important}#bilibili-player .bpx-player-video-wrap{position:relative}#bilibili-player .bpx-player-video-wrap::before{position:absolute;display:block;background:var(--video-cover) top left no-repeat;background-size:cover;content:"";inset:0}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .records{display:none}.bili-adjustment-icon{width: 40px!important;display:flex!important;align-items:center!important;justify-content:center!important}.bili-adjustment-icon svg{margin-bottom:3px!important}',BodyOverflowHidden:"body{overflow:hidden!important}",ResetPlayerLayout:"body{padding-top:0;position:auto}#playerWrap{display:block}#bilibili-player{height:auto;position:relative}.bpx-player-mini-warp{display:none}",UnlockWebPlayer:"body.webscreen-fix{padding-top:BODYHEIGHT;position:unset}#bilibili-player.mode-webscreen{height:BODYHEIGHT;position:absolute}#playerWrap{display:none}#danmukuBox{margin-top:0}",VideoSettings:"#VideoSettingsPopover{width:550px;max-height:90vh}#OffsetTop{width:100px}.player-mod .adjustment-checkboxGroup{flex-direction:row}.player-mod .adjustment-checkboxGroup .adjustment-checkbox:last-child .adjustment-radio-btn{width:98px}",UnlockEpisodeSelector:".bpx-player-control-bottom-right .bpx-player-ctrl-btn.bpx-player-ctrl-eplist{visibility:visible!important;width:36px!important}.bpx-player-ctrl-eplist-menu-wrap{min-height:auto!important;height:fit-content;overscroll-behavior:contain}",videoCommentDescription:"#bili-adjustment-body{position:relative;padding-left:80px;padding-top:22px}#bili-adjustment-user-avatar{position:absolute;left:20px;top:22px;width:48px;height:48px;transform-origin:left top;transform:scale(1)}#bili-adjustment-avatar-picture{width:48px;height:48px;opacity:1;border-radius:50%;border:2px solid #00a1d6}#bili-adjustment-info{display:inline-flex;align-items:center}#bili-adjustment-user-name{font-size:13px;font-weight:500}#bili-adjustment-user-name a{color:#00a1d6;text-decoration:none}#bili-adjustment-user-badge{background:#0491bf;border-radius:3px;color:#fff;padding:2px 3px;margin-left:5px;font-size:10px}#bili-adjustment-content{font-size:15px;line-height:24px}#bili-adjustment-contents{margin-block-start:0;margin-block-end:0;margin-inline-start:0;margin-inline-end:0;display:inline;white-space:pre-line;word-break:break-word;-webkit-font-smoothing:antialiased}#bili-adjustment-contents a{color:#00a1d6;text-decoration:none;background-color:transparent;cursor:pointer}#bili-adjustment-spread-line{padding-bottom:14px;margin-left:80px;border-bottom:1px solid var(--graph_bg_thick)}"},b={videoLocateButton:'<div class="fixed-sidenav-storage-item bili-adjustment-icon locate" title="定位至播放器" [[DATAV]]><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="currentColor" d="M432 512a80 80 0 1 0 160 0 80 80 0 1 0-160 0z"/><path fill="currentColor" d="M960 480h-33.632C910.752 276.16 747.84 113.248 544 97.632V64a32 32 0 1 0-64 0v33.632C276.16 113.248 113.248 276.16 97.632 480H64a32 32 0 0 0 0 64h33.632C113.248 747.84 276.16 910.752 480 926.368V960a32 32 0 1 0 64 0v-33.632C747.84 910.752 910.752 747.84 926.368 544H960a32 32 0 1 0 0-64zM544 862.368V800a32 32 0 1 0-64 0v62.368C311.424 847.104 176.896 712.576 161.632 544H224a32 32 0 1 0 0-64h-62.368C176.896 311.424 311.424 176.896 480 161.632V224a32 32 0 0 0 64 0v-62.368C712.576 176.928 847.104 311.424 862.368 480H800a32 32 0 1 0 0 64h62.368C847.104 712.576 712.576 847.104 544 862.368z"/></svg>定位</div>',bangumiLocateButton:'<div class="[[FLOATNAVMENUITEMCLASS]] bili-adjustment-icon locate" style="height:40px;padding:0" title="定位至播放器"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="currentColor" d="M432 512a80 80 0 1 0 160 0 80 80 0 1 0-160 0z"/><path fill="currentColor" d="M960 480h-33.632C910.752 276.16 747.84 113.248 544 97.632V64a32 32 0 1 0-64 0v33.632C276.16 113.248 113.248 276.16 97.632 480H64a32 32 0 0 0 0 64h33.632C113.248 747.84 276.16 910.752 480 926.368V960a32 32 0 1 0 64 0v-33.632C747.84 910.752 910.752 747.84 926.368 544H960a32 32 0 1 0 0-64zM544 862.368V800a32 32 0 1 0-64 0v62.368C311.424 847.104 176.896 712.576 161.632 544H224a32 32 0 1 0 0-64h-62.368C176.896 311.424 311.424 176.896 480 161.632V224a32 32 0 0 0 64 0v-62.368C712.576 176.928 847.104 311.424 862.368 480H800a32 32 0 1 0 0 64h62.368C847.104 712.576 712.576 847.104 544 862.368z"/></svg></div>',locateToCommentBtn:'<div class="bpx-player-ctrl-btn bpx-player-ctrl-comment" role="button" aria-label="前往评论" tabindex="0"><div id="goToComments" class="bpx-player-ctrl-btn-icon"><span class="bpx-common-svg-icon"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="88" height="88" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px);"><path d="M512 85.333c235.637 0 426.667 191.03 426.667 426.667S747.637 938.667 512 938.667a424.779 424.779 0 0 1-219.125-60.502A2786.56 2786.56 0 0 0 272.82 866.4l-104.405 28.48c-23.893 6.507-45.803-15.413-39.285-39.296l28.437-104.288c-11.008-18.688-18.219-31.221-21.803-37.91A424.885 424.885 0 0 1 85.333 512c0-235.637 191.03-426.667 426.667-426.667zm-102.219 549.76a32 32 0 1 0-40.917 49.216A223.179 223.179 0 0 0 512 736c52.97 0 103.19-18.485 143.104-51.67a32 32 0 1 0-40.907-49.215A159.19 159.19 0 0 1 512 672a159.19 159.19 0 0 1-102.219-36.907z" fill="#currentColor"/></svg></span></div></div>',shadowRootVideoDescriptionReply:'<bili-adjustment-comment-thread-renderer id="adjustment-comment-description"><style>[[VIDEOCOMMENTDESCRIPTION]]</style><bili-adjustment-comment-renderer><div id="bili-adjustment-body"class="light"><a id="bili-adjustment-user-avatar"><bili-adjustment-avatar><img id="bili-adjustment-avatar-picture"src="[[UPAVATARFACELINK]]"alt="[[UPAVATARFACELINK]]"></bili-adjustment-avatar></a><div id="bili-adjustment-main"style="width:100%"><div id="bili-adjustment-header"><bili-adjustment-comment-user-info><div id="bili-adjustment-info"><div id="bili-adjustment-user-name"><a href="#"onclick="event.preventDefault()">视频简介君(ﾉ≧∀≦)ﾉ</a></div><div id="bili-adjustment-user-badge">Bilibili调整</div></div></bili-adjustment-comment-user-info></div><div id="bili-adjustment-content"><bili-adjustment-rich-text><p id="bili-adjustment-contents">[[PROCESSVIDEOCOMMENTDESCRIPTION]]</p></bili-adjustment-rich-text></div></div></div></bili-adjustment-comment-renderer><div id="bili-adjustment-spread-line"></div></bili-adjustment-comment-thread-renderer>',indexRecommendVideoHistoryOpenButton:'<button id="indexRecommendVideoHistoryOpenButton" popovertarget="indexRecommendVideoHistoryPopover" class="primary-btn roll-btn"><span>历史记录</span></button>',indexRecommendVideoHistoryPopover:'<div id="indexRecommendVideoHistoryPopover" class="adjustment-popover" popover><div id="indexRecommendVideoHistoryPopoverTitle"><span>首页视频推荐历史记录</span><div id="clearRecommendVideoHistoryButton">清空记录</div></div><div id="indexRecommendVideohistoryContents"><div id="indexRecommendVideohistoryCategories"><ul id="indexRecommendVideoHistoryCategory"><li class="all adjustment_button primary plain">全部</li></ul><hr><ul id="indexRecommendVideoHistoryCategoryV2"></ul></div><ul id="indexRecommendVideoHistoryList"></ul></div></div>',videoSettingsOpenButton:'<div class="fixed-sidenav-storage-item bili-adjustment-icon settings" title="打开脚本设置" [[DATAV]]><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="currentColor" d="M812.698 195.977L936.02 409.6a204.8 204.8 0 0 1 0 204.8L812.715 828.023a204.8 204.8 0 0 1-177.374 102.4H388.676a204.8 204.8 0 0 1-177.374-102.4L87.98 614.4a204.8 204.8 0 0 1 0-204.8l123.323-213.623a204.8 204.8 0 0 1 177.374-102.4h246.648a204.8 204.8 0 0 1 177.374 102.4zm-59.12 34.133a136.533 136.533 0 0 0-118.254-68.267H388.676a136.533 136.533 0 0 0-118.255 68.267L147.115 443.733a136.533 136.533 0 0 0 0 136.534L270.438 793.89a136.533 136.533 0 0 0 118.255 68.267h246.648a136.533 136.533 0 0 0 118.255-68.267l123.29-213.623a136.533 136.533 0 0 0 0-136.534L753.561 230.11z"/><path fill="currentColor" d="M512 682.667c94.26 0 170.667-76.408 170.667-170.667S606.259 341.333 512 341.333 341.333 417.741 341.333 512 417.741 682.667 512 682.667zm0-68.267a102.4 102.4 0 1 1 0-204.8 102.4 102.4 0 0 1 0 204.8z"/></svg>设置</div>',videoSettings:`<bilibili-adjustment-video-setting id="VideoSettingsPopover"class="adjustment-popover" popover><div class="adjustment-popover-title">哔哩哔哩播放页设置<div class="subTitle">（以下设置内容更改即生效，刷新页面即可）</div></div><div class="recommend">推荐使用样式表：<a href="https://userstyles.world/style/241/nightmode-for-bilibili-com" target="_blank">「夜间哔哩 NightMode For Bilibili」</a></div><div class="adjustment-form"><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>是否为大会员</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="IsVip" checked="[[ISVIP]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">请如实勾选，否则影响部分设置项</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动定位至播放器</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoLocate" checked="[[AUTOLOCATE]]"class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div class="adjustment-checkboxGroup"><div class="adjustment-checkbox video"><span>普通视频(video)</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoLocateVideo" checked="[[AUTOLOCATEVIDEO]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div class="adjustment-checkbox bangumi"><span>其他视频(bangumi)</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoLocateBangumi" checked="[[AUTOLOCATEBANGUMI]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div><span class="adjustment-tips info">只有勾选自动定位至播放器，才会执行自动定位的功能；勾选自动定位至播放器后，video 和 bangumi 两者全选或全不选，默认在这两种类型视频播放页都执行；否则勾选哪种类型，就只在这种类型的播放页才执行。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>播放器顶部偏移(px)</label><input id="OffsetTop" class="adjustment-input" value="[[OFFSETTOP]]"></div><span class="adjustment-tips info">播放器距离浏览器窗口默认距离为 [[PLAYEROFFSETTOP]]；请填写小于 [[PLAYEROFFSETTOP]] 的正整数或 0；当值为 0 时，播放器上沿将紧贴浏览器窗口上沿;值为 [[PLAYEROFFSETTOP]] 时，将保持B站默认。
    </span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>点击播放器时定位</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="ClickPlayerAutoLocation" checked="[[CLICKPLAYERAUTOLOCATION]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div><div class="adjustment-form-item player-mod"><div class="adjustment-form-item-content"><label>播放器默认模式</label><div class="adjustment-checkboxGroup"><div class="adjustment-checkbox"><div class="adjustment-radio-btn"><input class="radio" type="radio" name="PlayerMode" value="close" checked="[[SELECTEDPLAYERMODECLOSE]]"><div class="circle"></div><span>关闭</span></div></div>
        <div class="adjustment-checkbox"><div class="adjustment-radio-btn"><input class="radio" type="radio" name="PlayerMode" value="wide" checked="[[SELECTEDPLAYERMODEWIDE]]"><div class="circle"></div><span>宽屏</span></div></div><div class="adjustment-checkbox"><div class="adjustment-radio-btn"><input class="radio" type="radio" name="PlayerMode" value="web" checked="[[SELECTEDPLAYERMODEWEB]]"><div class="circle"></div><span>网页全屏</span></div></div></div></div><span class="adjustment-tips info">若遇到不能自动选择播放器模式可尝试刷新页面</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>网页全屏模式解锁</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="WebfullUnlock" checked="[[WebfullUnlock]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">勾选后网页全屏模式下可以滑动滚动条查看下方评论等内容（番剧播放页不支持）
<br>-&gt;新增迷你播放器显示，不过比较简陋，只支持暂停/播放操作，有条件的建议还是直接使用浏览器自带的小窗播放功能。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动选择最高画质</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoSelectVideoHighestQuality" checked="[[AUTOSELECTVIDEOHIGHESTQUALITY]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div class="adjustment-checkboxGroup"><div id="Checkbox4K" class="adjustment-checkbox fourK" style="display:[[CONTAINQUALITY4KSTYLE]]"><span>包含4K画质</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="ContainQuality4k" checked="[[CONTAINQUALITY4K]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div id="Checkbox8K" class="adjustment-checkbox eightK" style="display:[[CONTAINQUALITY8KSTYLE]]"><span>包含8K画质</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="ContainQuality8k" checked="[[CONTAINQUALITY8K]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div><span class="adjustment-tips info">网络条件好时可以启用此项，勾哪项选哪项，都勾选8k，否则选择4k及8k外最高画质。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>优化视频简介并插入评论区</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="InsertVideoDescriptionToComment"
        checked="[[INSERTVIDEODESCRIPTIONTOCOMMENT]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">将视频简介内容优化后插入评论区或直接替换原简介区内容(替换原简介中固定格式的静态内容为跳转链接)。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动跳过时间节点</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoSkip" checked="[[AUTOSKIP]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">自动跳过视频已设置设置时间节点，视频播放到相应时间点时将触发跳转至设定时间点。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>离开页面自动暂停视频</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="PauseVideo" checked="[[PAUSEVIDEO]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div class="adjustment-checkboxGroup"><div class="adjustment-checkbox continuePlay" style="display:[[CONTINUEPLAYSTYLE]]"><span>返回页面恢复播放</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="ContinuePlay" checked="[[CONTINUEPLAY]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动开启字幕</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoSubtitle" checked="[[AUTOSUBTITLE]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动刷新</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoReload" checked="[[AUTORELOAD]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">（不建议开启）若脚本执行失败是否自动刷新页面重试，开启后可能会对使用体验起到一定改善作用，但若是因为B站页面改版导致脚本失效，则会陷入页面无限刷新的情况，此时则必须在页面加载时看准时机关闭此项才能恢复正常，请自行选择是否开启。</span></div></div><div class="adjustment-buttonGroup"></bilibili-adjustment-video-setting>`,dynamicSettings:'<bilibili-adjustment-dynamic-setting id="DynamicSettingsPopover" class="adjustment-popover" popover><div class="adjustment-popover-title">哔哩哔哩动态页设置<div class="subTitle">（以下设置内容更改即生效，刷新页面即可）</div></div><div class="recommend">推荐使用样式表：<a href="https://userstyles.world/style/241/nightmode-for-bilibili-com" target="_blank">「夜间哔哩 NightMode For Bilibili」</a></div><label class="bilibili-adjustment-setting-label" style="padding-top:0!important;display: grid;grid-gap: 10px">「投稿视频」链接：<input id="WebVideoLinkInput" class="adjustment-input" value="[[DYNAMICVIDEOLINK]]"></label><div id="DynamicSettingsPopoverTips" class="adjustment-tips info">点击「投稿视频」选项后，填入当前浏览器地址栏链接，即可自动跳转至该链接</div><div class="adjustment-buttonGroup"><button id="DynamicSettingsSaveButton" class="adjustment-button primary">保存</button></div></bilibili-adjustment-dynamic-setting>',dynamicSettingsOpenButton:'<div class="bili-dyn-sidebar__btn bili-adjustment-icon settings" title="打开脚本设置" [[DATAV]]><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="currentColor" d="M812.698 195.977L936.02 409.6a204.8 204.8 0 0 1 0 204.8L812.715 828.023a204.8 204.8 0 0 1-177.374 102.4H388.676a204.8 204.8 0 0 1-177.374-102.4L87.98 614.4a204.8 204.8 0 0 1 0-204.8l123.323-213.623a204.8 204.8 0 0 1 177.374-102.4h246.648a204.8 204.8 0 0 1 177.374 102.4zm-59.12 34.133a136.533 136.533 0 0 0-118.254-68.267H388.676a136.533 136.533 0 0 0-118.255 68.267L147.115 443.733a136.533 136.533 0 0 0 0 136.534L270.438 793.89a136.533 136.533 0 0 0 118.255 68.267h246.648a136.533 136.533 0 0 0 118.255-68.267l123.29-213.623a136.533 136.533 0 0 0 0-136.534L753.561 230.11z"/><path fill="currentColor" d="M512 682.667c94.26 0 170.667-76.408 170.667-170.667S606.259 341.333 512 341.333 341.333 417.741 341.333 512 417.741 682.667 512 682.667zm0-68.267a102.4 102.4 0 1 1 0-204.8 102.4 102.4 0 0 1 0 204.8z"/></svg></div>'},v=(o,e)=>(e&&Object.entries(e).forEach(([t,a])=>{o=o.replaceAll(`[[${t.toUpperCase()}]]`,a);}),o),g=new Proxy(b,{get(o,e){return e==="replace"?(t,a)=>v(b[t],a):o[e]}}); exports({ h, g });

        })
    };
}));

System.import("./__entry.js", "./");