// ==UserScript==
// @name         哔哩哔哩（bilibili.com）调整
// @namespace    哔哩哔哩（bilibili.com）调整
// @version      2.2.2
// @author       QIAN
// @description  一、首页新增推荐视频历史记录(仅记录前6个推荐位中的非广告内容)，以防误点刷新错过想看的视频。二、动态页调整：默认显示"投稿视频"内容，可自行设置URL以免未来URL发生变化。三、播放页调整：1.自动定位到播放器（进入播放页，可自动定位到播放器，可设置偏移量及是否在点击主播放器时定位）；2.可设置播放器默认模式；3.可设置是否自动选择最高画质；4.新增快速返回播放器漂浮按钮；5.新增点击评论区时间锚点可快速返回播放器；6.网页全屏模式解锁(网页全屏模式下可滚动查看评论，并在播放器控制栏新增快速跳转至评论区按钮)；7.将视频简介内容优化后插入评论区或直接替换原简介区内容(替换原简介中固定格式的静态内容为跳转链接)；8.视频播放过程中跳转指定时间节点至目标时间节点(可用来跳过片头片尾及中间广告等)；9.新增点击视频合集、下方推荐视频、结尾推荐视频卡片快速返回播放器；
// @license      GPL-3.0 License
// @copyright    QIAN
// @match        *://www.bilibili.com/*
// @match        *://www.bilibili.com/video/*
// @match        *://www.bilibili.com/bangumi/play/*
// @match        *://www.bilibili.com/list/*
// @match        *://t.bilibili.com/*
// @require      https://cdn.jsdelivr.net/npm/systemjs@6.15.1/dist/system.min.js
// @require      https://cdn.jsdelivr.net/npm/systemjs@6.15.1/dist/extras/named-register.min.js
// @require      data:application/javascript,%3B(typeof%20System!%3D'undefined')%26%26(System%3Dnew%20System.constructor())%3B
// @grant        unsafeWindow
// ==/UserScript==


System.register("./__entry.js", ['./__monkey.entry-_VCtn1Is.js'], (function (exports, module) {
	'use strict';
	return {
		setters: [null],
		execute: (function () {



		})
	};
}));

System.register("./__monkey.entry-_VCtn1Is.js", [], (function (exports, module) {
	'use strict';
	return {
		execute: (function () {

			var e=Object.defineProperty;var t=e=>{throw TypeError(e)};var n=(t,n,r)=>n in t?e(t,n,{enumerable:true,configurable:true,writable:true,value:r}):t[n]=r;var r=(e,t,r)=>n(e,typeof t!=="symbol"?t+"":t,r);var s=(e,n,r)=>n.has(e)||t("Cannot "+r);var o=(e,t,n)=>(s(e,t,"read from private field"),n?n.call(e):t.get(e));var i=(e,n,r)=>n.has(e)?t("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,r);var a=(e,t,n,r)=>(s(e,t,"write to private field"),t.set(e,n),n);var c=(e,t,n)=>(s(e,t,"access private method"),n);var l,u,f,d,h,p,m,y,g,w,b,E,v,S,O,R,_,A,T,x,k,C,j,P,L,N,U,D;const B=function e(){const t=typeof document!=="undefined"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}();const F=function(e){return "/"+e};const M={};const q=function e(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]");const t=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));s=Promise.allSettled(n.map((e=>{e=F(e);if(e in M)return;M[e]=true;const n=e.endsWith(".css");const r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");s.rel=n?"stylesheet":B;if(!n)s.as="script";s.crossOrigin="";s.href=e;if(t)s.setAttribute("nonce",t);document.head.appendChild(s);if(n)return new Promise(((t,n)=>{s.addEventListener("load",t);s.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))));}))})));}function o(e){const t=new Event("vite:preloadError",{cancelable:true});t.payload=e;window.dispatchEvent(t);if(!t.defaultPrevented)throw e}return s.then((e=>{for(const t of e||[]){if(t.status!=="rejected")continue;o(t.reason);}return t().catch(o)}))};const I=()=>{const{host:e,pathname:t,origin:n}=window.location;const r=[{test:()=>/^\/video\//.test(t),type:"播放页调整"},{test:()=>/^\/bangumi\//.test(t),type:"番剧页调整"},{test:()=>e==="www.bilibili.com"&&t==="/",type:"首页调整"},{test:()=>n==="https://t.bilibili.com",type:"动态页调整"}];const s=r.find((e=>e.test()));return (s==null?void 0:s.type)||"其他页调整"};const z=class e{constructor(e){this.module=e;}log(t,...n){if(e.ENABLED_LEVELS[t])console.log(`%c${e.PAGE_TYPE_PREFIX}${t==="debug"?"(调试)丨":""}${""}`,e.LEVELS[t],...n);}info(...e){this.log("info",...e);}error(...e){this.log("error",...e);}warn(...e){this.log("warn",...e);}debug(...e){this.log("debug",...e);}};r(z,"LEVELS",{info:"color:white;background:#006aff;padding:2px;border-radius:2px",error:"color:white;background:#f33;padding:2px;border-radius:2px",warn:"color:white;background:#ff6d00;padding:2px;border-radius:2px",debug:"color:white;background:#cc00ff;padding:2px;border-radius:2px"});r(z,"ENABLED_LEVELS",{info:true,error:true,warn:true,debug:false});r(z,"PAGE_TYPE_PREFIX",I());let W=exports("W", z);const $=class e{constructor(){i(this,p);i(this,l,new W("EventBus"));i(this,f,new Map);i(this,d,[]);i(this,h,false);if(o(e,u))return o(e,u);a(e,u,this);}on(e,t,n={}){const{priority:r=0,once:s=false,namespace:i=""}=n;const a=i?`${i}:${e}`:e;if(!o(this,f).has(a))o(this,f).set(a,[]);o(this,f).get(a).push({handler:t,once:s,priority:r});o(this,f).get(a).sort(((e,t)=>t.priority-e.priority));return ()=>this.off(a,t)}once(e,t,n){return this.on(e,t,{...n,once:true})}off(e,t){if(!o(this,f).has(e))return;const n=o(this,f).get(e);const r=t?n.filter((e=>e.handler!==t)):[];if(r.length)o(this,f).set(e,r);else o(this,f).delete(e);}async emit(e,...t){const n=e.split(":")[0];const r=[e,n,"*"];let s=false;const i={event:e,cancel:()=>s=true,get isCancelled(){return s}};for(const c of o(this,d)){await c(i,...t);if(i.isCancelled)return}for(const l of r){if(!o(this,f).has(l))continue;const e=[...o(this,f).get(l)];for(const{handler:n,once:r}of e){if(r)this.off(l,n);try{const e=n(i,...t);if(e instanceof Promise)await e;}catch(a){c(this,p,m).call(this,a,i,n);}if(i.isCancelled)return}}}addInterceptor(e){o(this,d).push(e);return ()=>{a(this,d,o(this,d).filter((t=>t!==e)));}}setDebug(e){a(this,h,e);}listenAll(e){return this.on("*",e)}clear(){o(this,f).clear();}};l=new WeakMap;u=new WeakMap;f=new WeakMap;d=new WeakMap;h=new WeakMap;p=new WeakSet;m=function(e,t,n){if(o(this,h))o(this,l).error(`[EventBus] Error in handler for ${t.event}:`,{error:e,handler:n.name||"anonymous",args:t.args});this.emit("error",{error:e,context:t});};i($,u);let V=$;const H=exports("H", new V);const J=3e4;class K{constructor(e,t,n){this.dbName=e;this.version=t;this.storeConfig=n;this.db=null;this.lastOperationTime=Date.now();}async connect(){if(this.db){this._updateLastOperation();return this.db}return new Promise(((e,t)=>{const n=indexedDB.open(this.dbName,this.version);n.onupgradeneeded=e=>{const t=e.target.result;this._createStores(t);};n.onsuccess=t=>{this.db=t.target.result;this._setupConnectionMonitoring();e(this.db);};n.onerror=e=>{t(new Error(`Database error: ${e.target.error}`));};}))}isStoreExists(e){return this.db&&this.db.objectStoreNames.contains(e)}async add(e,t){return this._execute(e,"readwrite",(e=>e.add(t)))}async get(e,t){return this._execute(e,"readonly",(e=>e.get(t)))}async getAll(e,t,n,r){const s=await this.getAllRaw(e,t,n,r);return {results:s.results.reduce(((e,t)=>{e[t.key]=t.value;return e}),{}),continue:s.continue}}async getAllRaw(e,t,n,r){return this._executeCursorQuery(e,t,n,r)}async update(e,t){return this._execute(e,"readwrite",(e=>e.put(t)))}async delete(e,t){return this._execute(e,"readwrite",(e=>e.delete(t)))}async count(e,t){return this._execute(e,"readonly",(e=>t?e.count(t):e.count()))}async clear(e){return this._execute(e,"readwrite",(e=>e.clear()))}async _execute(e,t,n){await this.connect();return new Promise(((r,s)=>{const o=this.db.transaction(e,t);const i=o.objectStore(e);const a=n(i);a.onsuccess=()=>r(a.result);a.onerror=e=>s(e.target.error);}))}async _executeCursorQuery(e,t,n,r=100){await this.connect();return new Promise(((s,o)=>{const i=this.db.transaction(e,"readonly");const a=i.objectStore(e);const c=t?a.index(t):a;const l=[];let u;const f=c.openCursor(n);f.onsuccess=e=>{u=e.target.result;if(u){l.push(u.value);if(l.length>=r)return s({results:l,continue:()=>u.continue()});u.continue();}else s({results:l,continue:null});};f.onerror=o;}))}close(){if(this.db){this.db.close();this.db=null;}}_createStores(e){this.storeConfig.forEach((t=>{var n;if(!e.objectStoreNames.contains(t.name)){const r=e.createObjectStore(t.name,{keyPath:t.keyPath});(n=t.indexes)==null?void 0:n.forEach((e=>{r.createIndex(e.name,e.keyPath,{unique:e.unique||false});}));}}));}_setupConnectionMonitoring(){this._idleTimer=setInterval((()=>{if(Date.now()-this.lastOperationTime>J)this.close();}),5e3);}_updateLastOperation(){this.lastOperationTime=Date.now();}}const G=e=>new K(e.dbName,e.version,e.storeConfig);const X=class e{constructor(){i(this,g);i(this,w);i(this,b,{user:{dbName:"BilibiliAdjustmentUserConfigs",version:2,storeConfig:[{name:"keyval",keyPath:"key",indexes:[{name:"by_timestamp",keyPath:"timestamp",unique:false}]}]},index:{dbName:"BilibiliAdjustmentIndexRecommendVideoHistory",version:2,storeConfig:[{name:"keyval",keyPath:"key",indexes:[{name:"by_timestamp",keyPath:"timestamp",unique:false}]}]}});if(!window.indexedDB)throw new Error("Browser does not support IndexedDB");if(o(e,y))return o(e,y);a(this,w,new W("StorageService"));a(this,g,new Map);Object.entries(o(this,b)).forEach((([e,t])=>{o(this,g).set(e,G(t));}));a(e,y,this);}async init(){try{for(const[e,t]of o(this,g)){await t.connect();if(!t.isStoreExists("keyval"))throw new Error(`数据库 ${e} 初始化丨数据表不存在`)}o(this,w).debug("数据库集群初始化丨成功");}catch(e){o(this,w).error("数据库集群初始化丨失败",e);throw e}}async set(e,t,n){const r=o(this,g).get(e);await r.update("keyval",{key:t,value:n,timestamp:Date.now()});}async get(e,t){const n=o(this,g).get(e);return n.get("keyval",t).then((e=>e==null?void 0:e.value))}legacySet(e,t){return this.set("user",e,t)}legacyGet(e){return this.get("user",e)}async getAll(e,t,n,r){const s=o(this,g).get(e);const i=await s.getAll("keyval",t,n,r);return i.results}async getAllRaw(e,t,n,r){const s=o(this,g).get(e);const i=await s._executeCursorQuery("keyval",t,n,r);return i.results.map((e=>({key:e.key,value:e.value,timestamp:e.timestamp})))}async getByTimeRange(e,t,n=100){const r=IDBKeyRange.bound(e,t);return this.getAll("by_timestamp",r,n)}async batch(e,t){const n=o(this,g).get(e);return n.transaction(["keyval"],"readwrite",(async e=>{for(const{type:n,key:r,value:s}of t)if(n==="set")await e.keyval.put({key:r,value:s,timestamp:Date.now()});else if(n==="delete")await e.keyval.delete(r);}))}async getCount(e,t){const n=o(this,g).get(e,t);return n.count("keyval")}async clear(e){const t=o(this,g).get(e);return t.clear("keyval")}};y=new WeakMap;g=new WeakMap;w=new WeakMap;b=new WeakMap;i(X,y);let Q=X;const Y=exports("Y", new Q);class Z{static async initialize(){if(o(this,v))return;try{await Y.init();a(this,v,true);}catch(e){o(this,E).error("配置服务初始化失败",e);throw e}}static async initializeDefaults(){if(!o(this,v))await this.initialize();try{for(const[e,t]of this.DEFAULT_VALUES.entries()){const n=await Y.legacyGet(e);if(n===null||n===void 0)await this.setValue(e,t);}o(this,E).debug("默认配置初始化完成");}catch(e){o(this,E).error("默认配置初始化失败",e);throw e}}static async getValue(e){if(!o(this,v))await this.initialize();try{if(o(this,S).has(e))return o(this,S).get(e);const t=await Y.legacyGet(e);if(t===null||t===void 0){const t=this.DEFAULT_VALUES.get(e);if(t!==void 0){await this.setValue(e,t);return t}return null}o(this,S).set(e,t);return t}catch(t){o(this,E).error("配置读取失败",t);return null}}static async setValue(e,t){if(!o(this,v))await this.initialize();try{o(this,S).set(e,t);await Y.legacySet(e,t);}catch(n){o(this,S).delete(e);o(this,E).error("配置存储失败",n);throw n}}static clearCache(){o(this,S).clear();}}E=new WeakMap;v=new WeakMap;S=new WeakMap;i(Z,E,new W("ConfigService"));i(Z,v,false);i(Z,S,new Map);r(Z,"DEFAULT_VALUES",new Map([["is_vip",true],["player_type","video"],["offset_top",5],["player_offset_top",168],["video_player_offset_top",168],["bangumi_player_offset_top",104],["auto_locate",true],["get_offset_method","function"],["auto_locate_video",true],["auto_locate_bangumi",true],["click_player_auto_locate",true],["current_player_mode","normal"],["selected_player_mode","wide"],["auto_select_video_highest_quality",true],["auto_cancel_mute",true],["contain_quality_4k",false],["contain_quality_8k",false],["webfull_unlock",false],["auto_reload",false],["auto_skip",false],["insert_video_description_to_comment",true],["dynamic_video_link","https://t.bilibili.com/?tab=video"],["pause_video",false],["continue_play",false],["auto_subtitle",false],["show_location",true]]));const ee=class e{constructor(){i(this,T);i(this,R,new W("ModuleSystem"));i(this,_,new Map);i(this,A,{lazyInit:false});if(o(e,O))return o(e,O);a(e,O,this);c(this,T,P).call(this);}configure({lazyInit:e=false}){o(this,A).lazyInit=e;}register(e){c(this,T,C).call(this,e);const{name:t}=e;if(o(this,_).has(t)){c(this,T,D).call(this,`Module ${t} already registered`,"warn");return}o(this,_).set(t,{definition:e,instance:null,status:"registered",version:(e==null?void 0:e.version)||"1.0.0",timestamp:Date.now()});H.emit("module:registered",{name:t});o(this,R).debug(`模块已注册: ${t}`);}async init(e={}){await Z.initializeDefaults();const t=Date.now();H.emit("system:init-start",{timestamp:t});try{const e=Array.from(o(this,_).keys());o(this,R).debug(`模块初始化: ${e.join(", ")}`);await c(this,T,k).call(this,e);H.emit("system:init-success",{duration:Date.now()-t,moduleCount:o(this,_).size});o(this,R).debug(`模块初始化耗时： ${Date.now()-t} ms`);}catch(n){H.emit("system:init-fail",{error:n});throw c(this,T,U).call(this,n,"System initialization failed")}}getModule(e){const t=o(this,_).get(e);if(!t)return null;if(o(this,A).lazyInit&&!t.instance)c(this,T,x).call(this,t);return t.instance}};O=new WeakMap;R=new WeakMap;_=new WeakMap;A=new WeakMap;T=new WeakSet;x=function(e){try{e.instance=c(this,T,j).call(this,e.definition);if(typeof e.instance.install==="function")e.instance.install();e.status="active";o(this,R).debug(`模块初始化✅: ${e.definition.name}`);}catch(t){e.status="error";c(this,T,D).call(this,t,"critical",{module:e.definition.name});}};k=async function(e){await Promise.all(e.map((e=>{const t=o(this,_).get(e);c(this,T,x).call(this,t);})));};C=function(e){if(!e.name)throw new Error("Module must have a name property")};j=function(e){const t=Object.create(e);Object.entries(e).forEach((([e,n])=>{if(typeof n==="function")t[e]=n.bind(t);else t[e]=n;}));return t};P=function(){H.on("network:offline",(()=>{c(this,T,N).call(this);}));H.on("module:error",(({module:e,error:t})=>{c(this,T,L).call(this,e,t);}));};L=function(e,t){const n=o(this,_).get(`${e}-fallback`);if(n){this.register(n);H.emit("module:fallback",{original:e});}};N=function(){o(this,_).forEach((e=>{if(e.definition.offline)e.instance.enableOfflineMode();}));};U=function(e,t){e.moduleSystemContext=t;e.timestamp=(new Date).toISOString();return e};D=function(e,t="error",n={}){const r=new Error(e);const s=c(this,T,U).call(this,r,"operation");H.emit("module:error",{error:s,level:t,...n});if(t==="critical")o(this,R).error(`[CRITICAL] ${e}`,n);};i(ee,O);let te=ee;const ne=new te;function re(e,t){return function n(){return e.apply(t,arguments)}}const{toString:se}=Object.prototype;const{getPrototypeOf:oe}=Object;const ie=(e=>t=>{const n=se.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null));const ae=e=>{e=e.toLowerCase();return t=>ie(t)===e};const ce=e=>t=>typeof t===e;const{isArray:le}=Array;const ue=ce("undefined");function fe(e){return e!==null&&!ue(e)&&e.constructor!==null&&!ue(e.constructor)&&me(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const de=ae("ArrayBuffer");function he(e){let t;if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView)t=ArrayBuffer.isView(e);else t=e&&e.buffer&&de(e.buffer);return t}const pe=ce("string");const me=ce("function");const ye=ce("number");const ge=e=>e!==null&&typeof e==="object";const we=e=>e===true||e===false;const be=e=>{if(ie(e)!=="object")return false;const t=oe(e);return (t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};const Ee=ae("Date");const ve=ae("File");const Se=ae("Blob");const Oe=ae("FileList");const Re=e=>ge(e)&&me(e.pipe);const _e=e=>{let t;return e&&(typeof FormData==="function"&&e instanceof FormData||me(e.append)&&((t=ie(e))==="formdata"||t==="object"&&me(e.toString)&&e.toString()==="[object FormData]"))};const Ae=ae("URLSearchParams");const[Te,xe,ke,Ce]=["ReadableStream","Request","Response","Headers"].map(ae);const je=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pe(e,t,{allOwnKeys:n=false}={}){if(e===null||typeof e==="undefined")return;let r;let s;if(typeof e!=="object")e=[e];if(le(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else {const s=n?Object.getOwnPropertyNames(e):Object.keys(e);const o=s.length;let i;for(r=0;r<o;r++){i=s[r];t.call(null,e[i],i,e);}}}function Le(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length;let s;while(r-- >0){s=n[r];if(t===s.toLowerCase())return s}return null}const Ne=(()=>{if(typeof globalThis!=="undefined")return globalThis;return typeof self!=="undefined"?self:typeof window!=="undefined"?window:global})();const Ue=e=>!ue(e)&&e!==Ne;function De(){const{caseless:e}=Ue(this)&&this||{};const t={};const n=(n,r)=>{const s=e&&Le(t,r)||r;if(be(t[s])&&be(n))t[s]=De(t[s],n);else if(be(n))t[s]=De({},n);else if(le(n))t[s]=n.slice();else t[s]=n;};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Pe(arguments[r],n);return t}const Be=(e,t,n,{allOwnKeys:r}={})=>{Pe(t,((t,r)=>{if(n&&me(t))e[r]=re(t,n);else e[r]=t;}),{allOwnKeys:r});return e};const Fe=e=>{if(e.charCodeAt(0)===65279)e=e.slice(1);return e};const Me=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r);e.prototype.constructor=e;Object.defineProperty(e,"super",{value:t.prototype});n&&Object.assign(e.prototype,n);};const qe=(e,t,n,r)=>{let s;let o;let i;const a={};t=t||{};if(e==null)return t;do{s=Object.getOwnPropertyNames(e);o=s.length;while(o-- >0){i=s[o];if((!r||r(i,e,t))&&!a[i]){t[i]=e[i];a[i]=true;}}e=n!==false&&oe(e);}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t};const Ie=(e,t,n)=>{e=String(e);if(n===void 0||n>e.length)n=e.length;n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n};const ze=e=>{if(!e)return null;if(le(e))return e;let t=e.length;if(!ye(t))return null;const n=new Array(t);while(t-- >0)n[t]=e[t];return n};const We=(e=>t=>e&&t instanceof e)(typeof Uint8Array!=="undefined"&&oe(Uint8Array));const $e=(e,t)=>{const n=e&&e[Symbol.iterator];const r=n.call(e);let s;while((s=r.next())&&!s.done){const n=s.value;t.call(e,n[0],n[1]);}};const Ve=(e,t)=>{let n;const r=[];while((n=e.exec(t))!==null)r.push(n);return r};const He=ae("HTMLFormElement");const Je=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function e(t,n,r){return n.toUpperCase()+r}));const Ke=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype);const Ge=ae("RegExp");const Xe=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e);const r={};Pe(n,((n,s)=>{let o;if((o=t(n,s,e))!==false)r[s]=o||n;}));Object.defineProperties(e,r);};const Qe=e=>{Xe(e,((t,n)=>{if(me(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return false;const r=e[n];if(!me(r))return;t.enumerable=false;if("writable"in t){t.writable=false;return}if(!t.set)t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")};}));};const Ye=(e,t)=>{const n={};const r=e=>{e.forEach((e=>{n[e]=true;}));};le(e)?r(e):r(String(e).split(t));return n};const Ze=()=>{};const et=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function tt(e){return !!(e&&me(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const nt=e=>{const t=new Array(10);const n=(e,r)=>{if(ge(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const s=le(e)?[]:{};Pe(e,((e,t)=>{const o=n(e,r+1);!ue(o)&&(s[t]=o);}));t[r]=void 0;return s}}return e};return n(e,0)};const rt=ae("AsyncFunction");const st=e=>e&&(ge(e)||me(e))&&me(e.then)&&me(e.catch);const ot=((e,t)=>{if(e)return setImmediate;return t?((e,t)=>{Ne.addEventListener("message",(({source:n,data:r})=>{if(n===Ne&&r===e)t.length&&t.shift()();}),false);return n=>{t.push(n);Ne.postMessage(e,"*");}})(`axios@${Math.random()}`,[]):e=>setTimeout(e)})(typeof setImmediate==="function",me(Ne.postMessage));const it=typeof queueMicrotask!=="undefined"?queueMicrotask.bind(Ne):typeof process!=="undefined"&&process.nextTick||ot;const at={isArray:le,isArrayBuffer:de,isBuffer:fe,isFormData:_e,isArrayBufferView:he,isString:pe,isNumber:ye,isBoolean:we,isObject:ge,isPlainObject:be,isReadableStream:Te,isRequest:xe,isResponse:ke,isHeaders:Ce,isUndefined:ue,isDate:Ee,isFile:ve,isBlob:Se,isRegExp:Ge,isFunction:me,isStream:Re,isURLSearchParams:Ae,isTypedArray:We,isFileList:Oe,forEach:Pe,merge:De,extend:Be,trim:je,stripBOM:Fe,inherits:Me,toFlatObject:qe,kindOf:ie,kindOfTest:ae,endsWith:Ie,toArray:ze,forEachEntry:$e,matchAll:Ve,isHTMLForm:He,hasOwnProperty:Ke,hasOwnProp:Ke,reduceDescriptors:Xe,freezeMethods:Qe,toObjectSet:Ye,toCamelCase:Je,noop:Ze,toFiniteNumber:et,findKey:Le,global:Ne,isContextDefined:Ue,isSpecCompliantForm:tt,toJSONObject:nt,isAsyncFn:rt,isThenable:st,setImmediate:ot,asap:it};function ct(e,t,n,r,s){Error.call(this);if(Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else this.stack=(new Error).stack;this.message=e;this.name="AxiosError";t&&(this.code=t);n&&(this.config=n);r&&(this.request=r);if(s){this.response=s;this.status=s.status?s.status:null;}}at.inherits(ct,Error,{toJSON:function e(){return {message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:at.toJSONObject(this.config),code:this.code,status:this.status}}});const lt=ct.prototype;const ut={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ut[e]={value:e};}));Object.defineProperties(ct,ut);Object.defineProperty(lt,"isAxiosError",{value:true});ct.from=(e,t,n,r,s,o)=>{const i=Object.create(lt);at.toFlatObject(e,i,(function e(t){return t!==Error.prototype}),(e=>e!=="isAxiosError"));ct.call(i,e.message,t,n,r,s);i.cause=e;i.name=e.name;o&&Object.assign(i,o);return i};const ft=null;function dt(e){return at.isPlainObject(e)||at.isArray(e)}function ht(e){return at.endsWith(e,"[]")?e.slice(0,-2):e}function pt(e,t,n){if(!e)return t;return e.concat(t).map((function e(t,r){t=ht(t);return !n&&r?"["+t+"]":t})).join(n?".":"")}function mt(e){return at.isArray(e)&&!e.some(dt)}const yt=at.toFlatObject(at,{},null,(function e(t){return /^is[A-Z]/.test(t)}));function gt(e,t,n){if(!at.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;n=at.toFlatObject(n,{metaTokens:true,dots:false,indexes:false},false,(function e(t,n){return !at.isUndefined(n[t])}));const r=n.metaTokens;const s=n.visitor||u;const o=n.dots;const i=n.indexes;const a=n.Blob||typeof Blob!=="undefined"&&Blob;const c=a&&at.isSpecCompliantForm(t);if(!at.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(e===null)return "";if(at.isDate(e))return e.toISOString();if(!c&&at.isBlob(e))throw new ct("Blob is not supported. Use a Buffer instead.");if(at.isArrayBuffer(e)||at.isTypedArray(e))return c&&typeof Blob==="function"?new Blob([e]):Buffer.from(e);return e}function u(e,n,s){let a=e;if(e&&!s&&typeof e==="object")if(at.endsWith(n,"{}")){n=r?n:n.slice(0,-2);e=JSON.stringify(e);}else if(at.isArray(e)&&mt(e)||(at.isFileList(e)||at.endsWith(n,"[]"))&&(a=at.toArray(e))){n=ht(n);a.forEach((function e(r,s){!(at.isUndefined(r)||r===null)&&t.append(i===true?pt([n],s,o):i===null?n:n+"[]",l(r));}));return false}if(dt(e))return true;t.append(pt(s,n,o),l(e));return false}const f=[];const d=Object.assign(yt,{defaultVisitor:u,convertValue:l,isVisitable:dt});function h(e,n){if(at.isUndefined(e))return;if(f.indexOf(e)!==-1)throw Error("Circular reference detected in "+n.join("."));f.push(e);at.forEach(e,(function e(r,o){const i=!(at.isUndefined(r)||r===null)&&s.call(t,r,at.isString(o)?o.trim():o,n,d);if(i===true)h(r,n?n.concat(o):[o]);}));f.pop();}if(!at.isObject(e))throw new TypeError("data must be an object");h(e);return t}function wt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function e(n){return t[n]}))}function bt(e,t){this._pairs=[];e&&gt(e,this,t);}const Et=bt.prototype;Et.append=function e(t,n){this._pairs.push([t,n]);};Et.toString=function e(t){const n=t?function(e){return t.call(this,e,wt)}:wt;return this._pairs.map((function e(t){return n(t[0])+"="+n(t[1])}),"").join("&")};function vt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function St(e,t,n){if(!t)return e;const r=n&&n.encode||vt;if(at.isFunction(n))n={serialize:n};const s=n&&n.serialize;let o;if(s)o=s(t,n);else o=at.isURLSearchParams(t)?t.toString():new bt(t,n).toString(r);if(o){const t=e.indexOf("#");if(t!==-1)e=e.slice(0,t);e+=(e.indexOf("?")===-1?"?":"&")+o;}return e}class Ot{constructor(){this.handlers=[];}use(e,t,n){this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:false,runWhen:n?n.runWhen:null});return this.handlers.length-1}eject(e){if(this.handlers[e])this.handlers[e]=null;}clear(){if(this.handlers)this.handlers=[];}forEach(e){at.forEach(this.handlers,(function t(n){if(n!==null)e(n);}));}}const Rt={silentJSONParsing:true,forcedJSONParsing:true,clarifyTimeoutError:false};const _t=typeof URLSearchParams!=="undefined"?URLSearchParams:bt;const At=typeof FormData!=="undefined"?FormData:null;const Tt=typeof Blob!=="undefined"?Blob:null;const xt={isBrowser:true,classes:{URLSearchParams:_t,FormData:At,Blob:Tt},protocols:["http","https","file","blob","url","data"]};const kt=typeof window!=="undefined"&&typeof document!=="undefined";const Ct=typeof navigator==="object"&&navigator||void 0;const jt=kt&&(!Ct||["ReactNative","NativeScript","NS"].indexOf(Ct.product)<0);const Pt=(()=>typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts==="function")();const Lt=kt&&window.location.href||"http://localhost";const Nt=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kt,hasStandardBrowserEnv:jt,hasStandardBrowserWebWorkerEnv:Pt,navigator:Ct,origin:Lt},Symbol.toStringTag,{value:"Module"}));const Ut={...Nt,...xt};function Dt(e,t){return gt(e,new Ut.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){if(Ut.isNode&&at.isBuffer(e)){this.append(t,e.toString("base64"));return false}return r.defaultVisitor.apply(this,arguments)}},t))}function Bt(e){return at.matchAll(/\w+|\[(\w*)]/g,e).map((e=>e[0]==="[]"?"":e[1]||e[0]))}function Ft(e){const t={};const n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++){o=n[r];t[o]=e[o];}return t}function Mt(e){function t(e,n,r,s){let o=e[s++];if(o==="__proto__")return true;const i=Number.isFinite(+o);const a=s>=e.length;o=!o&&at.isArray(r)?r.length:o;if(a){if(at.hasOwnProp(r,o))r[o]=[r[o],n];else r[o]=n;return !i}if(!r[o]||!at.isObject(r[o]))r[o]=[];const c=t(e,n,r[o],s);if(c&&at.isArray(r[o]))r[o]=Ft(r[o]);return !i}if(at.isFormData(e)&&at.isFunction(e.entries)){const n={};at.forEachEntry(e,((e,r)=>{t(Bt(e),r,n,0);}));return n}return null}function qt(e,t,n){if(at.isString(e))try{(t||JSON.parse)(e);return at.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return (n||JSON.stringify)(e)}const It={transitional:Rt,adapter:["xhr","http","fetch"],transformRequest:[function e(t,n){const r=n.getContentType()||"";const s=r.indexOf("application/json")>-1;const o=at.isObject(t);if(o&&at.isHTMLForm(t))t=new FormData(t);const i=at.isFormData(t);if(i)return s?JSON.stringify(Mt(t)):t;if(at.isArrayBuffer(t)||at.isBuffer(t)||at.isStream(t)||at.isFile(t)||at.isBlob(t)||at.isReadableStream(t))return t;if(at.isArrayBufferView(t))return t.buffer;if(at.isURLSearchParams(t)){n.setContentType("application/x-www-form-urlencoded;charset=utf-8",false);return t.toString()}let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Dt(t,this.formSerializer).toString();if((a=at.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return gt(a?{"files[]":t}:t,e&&new e,this.formSerializer)}}if(o||s){n.setContentType("application/json",false);return qt(t)}return t}],transformResponse:[function e(t){const n=this.transitional||It.transitional;const r=n&&n.forcedJSONParsing;const s=this.responseType==="json";if(at.isResponse(t)||at.isReadableStream(t))return t;if(t&&at.isString(t)&&(r&&!this.responseType||s)){const e=n&&n.silentJSONParsing;const r=!e&&s;try{return JSON.parse(t)}catch(o){if(r){if(o.name==="SyntaxError")throw ct.from(o,ct.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ut.classes.FormData,Blob:Ut.classes.Blob},validateStatus:function e(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};at.forEach(["delete","get","head","post","put","patch"],(e=>{It.headers[e]={};}));const zt=at.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Wt=e=>{const t={};let n;let r;let s;e&&e.split("\n").forEach((function e(o){s=o.indexOf(":");n=o.substring(0,s).trim().toLowerCase();r=o.substring(s+1).trim();if(!n||t[n]&&zt[n])return;if(n==="set-cookie")if(t[n])t[n].push(r);else t[n]=[r];else t[n]=t[n]?t[n]+", "+r:r;}));return t};const $t=Symbol("internals");function Vt(e){return e&&String(e).trim().toLowerCase()}function Ht(e){if(e===false||e==null)return e;return at.isArray(e)?e.map(Ht):String(e)}function Jt(e){const t=Object.create(null);const n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;while(r=n.exec(e))t[r[1]]=r[2];return t}const Kt=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Gt(e,t,n,r,s){if(at.isFunction(r))return r.call(this,t,n);if(s)t=n;if(!at.isString(t))return;if(at.isString(r))return t.indexOf(r)!==-1;if(at.isRegExp(r))return r.test(t)}function Xt(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}function Qt(e,t){const n=at.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:true});}));}let Yt=class e{constructor(e){e&&this.set(e);}set(e,t,n){const r=this;function s(e,t,n){const s=Vt(t);if(!s)throw new Error("header name must be a non-empty string");const o=at.findKey(r,s);if(!o||r[o]===void 0||n===true||n===void 0&&r[o]!==false)r[o||t]=Ht(e);}const o=(e,t)=>at.forEach(e,((e,n)=>s(e,n,t)));if(at.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(at.isString(e)&&(e=e.trim())&&!Kt(e))o(Wt(e),t);else if(at.isHeaders(e))for(const[i,a]of e.entries())s(a,i,n);else e!=null&&s(t,e,n);return this}get(e,t){e=Vt(e);if(e){const n=at.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(t===true)return Jt(e);if(at.isFunction(t))return t.call(this,e,n);if(at.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){e=Vt(e);if(e){const n=at.findKey(this,e);return !!(n&&this[n]!==void 0&&(!t||Gt(this,this[n],n,t)))}return false}delete(e,t){const n=this;let r=false;function s(e){e=Vt(e);if(e){const s=at.findKey(n,e);if(s&&(!t||Gt(n,n[s],s,t))){delete n[s];r=true;}}}if(at.isArray(e))e.forEach(s);else s(e);return r}clear(e){const t=Object.keys(this);let n=t.length;let r=false;while(n--){const s=t[n];if(!e||Gt(this,this[s],s,e,true)){delete this[s];r=true;}}return r}normalize(e){const t=this;const n={};at.forEach(this,((r,s)=>{const o=at.findKey(n,s);if(o){t[o]=Ht(r);delete t[s];return}const i=e?Xt(s):String(s).trim();if(i!==s)delete t[s];t[i]=Ht(r);n[i]=true;}));return this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);at.forEach(this,((n,r)=>{n!=null&&n!==false&&(t[r]=e&&at.isArray(n)?n.join(", "):n);}));return t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return "AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);t.forEach((e=>n.set(e)));return n}static accessor(e){const t=this[$t]=this[$t]={accessors:{}};const n=t.accessors;const r=this.prototype;function s(e){const t=Vt(e);if(!n[t]){Qt(r,e);n[t]=true;}}at.isArray(e)?e.forEach(s):s(e);return this}};Yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);at.reduceDescriptors(Yt.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return {get:()=>e,set(e){this[n]=e;}}}));at.freezeMethods(Yt);function Zt(e,t){const n=this||It;const r=t||n;const s=Yt.from(r.headers);let o=r.data;at.forEach(e,(function e(r){o=r.call(n,o,s.normalize(),t?t.status:void 0);}));s.normalize();return o}function en(e){return !!(e&&e.__CANCEL__)}function tn(e,t,n){ct.call(this,e==null?"canceled":e,ct.ERR_CANCELED,t,n);this.name="CanceledError";}at.inherits(tn,ct,{__CANCEL__:true});function nn(e,t,n){const r=n.config.validateStatus;if(!n.status||!r||r(n.status))e(n);else t(new ct("Request failed with status code "+n.status,[ct.ERR_BAD_REQUEST,ct.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n));}function rn(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function sn(e,t){e=e||10;const n=new Array(e);const r=new Array(e);let s=0;let o=0;let i;t=t!==void 0?t:1e3;return function a(c){const l=Date.now();const u=r[o];if(!i)i=l;n[s]=c;r[s]=l;let f=o;let d=0;while(f!==s){d+=n[f++];f%=e;}s=(s+1)%e;if(s===o)o=(o+1)%e;if(l-i<t)return;const h=u&&l-u;return h?Math.round(d*1e3/h):void 0}}function on(e,t){let n=0;let r=1e3/t;let s;let o;const i=(t,r=Date.now())=>{n=r;s=null;if(o){clearTimeout(o);o=null;}e.apply(null,t);};const a=(...e)=>{const t=Date.now();const a=t-n;if(a>=r)i(e,t);else {s=e;if(!o)o=setTimeout((()=>{o=null;i(s);}),r-a);}};const c=()=>s&&i(s);return [a,c]}const an=(e,t,n=3)=>{let r=0;const s=sn(50,250);return on((n=>{const o=n.loaded;const i=n.lengthComputable?n.total:void 0;const a=o-r;const c=s(a);const l=o<=i;r=o;const u={loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:c?c:void 0,estimated:c&&i&&l?(i-o)/c:void 0,event:n,lengthComputable:i!=null,[t?"download":"upload"]:true};e(u);}),n)};const cn=(e,t)=>{const n=e!=null;return [r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]};const ln=e=>(...t)=>at.asap((()=>e(...t)));const un=Ut.hasStandardBrowserEnv?((e,t)=>n=>{n=new URL(n,Ut.origin);return e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)})(new URL(Ut.origin),Ut.navigator&&/(msie|trident)/i.test(Ut.navigator.userAgent)):()=>true;const fn=Ut.hasStandardBrowserEnv?{write(e,t,n,r,s,o){const i=[e+"="+encodeURIComponent(t)];at.isNumber(n)&&i.push("expires="+new Date(n).toGMTString());at.isString(r)&&i.push("path="+r);at.isString(s)&&i.push("domain="+s);o===true&&i.push("secure");document.cookie=i.join("; ");},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5);}}:{write(){},read(){return null},remove(){}};function dn(e){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function hn(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function pn(e,t,n){let r=!dn(t);if(e&&r||n==false)return hn(e,t);return t}const mn=e=>e instanceof Yt?{...e}:e;function yn(e,t){t=t||{};const n={};function r(e,t,n,r){if(at.isPlainObject(e)&&at.isPlainObject(t))return at.merge.call({caseless:r},e,t);else if(at.isPlainObject(t))return at.merge({},t);else if(at.isArray(t))return t.slice();return t}function s(e,t,n,s){if(!at.isUndefined(t))return r(e,t,n,s);else if(!at.isUndefined(e))return r(void 0,e,n,s)}function o(e,t){if(!at.isUndefined(t))return r(void 0,t)}function i(e,t){if(!at.isUndefined(t))return r(void 0,t);else if(!at.isUndefined(e))return r(void 0,e)}function a(n,s,o){if(o in t)return r(n,s);else if(o in e)return r(void 0,n)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(e,t,n)=>s(mn(e),mn(t),n,true)};at.forEach(Object.keys(Object.assign({},e,t)),(function r(o){const i=c[o]||s;const l=i(e[o],t[o],o);at.isUndefined(l)&&i!==a||(n[o]=l);}));return n}const gn=e=>{const t=yn({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:a}=t;t.headers=i=Yt.from(i);t.url=St(pn(t.baseURL,t.url),e.params,e.paramsSerializer);if(a)i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(at.isFormData(n))if(Ut.hasStandardBrowserEnv||Ut.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==false){const[e,...t]=c?c.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "));}if(Ut.hasStandardBrowserEnv){r&&at.isFunction(r)&&(r=r(t));if(r||r!==false&&un(t.url)){const e=s&&o&&fn.read(o);if(e)i.set(s,e);}}return t};const wn=typeof XMLHttpRequest!=="undefined";const bn=wn&&function(e){return new Promise((function t(n,r){const s=gn(e);let o=s.data;const i=Yt.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=s;let u;let f,d;let h,p;function m(){h&&h();p&&p();s.cancelToken&&s.cancelToken.unsubscribe(u);s.signal&&s.signal.removeEventListener("abort",u);}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,true);y.timeout=s.timeout;function g(){if(!y)return;const t=Yt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders());const s=!a||a==="text"||a==="json"?y.responseText:y.response;const o={data:s,status:y.status,statusText:y.statusText,headers:t,config:e,request:y};nn((function e(t){n(t);m();}),(function e(t){r(t);m();}),o);y=null;}if("onloadend"in y)y.onloadend=g;else y.onreadystatechange=function e(){if(!y||y.readyState!==4)return;if(y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0))return;setTimeout(g);};y.onabort=function t(){if(!y)return;r(new ct("Request aborted",ct.ECONNABORTED,e,y));y=null;};y.onerror=function t(){r(new ct("Network Error",ct.ERR_NETWORK,e,y));y=null;};y.ontimeout=function t(){let n=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const o=s.transitional||Rt;if(s.timeoutErrorMessage)n=s.timeoutErrorMessage;r(new ct(n,o.clarifyTimeoutError?ct.ETIMEDOUT:ct.ECONNABORTED,e,y));y=null;};o===void 0&&i.setContentType(null);if("setRequestHeader"in y)at.forEach(i.toJSON(),(function e(t,n){y.setRequestHeader(n,t);}));if(!at.isUndefined(s.withCredentials))y.withCredentials=!!s.withCredentials;if(a&&a!=="json")y.responseType=s.responseType;if(l){[d,p]=an(l,true);y.addEventListener("progress",d);}if(c&&y.upload){[f,h]=an(c);y.upload.addEventListener("progress",f);y.upload.addEventListener("loadend",h);}if(s.cancelToken||s.signal){u=t=>{if(!y)return;r(!t||t.type?new tn(null,e,y):t);y.abort();y=null;};s.cancelToken&&s.cancelToken.subscribe(u);if(s.signal)s.signal.aborted?u():s.signal.addEventListener("abort",u);}const w=rn(s.url);if(w&&Ut.protocols.indexOf(w)===-1){r(new ct("Unsupported protocol "+w+":",ct.ERR_BAD_REQUEST,e));return}y.send(o||null);}))};const En=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n=new AbortController;let r;const s=function(e){if(!r){r=true;i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof ct?t:new tn(t instanceof Error?t.message:t));}};let o=t&&setTimeout((()=>{o=null;s(new ct(`timeout ${t} of ms exceeded`,ct.ETIMEDOUT));}),t);const i=()=>{if(e){o&&clearTimeout(o);o=null;e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s);}));e=null;}};e.forEach((e=>e.addEventListener("abort",s)));const{signal:a}=n;a.unsubscribe=()=>at.asap(i);return a}};const vn=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0;let s;while(r<n){s=r+t;yield e.slice(r,s);r=s;}};const Sn=async function*(e,t){for await(const n of On(e))yield*vn(n,t);};const On=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n;}}finally{await t.cancel();}};const Rn=(e,t,n,r)=>{const s=Sn(e,t);let o=0;let i;let a=e=>{if(!i){i=true;r&&r(e);}};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t){a();e.close();return}let i=r.byteLength;if(n){let e=o+=i;n(e);}e.enqueue(new Uint8Array(r));}catch(t){a(t);throw t}},cancel(e){a(e);return s.return()}},{highWaterMark:2})};const _n=typeof fetch==="function"&&typeof Request==="function"&&typeof Response==="function";const An=_n&&typeof ReadableStream==="function";const Tn=_n&&(typeof TextEncoder==="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer()));const xn=(e,...t)=>{try{return !!e(...t)}catch(n){return false}};const kn=An&&xn((()=>{let e=false;const t=new Request(Ut.origin,{body:new ReadableStream,method:"POST",get duplex(){e=true;return "half"}}).headers.has("Content-Type");return e&&!t}));const Cn=64*1024;const jn=An&&xn((()=>at.isReadableStream(new Response("").body)));const Pn={stream:jn&&(e=>e.body)};_n&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!Pn[t]&&(Pn[t]=at.isFunction(e[t])?e=>e[t]():(e,n)=>{throw new ct(`Response type '${t}' is not supported`,ct.ERR_NOT_SUPPORT,n)});}));})(new Response);const Ln=async e=>{if(e==null)return 0;if(at.isBlob(e))return e.size;if(at.isSpecCompliantForm(e)){const t=new Request(Ut.origin,{method:"POST",body:e});return (await t.arrayBuffer()).byteLength}if(at.isArrayBufferView(e)||at.isArrayBuffer(e))return e.byteLength;if(at.isURLSearchParams(e))e+="";if(at.isString(e))return (await Tn(e)).byteLength};const Nn=async(e,t)=>{const n=at.toFiniteNumber(e.getContentLength());return n==null?Ln(t):n};const Un=_n&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:f="same-origin",fetchOptions:d}=gn(e);l=l?(l+"").toLowerCase():"text";let h=En([s,o&&o.toAbortSignal()],i);let p;const m=h&&h.unsubscribe&&(()=>{h.unsubscribe();});let y;try{if(c&&kn&&n!=="get"&&n!=="head"&&(y=await Nn(u,r))!==0){let e=new Request(t,{method:"POST",body:r,duplex:"half"});let n;if(at.isFormData(r)&&(n=e.headers.get("content-type")))u.setContentType(n);if(e.body){const[t,n]=cn(y,an(ln(c)));r=Rn(e.body,Cn,t,n);}}if(!at.isString(f))f=f?"include":"omit";const s="credentials"in Request.prototype;p=new Request(t,{...d,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:s?f:void 0});let o=await fetch(p);const i=jn&&(l==="stream"||l==="response");if(jn&&(a||i&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t];}));const t=at.toFiniteNumber(o.headers.get("content-length"));const[n,r]=a&&cn(t,an(ln(a),true))||[];o=new Response(Rn(o.body,Cn,n,(()=>{r&&r();m&&m();})),e);}l=l||"text";let g=await Pn[at.findKey(Pn,l)||"text"](o,e);!i&&m&&m();return await new Promise(((t,n)=>{nn(t,n,{data:g,headers:Yt.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p});}))}catch(g){m&&m();if(g&&g.name==="TypeError"&&/fetch/i.test(g.message))throw Object.assign(new ct("Network Error",ct.ERR_NETWORK,e,p),{cause:g.cause||g});throw ct.from(g,g&&g.code,e,p)}});const Dn={http:ft,xhr:bn,fetch:Un};at.forEach(Dn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t});}catch(n){}Object.defineProperty(e,"adapterName",{value:t});}}));const Bn=e=>`- ${e}`;const Fn=e=>at.isFunction(e)||e===null||e===false;const Mn={getAdapter:e=>{e=at.isArray(e)?e:[e];const{length:t}=e;let n;let r;const s={};for(let o=0;o<t;o++){n=e[o];let t;r=n;if(!Fn(n)){r=Dn[(t=String(n)).toLowerCase()];if(r===void 0)throw new ct(`Unknown adapter '${t}'`)}if(r)break;s[t||"#"+o]=r;}if(!r){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(t===false?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(Bn).join("\n"):" "+Bn(e[0]):"as no adapter specified";throw new ct(`There is no suitable adapter to dispatch the request `+n,"ERR_NOT_SUPPORT")}return r},adapters:Dn};function qn(e){if(e.cancelToken)e.cancelToken.throwIfRequested();if(e.signal&&e.signal.aborted)throw new tn(null,e)}function In(e){qn(e);e.headers=Yt.from(e.headers);e.data=Zt.call(e,e.transformRequest);if(["post","put","patch"].indexOf(e.method)!==-1)e.headers.setContentType("application/x-www-form-urlencoded",false);const t=Mn.getAdapter(e.adapter||It.adapter);return t(e).then((function t(n){qn(e);n.data=Zt.call(e,e.transformResponse,n);n.headers=Yt.from(n.headers);return n}),(function t(n){if(!en(n)){qn(e);if(n&&n.response){n.response.data=Zt.call(e,e.transformResponse,n.response);n.response.headers=Yt.from(n.response.headers);}}return Promise.reject(n)}))}const zn="1.8.1";const Wn={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Wn[e]=function n(r){return typeof r===e||"a"+(t<1?"n ":" ")+e};}));const $n={};Wn.transitional=function e(t,n,r){function s(e,t){return "[Axios v"+zn+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return (e,r,o)=>{if(t===false)throw new ct(s(r," has been removed"+(n?" in "+n:"")),ct.ERR_DEPRECATED);if(n&&!$n[r]){$n[r]=true;console.warn(s(r," has been deprecated since v"+n+" and will be removed in the near future"));}return t?t(e,r,o):true}};Wn.spelling=function e(t){return (e,n)=>{console.warn(`${n} is likely a misspelling of ${t}`);return true}};function Vn(e,t,n){if(typeof e!=="object")throw new ct("options must be an object",ct.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;while(s-- >0){const o=r[s];const i=t[o];if(i){const t=e[o];const n=t===void 0||i(t,o,e);if(n!==true)throw new ct("option "+o+" must be "+n,ct.ERR_BAD_OPTION_VALUE);continue}if(n!==true)throw new ct("Unknown option "+o,ct.ERR_BAD_OPTION)}}const Hn={assertOptions:Vn,validators:Wn};const Jn=Hn.validators;let Kn=class e{constructor(e){this.defaults=e;this.interceptors={request:new Ot,response:new Ot};}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{if(!n.stack)n.stack=t;else if(t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,"")))n.stack+="\n"+t;}catch(r){}}throw n}}_request(e,t){if(typeof e==="string"){t=t||{};t.url=e;}else t=e||{};t=yn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;if(n!==void 0)Hn.assertOptions(n,{silentJSONParsing:Jn.transitional(Jn.boolean),forcedJSONParsing:Jn.transitional(Jn.boolean),clarifyTimeoutError:Jn.transitional(Jn.boolean)},false);if(r!=null)if(at.isFunction(r))t.paramsSerializer={serialize:r};else Hn.assertOptions(r,{encode:Jn.function,serialize:Jn.function},true);if(t.allowAbsoluteUrls!==void 0);else if(this.defaults.allowAbsoluteUrls!==void 0)t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls;else t.allowAbsoluteUrls=true;Hn.assertOptions(t,{baseUrl:Jn.spelling("baseURL"),withXsrfToken:Jn.spelling("withXSRFToken")},true);t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&at.merge(s.common,s[t.method]);s&&at.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e];}));t.headers=Yt.concat(o,s);const i=[];let a=true;this.interceptors.request.forEach((function e(n){if(typeof n.runWhen==="function"&&n.runWhen(t)===false)return;a=a&&n.synchronous;i.unshift(n.fulfilled,n.rejected);}));const c=[];this.interceptors.response.forEach((function e(t){c.push(t.fulfilled,t.rejected);}));let l;let u=0;let f;if(!a){const e=[In.bind(this),void 0];e.unshift.apply(e,i);e.push.apply(e,c);f=e.length;l=Promise.resolve(t);while(u<f)l=l.then(e[u++],e[u++]);return l}f=i.length;let d=t;u=0;while(u<f){const e=i[u++];const t=i[u++];try{d=e(d);}catch(h){t.call(this,h);break}}try{l=In.call(this,d);}catch(h){return Promise.reject(h)}u=0;f=c.length;while(u<f)l=l.then(c[u++],c[u++]);return l}getUri(e){e=yn(this.defaults,e);const t=pn(e.baseURL,e.url,e.allowAbsoluteUrls);return St(t,e.params,e.paramsSerializer)}};at.forEach(["delete","get","head","options"],(function e(t){Kn.prototype[t]=function(e,n){return this.request(yn(n||{},{method:t,url:e,data:(n||{}).data}))};}));at.forEach(["post","put","patch"],(function e(t){function n(e){return function n(r,s,o){return this.request(yn(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Kn.prototype[t]=n();Kn.prototype[t+"Form"]=n(true);}));let Gn=class e{constructor(e){if(typeof e!=="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function e(n){t=n;}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;while(t-- >0)n._listeners[t](e);n._listeners=null;}));this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e);t=e;})).then(e);r.cancel=function e(){n.unsubscribe(t);};return r};e((function e(r,s,o){if(n.reason)return;n.reason=new tn(r,s,o);t(n.reason);}));}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}if(this._listeners)this._listeners.push(e);else this._listeners=[e];}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);if(t!==-1)this._listeners.splice(t,1);}toAbortSignal(){const e=new AbortController;const t=t=>{e.abort(t);};this.subscribe(t);e.signal.unsubscribe=()=>this.unsubscribe(t);return e.signal}static source(){let t;const n=new e((function e(n){t=n;}));return {token:n,cancel:t}}};function Xn(e){return function t(n){return e.apply(null,n)}}function Qn(e){return at.isObject(e)&&e.isAxiosError===true}const Yn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yn).forEach((([e,t])=>{Yn[t]=e;}));function Zn(e){const t=new Kn(e);const n=re(Kn.prototype.request,t);at.extend(n,Kn.prototype,t,{allOwnKeys:true});at.extend(n,t,null,{allOwnKeys:true});n.create=function t(n){return Zn(yn(e,n))};return n}const er=exports("e", Zn(It));er.Axios=Kn;er.CanceledError=tn;er.CancelToken=Gn;er.isCancel=en;er.VERSION=zn;er.toFormData=gt;er.AxiosError=ct;er.Cancel=er.CanceledError;er.all=function e(t){return Promise.all(t)};er.spread=Xn;er.isAxiosError=Qn;er.mergeConfig=yn;er.AxiosHeaders=Yt;er.formToJSON=e=>Mt(at.isHTMLForm(e)?new FormData(e):e);er.getAdapter=Mn.getAdapter;er.HttpStatusCode=Yn;er.default=er;const{Axios:tr,AxiosError:nr,CanceledError:rr,isCancel:sr,CancelToken:or,VERSION:ir,all:ar,Cancel:cr,isAxiosError:lr,spread:ur,toFormData:fr,AxiosHeaders:dr,HttpStatusCode:hr,formToJSON:pr,getAdapter:mr,mergeConfig:yr}=er;const gr=exports("g", e=>new Promise((t=>setTimeout(t,e))));const wr=exports("w", (e,t=300,n=false)=>{let r=null;let s=null;let o=new AbortController;const i=function(...i){s=i;o.abort();o=new AbortController;if(n&&!r)e.apply(this,i);r=setTimeout((()=>{if(!n)e.apply(this,s);r=null;}),t);o.signal.addEventListener("abort",(()=>{clearTimeout(r);r=null;}));};i.cancel=()=>o.abort();return i});const br=exports("b", ()=>{const{host:e,pathname:t,origin:n}=window.location;if(t.startsWith("/video/")||t.startsWith("/bangumi/"))return "video";if(e==="www.bilibili.com"&&t==="/")return "home";if(n==="https://t.bilibili.com")return "dynamic";return "other"});const Er=exports("E", (e,t)=>{let n=e.offsetWidth;let r=e.offsetHeight;const s=new ResizeObserver((e=>{for(const s of e)if(s.contentBoxSize){const e=s.target.offsetWidth;const o=s.target.offsetHeight;if(e!==n||o!==r){n=e;r=o;t==null?void 0:t(true,{width:e,height:o});}else t==null?void 0:t(false);}}));s.observe(e);return s});const vr=exports("v", (e,t={})=>{const{maxRetries:n=3,retryDelay:r=300,tolerance:s=2}=t;return new Promise(((t,o)=>{let i=0;const a=async()=>{try{window.scrollTo({top:e,behavior:"instant"});await new Promise((e=>setTimeout(e,200)));const c=window.scrollY;const l=e;const u=c===l||Math.abs(c-l)<=s||e===-5;if(u)t();else if(i<n){i++;setTimeout(a,r*2**(i-1));}else o(new Error(`Failed to scroll after ${n} attempts`));}catch(c){o(c);}};a();}))});const Sr=exports("S", e=>{const t=e.getBoundingClientRect();return t.top+window.scrollY-parseFloat(getComputedStyle(e).marginTop)});const Or=exports("O", (e,t)=>{const n=window.getComputedStyle(e);if(Array.isArray(t))return t.reduce(((e,t)=>{e[t]=n.getPropertyValue(t);return e}),{});if(typeof t==="string")return n.getPropertyValue(t);return Array.from(n).reduce(((e,t)=>{e[t]=n.getPropertyValue(t);return e}),{})});const Rr=exports("R", (e,t,n,r={})=>{const s=Array.isArray(e)?e:[e];if(typeof r!=="object")throw new Error("Options must be an object or undefined");s.forEach((e=>{e.addEventListener(t,n,r);}));return ()=>{s.forEach((e=>{e.removeEventListener(t,n,r);}));}});const _r=e=>e.constructor.name==="AsyncFunction";const Ar=exports("A", e=>{if(e.length>0){const t=e.shift();if(_r(t))t().then((t=>{if(t){const{callback:e}=t;if(e&&Array.isArray(e))Ar(e);}Ar(e);})).catch((e=>{console.log(e);}));else t();}});const Tr=exports("T", ()=>{let e=true;const t=(()=>{const e=["","webkit","ms","moz"];for(const t of e){const e=t?`${t}Hidden`:"hidden";if(e in document)return {event:t?`${t}visibilitychange`:"visibilitychange",state:t?`${t}VisibilityState`:"visibilityState"}}return null})();if(t){const n=()=>{e=document[t.state]==="visible";};document.addEventListener(t.event,n,{passive:true});return ()=>{document.removeEventListener(t.event,n,{passive:true});return e}}else {const t=()=>{e=true;};const n=()=>{e=false;};window.addEventListener("focus",t,{passive:true});window.addEventListener("blur",n,{passive:true});e=document.hasFocus();return ()=>{window.removeEventListener("focus",t,{passive:true});window.removeEventListener("blur",n,{passive:true});return e}}});const xr=exports("x", e=>{const t=e=>{const t=new URL(e);const n=t.searchParams.get("p");return `${t.href.split("?")[0].trim()}${n?`?p=${n}`:""}`.replace(/\/+$/,"")};let n=location.href;let r=t(n);const s=()=>{const s=location.href;const o=t(s);if(o!==r){n=s;r=t(n);try{e();}catch(i){console.error("Href change callback error:",i);}}};const o={passive:true};const i=history.pushState;const a=history.replaceState;const c=()=>{window.addEventListener("hashchange",s,o);window.addEventListener("popstate",s,o);history.pushState=function(...e){const t=i.apply(this,e);s();return t};history.replaceState=function(...e){const t=a.apply(this,e);s();return t};};const l=()=>{window.removeEventListener("hashchange",s,o);window.removeEventListener("popstate",s,o);history.pushState=i;history.replaceState=a;};c();return l});const kr=exports("k", (e,t,n)=>{const r=document.createElement("template");r.innerHTML=e.trim();const s=r.content;const o=s.cloneNode(true);const i=[...o.children];t[n](o);return i.length>1?i:i[0]});const Cr=exports("C", e=>{const t=e.split(":");if(t.length===1)return parseInt(t[0],10);else if(t.length===2){const[e,n]=t.map(Number);return e*60+n}else if(t.length===3){const[e,n,r]=t.map(Number);return e*3600+n*60+r}return 0});const jr=exports("j", e=>{if(typeof e==="object"&&!Array.isArray(e))for(const[t,n]of Object.entries(e)){let e=document.getElementById(t);if(!n){if(e)e.remove();continue}if(!e){e=document.createElement("style");e.id=t;document.head.append(e);}e.textContent=n;}else throw new Error("Invalid argument type. Expected an object.")});const Pr=exports("P", ()=>{const e=document.body.clientHeight||0;const t=document.documentElement.clientHeight||0;return e<t?e:t});const Lr=exports("L", e=>e.replace(/(?:^|\.?)([A-Z])/g,((e,t)=>"_"+t.toLowerCase())).replace(/^_/,""));const Nr=async()=>{try{console.log("开始请求最新的脚本");const e=await er.get("https://cdn.jsdelivr.net/gh/QIUZAIYOU/Bilibili-Adjustment-Dev@main/dist/bilibili-adjustment.user.js",{responseType:"text"});console.log("成功获取最新的脚本");return e.data}catch(e){console.log("Failed to fetch the latest script:",e);if(e.response){console.log("服务器响应:",e.response.data);console.log("状态码:",e.response.status);console.log("请求头:",e.response.headers);}else if(e.request)console.log("请求信息:",e.request);else console.log("错误信息:",e.message);console.log("配置信息:",e.config);return null}};const Ur=e=>{const t=e.match(/\/\/\s*@version\s*([\d.]+)/);if(t&&t[1])return t[1];return null};const Dr=(e,t)=>{const n=e.split(".").map(Number);const r=t.split(".").map(Number);for(let s=0;s<Math.max(n.length,r.length);s++){const e=n[s]||0;const t=r[s]||0;if(t>e)return true;else if(t<e)return false}return false};const Br=async e=>{const t=await Nr();if(!t)return;const n=Ur(t);if(!n){console.error("Failed to extract version from the latest script");return}if(Dr(e,n))alert(`A new version (${n}) is available. Please update to the latest version.`);};const Fr="2.2.1";const Mr={version:Fr};const qr=new W("Main");Br(Mr.version).then((()=>{Z.initialize().then((()=>{qr.debug("ConfigService 初始化完成");return br()})).then((e=>{qr.debug(`页面类型: ${e}`);const t={video:()=>q((()=>module.import('./video.module-CNuvGt6M-DGf3Qt4K.js')),void 0),home:()=>q((()=>module.import('./home.module-Bg15KL8Z-A7aEvGbK.js')),void 0),dynamic:()=>q((()=>module.import('./dynamic.module-CSPBKJD5-CfBhDl8K.js')),void 0)};if(t[e])return t[e]().then((e=>{const t=e.default;qr.debug(`注册模块: ${t.name}`);ne.register(t);}));else qr.error(`No module found for type: ${e}`);})).then((()=>ne.init())).then((()=>{qr.info("应用初始化完成");H.emit("app:ready");})).catch((e=>{qr.error("应用初始化失败",e);}));})).catch((e=>{qr.error("检查更新失败",e);}));

		})
	};
}));

System.register("./video.module-CNuvGt6M-DGf3Qt4K.js", ['./__monkey.entry-_VCtn1Is.js', './regexps-CYJsJudb-B6_X37vw.js', './templates-p92U0-zb-yA85xlV-.js', './biliApis-NsIWQQZH-6R2uCkdV.js'], (function (exports, module) {
	'use strict';
	var Ar, kr, Rr, jr, Pr, W, H, gr, Cr, Or, Sr, vr, Y, Er, xr, wr, Tr, u$1, r$1, a$1, c$1, d$1, o$1, m$1;
	return {
		setters: [module => {
			Ar = module.A;
			kr = module.k;
			Rr = module.R;
			jr = module.j;
			Pr = module.P;
			W = module.W;
			H = module.H;
			gr = module.g;
			Cr = module.C;
			Or = module.O;
			Sr = module.S;
			vr = module.v;
			Y = module.Y;
			Er = module.E;
			xr = module.x;
			wr = module.w;
			Tr = module.T;
		}, module => {
			u$1 = module.u;
			r$1 = module.r;
		}, module => {
			a$1 = module.a;
			c$1 = module.c;
			d$1 = module.d;
			o$1 = module.o;
		}, module => {
			m$1 = module.m;
		}],
		execute: (function () {

			var e=e=>{throw TypeError(e)};var t=(t,o,i)=>o.has(t)||e("Cannot "+i);var o=(e,o,i)=>(t(e,o,"read from private field"),i?i.call(e):o.get(e));var i=(t,o,i)=>o.has(t)?e("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(t):o.set(t,i);var n=(e,o,i,n)=>(t(e,o,"write to private field"),o.set(e,i),i);var a=(e,o,i)=>(t(e,o,"access private method"),i);var s,r,l,c,u,d,h,p,f,y,m,w,g,v,S,b,C,E,T,k,_,M,P,R,N;const te=class e{static init(){var t;if(this.initialized)return;if((t=Element.prototype.attachShadow)==null?void 0:t.__monkeyPatched)return;const i=Element.prototype.attachShadow;Element.prototype.attachShadow=function(t){const n=i.call(this,t);o(e,s).set(this,n);return n};Element.prototype.attachShadow.__monkeyPatched=true;this.initialized=true;a(this,d,h).call(this);}static getShadowRoot(e){return e.shadowRoot??o(this,s).get(e)??null}static querySelector(e,t){return a(this,d,f).call(this,e,t,false)[0]||null}static querySelectorAll(e,t){return a(this,d,f).call(this,e,t,true)}static batchQuery(e,t,o={}){const{deconstruct:i=false}=o;const n={};const a=Object.entries(t);a.forEach((([t,o])=>{n[t]=this.querySelectorAll(e,o);}));return i?n:[...new Set(Object.values(n).flat())]}static watchQuery(e,t,i,s={}){const{nodeNameFilter:l,checkHostTree:u=true,observeExisting:h=true,debounce:p=50,maxRetries:f=3,scanInterval:y=0,allowReprocess:w=false}=s;if(!l&&!t)throw new Error("必须提供 selector 或 nodeNameFilter");const v=new MutationObserver(a(this,d,k).call(this,p,(o=>{o.flatMap((e=>[...e.addedNodes])).forEach((o=>a(this,d,g).call(this,o,e,t,i,{nodeNameFilter:l,checkHostTree:u,maxRetries:f,allowReprocess:w})));})));let S;if(y>0)S=setInterval((()=>{a(this,d,m).call(this,e,t,i,{nodeNameFilter:l,checkHostTree:u,allowReprocess:w});}),y);const b=()=>{v.disconnect();S&&clearInterval(S);o(this,r).delete(e);if(!w)n(this,c,new WeakSet);};o(this,r).set(e,{observer:v,callback:i,cleanup:b});v.observe(this.getShadowRoot(e)??e,{childList:true,subtree:true});if(h)a(this,d,m).call(this,e,t,i,{nodeNameFilter:l,checkHostTree:u,allowReprocess:w});return b}static addStyle(e,t,o,i={}){const{isolate:n=true,mode:s="append",priority:r="low"}=i;const l=this.querySelectorAll(e,t);if(l.length===0)return false;const c=a(this,d,E).call(this,o);l.forEach((e=>{const t=a(this,d,M).call(this,e,n);const o=n?`[${t.dataset.uniqueAttr}] { ${c} }`:c;a(this,d,b).call(this,t,o,s,r);}));return true}static debugQuery(e,t){console.groupCollapsed("[ShadowDOMHelper] 查询路径调试");const o=this.querySelector(e,t);const i=a(this,d,C).call(this,t);i.forEach(((e,t)=>{console.group(`层级 ${t+1}: ${e.isShadow?"Shadow":"DOM"} 选择器 "${e.selector}"`);console.info("上下文元素:",e.contexts);console.info("匹配元素:",e.results);console.groupEnd();}));console.info("最终结果:",o);console.groupEnd();return o}static debugShadowRoot(e){var t,o;console.groupCollapsed("[ShadowDOMHelper] ShadowRoot 诊断");try{const i=this.getShadowRoot(e);console.info("宿主:",e);console.info("模式:",e.shadowRoot?"open":"closed");console.info("内容摘要:",((t=i==null?void 0:i.innerHTML)==null?void 0:t.slice(0,200))+(((o=i==null?void 0:i.innerHTML)==null?void 0:o.length)>200?"...":""));}catch(i){console.error("诊断失败:",i);}console.groupEnd();}static async queryUntil(e,t,o={}){const{timeout:i=1e3,findAll:n=false,interval:a=50}=o;let s=0;const r=Date.now();while(s<i){const o=n?this.querySelectorAll(e,t):this.querySelector(e,t);if(n?o.length>0:o)return o;await new Promise((e=>setTimeout(e,a)));s=Date.now()-r;}return null}};s=new WeakMap;r=new WeakMap;l=new WeakMap;c=new WeakMap;u=new WeakMap;d=new WeakSet;h=function(){const e=document.createTreeWalker(document.documentElement,NodeFilter.SHOW_ELEMENT);let t;while(t=e.nextNode())if(t.shadowRoot&&!o(this,s).has(t))o(this,s).set(t,t.shadowRoot);};p=function(e){return e.nodeType===Node.ELEMENT_NODE&&e.namespaceURI==="http://www.w3.org/1999/xhtml"};f=function(e,t,o){a(this,d,P).call(this,t);const i=a(this,d,C).call(this,t);let n=[e];for(const s of i){const e=[];for(const t of n){if(!a(this,d,p).call(this,t))break;const o=a(this,d,y).call(this,t,s);o.forEach((t=>{try{const o=this.getShadowRoot(t);const i=(o==null?void 0:o.querySelectorAll(s.selector))??t.querySelectorAll(s.selector);e.push(...i);}catch(o){console.error(`选择器错误: "${s.selector}"`,o);throw o}}));}n=[...new Set(e)];if(!o&&n.length===0)break}return o?n:n.slice(0,1)};y=function(e,t){const o=[];if(t.isShadow){const t=a(this,d,v).call(this,e);o.push(e,...t);}else o.push(e);return o};m=function(e,t,o,i){const{nodeNameFilter:n,checkHostTree:s,allowReprocess:r}=i;const l=i=>{const l=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{if(!a(this,d,p).call(this,e))return NodeFilter.FILTER_REJECT;if(a(this,d,R).call(this,e,r))return NodeFilter.FILTER_REJECT;const o=n&&e.nodeName===n.toUpperCase();const i=t&&e.matches(t);return o||i?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let c;while(c=l.nextNode()){if(s&&!a(this,d,T).call(this,c,e))continue;a(this,d,N).call(this,c);a(this,d,_).call(this,o,c);}};l(e.shadowRoot??e);a(this,d,w).call(this,e).forEach((e=>l(e)));};w=function(e){const t=new Set;const o=[e];while(o.length>0){const e=o.pop();const i=this.getShadowRoot(e);if(!i)continue;t.add(i);o.push(...i.querySelectorAll("*"));}return [...t]};g=function(e,t,o,i,n){const{nodeNameFilter:s,allowReprocess:r}=n;if(!a(this,d,p).call(this,e))return;if(a(this,d,R).call(this,e,r))return;a(this,d,N).call(this,e);if(s){if(e.nodeName===s.toUpperCase())a(this,d,_).call(this,i,e);return}if(a(this,d,S).call(this,e,t,o))a(this,d,_).call(this,i,e);};v=function(e){const t=[];const o=[e];while(o.length>0){const e=o.pop();if(!a(this,d,p).call(this,e))continue;const i=this.getShadowRoot(e);if(!i)continue;const n=[...i.childNodes].filter((e=>a(this,d,p).call(this,e)));t.push(...n);o.push(...n);}return t};S=function(e,t,o){try{const i=[...a(this,d,C).call(this,o)].reverse();let n=e;for(const e of i){const t=e.isShadow?n.getRootNode().host:n.parentElement;if(!(t==null?void 0:t.matches(e.selector)))return false;n=t;}return n===t}catch{return false}};b=function(e,t,o,i){if(o==="replace")e.textContent=t;else {const o=i==="high"?"insertBefore":"appendChild";const n=document.createTextNode(t);e[o](n,e.firstChild);}};C=function(e){if(o(this,l).has(e))return o(this,l).get(e);const t=e.split(/(\s*>>\s*|\s*>\s*)/g).map((e=>e.trim())).filter(Boolean);const i=[];let n=false,a="";if(t.length===1&&![">>",">"].includes(t[0]))i.push({selector:t[0],isShadow:true});else {t.forEach((e=>{if(e===">>"){if(a)i.push({selector:a,isShadow:true});a="";n=true;}else if(e===">"){if(a)i.push({selector:a,isShadow:false});a="";n=false;}else a+=e;}));if(a)i.push({selector:a,isShadow:n});}if(o(this,l).size>=o(this,u))o(this,l).delete(o(this,l).keys().next().value);o(this,l).set(e,i);return i};E=function(e){if(typeof e==="string")return e.replace(/^\s*\{|\}\s*$/g,"").replace(/;(\s*})/g,"$1").trim();if(typeof e==="object")return Object.entries(e).map((([e,t])=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t}`)).join("; ");throw new TypeError("样式必须是字符串或对象")};T=function(e,t){var o;let i=e.getRootNode();while(i){if(i===t.getRootNode())return true;i=(o=i.host)==null?void 0:o.getRootNode();}return false};k=function(e,t){let o;return (...i)=>{clearTimeout(o);o=setTimeout((()=>t(...i)),e);}};_=function(e,t){try{(t==null?void 0:t.isConnected)&&e(t);}catch(o){console.error("回调执行失败:",o);}};M=function(e,t){if(!a(this,d,p).call(this,e))return null;const o=this.getShadowRoot(e)??e.attachShadow({mode:"open"});[...o.childNodes].filter((e=>e.nodeType===Node.COMMENT_NODE)).forEach((e=>e.remove()));let i=o.querySelector("style[data-shadow-style]");if(!i){i=document.createElement("style");i.dataset.shadowStyle=true;o.prepend(i);if(t){const t=`s-${Math.random().toString(36).slice(2,8)}`;i.dataset.uniqueAttr=t;e.setAttribute(t,"");}}return i};P=function(e){if(typeof e!=="string"||!e.trim())throw new TypeError("选择器必须是有效的非空字符串")};R=function(e,t){return !t&&o(this,c).has(e)};N=function(e){o(this,c).add(e);};i(te,d);i(te,s,new WeakMap);i(te,r,new WeakMap);i(te,l,new Map);i(te,c,new WeakSet);i(te,u,100);let oe=te;const ie=Object.freeze({querySelector:(e,t)=>oe.querySelector(e,t),querySelectorAll:(e,t)=>oe.querySelectorAll(e,t),batchQuery:(e,t,o)=>oe.batchQuery(e,t,o),watchQuery:(e,t,o,i)=>oe.watchQuery(e,t,o,i),addStyle:(e,t,o,i)=>oe.addStyle(e,t,o,i),queryUntil:(e,t,o)=>oe.queryUntil(e,t,o),debugQuery:(e,t)=>oe.debugQuery(e,t),debugShadowRoot:e=>oe.debugShadowRoot(e)});oe.init();const ne=new W("VideoModule");const ae=new r$1;const se=exports("default", {name:"video",version:"2.0.0",async install(){jr({BodyOverflowHiddenStyle:d$1.BodyOverflowHidden});H.on("app:ready",(async()=>{ne.info("视频模块｜已加载");await this.preFunctions();}));},async preFunctions(){await Y.legacySet("player_type",location.pathname.startsWith("/video/")?"video":"bangumi");await gr(300);this.userConfigs=await Y.getAll("user");this.registSettings();this.initEventListeners();this.initMonitors();if(Tr()){ne.info("标签页｜已激活");jr({VideoPageAdjustment:d$1.VideoPageAdjustment,VideoSettings:d$1.VideoSettings});this.checkVideoCanplaythrough(await a$1.video);}},async initEventListeners(){H.on("logger:show",((e,{type:t,message:o})=>{ne[t](o);}));H.on("video:canplaythrough",wr(this.autoSelectPlayerMode,true));H.on("video:playerModeSelected",wr(this.autoLocateToPlayer,true));H.once("video:startOtherFunctions",wr(this.handleExecuteFunctionsSequentially,500,true));H.once("video:webfullPlayerModeUnlock",wr(this.insertLocateToCommentButton,500,true));},async registSettings(){await ae.init(this.userConfigs);},initMonitors(){xr((()=>{ne.info("视频资源丨链接已改变");this.handleHrefChangedFunctionsSequentially();}));},isVideoCanplaythrough(e){return new Promise((t=>{if((e==null?void 0:e.readyState)>=HTMLMediaElement.HAVE_ENOUGH_DATA)return t(true);const o=new AbortController;const i=()=>{if(e.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA){o.abort();t(true);}};const n=["canplaythrough","loadeddata"];n.forEach((t=>e.addEventListener(t,i,{signal:o.signal})));}))},async checkVideoCanplaythrough(e,t=true){const o=await this.isVideoCanplaythrough(e);if(o){if(t)H.emit("video:canplaythrough");ne.info("视频资源｜可以播放");return true}},async autoSelectPlayerMode(){var e;const t=[{type:"wide",action:async()=>{const e=await a$1.playerModeWideEnterButton;e.click();}},{type:"web",action:async()=>{const e=await a$1.playerModeWebEnterButton;e.click();}},{type:"normal",action:async()=>{ne.info("屏幕模式丨功能已关闭");H.emit("video:playerModeSelected");}}];(e=t.find((e=>e.type===this.userConfigs.selected_player_mode)))==null?void 0:e.action();await gr(350);if(this.userConfigs.selected_player_mode!=="normal"){const e=await a$1.video;const t=await this.isPlayerModeSwitchSuccess(this.userConfigs.selected_player_mode,e);if(t){ne.info(`屏幕模式丨${this.userConfigs.selected_player_mode==="wide"?"宽屏":"网页全屏"}丨切换成功`);H.emit("video:playerModeSelected");}}},async isPlayerModeSwitchSuccess(e,t){const o=await a$1.playerContainer;await Y.legacySet("player_offset_top",await Sr(o));const i=o.getAttribute("data-screen");ne.debug(`屏幕模式丨当前模式：${i}，目标模式：${e}`);if(i===e)return true;const n=Er(t,(async(t,i)=>{if(t){const t=o.getAttribute("data-screen");if(t===e){n.disconnect();return true}}}));this.autoSelectPlayerMode();},async autoLocateToPlayer(){jr({BodyOverflowHiddenStyle:""});if(this.userConfigs.webfull_unlock||this.userConfigs.player_type==="web"){H.emit("video:startOtherFunctions");return}if(!this.userConfigs.auto_locate){ne.info("自动定位丨功能已关闭");H.emit("video:startOtherFunctions");return}await gr(300);await this.locateToPlayer();ne.info("自动定位丨成功");H.emit("video:startOtherFunctions");},async locateToPlayer(){const e=await a$1.query("playerContainer");const t=e.getAttribute("data-screen");const o=t!=="mini"?await Sr(e):this.userConfigs.player_offset_top;const i=Or(await a$1.headerMini,["position","height"]);const n=i.position==="fixed"?o-parseInt(i.height):o;vr(n-this.userConfigs.offset_top);},async clickPlayerAutoLocate(){if(!this.userConfigs.click_player_auto_locate)return;Rr(await a$1.video,"click",(async()=>{await this.locateToPlayer();}));},handleJumpToVideoTime(e,t){const o=t.dataset.videoTime;if(o>e.duration)alert("当前时间点大于视频总时长，将跳到视频结尾！");e.currentTime=o;e.play();},async clickVideoTimeAutoLocation(){const e=["video","videoCommentRoot"];const[t,o]=await a$1.batch(e);const i=this.userConfigs.player_type==="video"?await ie.querySelectorAll(o,o$1.descriptionVideoTime):[];if(i.length>0)i.forEach((e=>{Rr(e,"click",(async o=>{o.stopPropagation();await this.locateToPlayer();this.handleJumpToVideoTime(t,e);}));}));},async doSomethingToCommentElements(){const e=["video","videoCommentRoot"];const[t,o]=await a$1.batch(e);const i=(e,t)=>{const o=`<div id="location" style="margin-left:5px">${t}</div>`;const i=ie.querySelectorAll(e,o$1.replyPublicDate);queueMicrotask((()=>{i.forEach((e=>{kr(o,e,"after");}));}));};const n=e=>{ie.watchQuery(e,"",(async e=>{i(e,e.data.reply_control.location??"IP属地：未知");}),{nodeNameFilter:"bili-comment-reply-renderer",debounce:100,maxRetries:5,observeExisting:true,scanInterval:1e3});};ie.watchQuery(o,o$1.commentRenderderContainer,(async e=>{const o=ie.batchQuery(e,{videoTime:o$1.videoTime,replyVideoTime:o$1.replyVideoTime});o.forEach((e=>{Rr(e,"click",(async o=>{o.stopPropagation();await this.locateToPlayer();this.handleJumpToVideoTime(t,e);}));}));if(this.userConfigs.show_location){const t=ie.batchQuery(e,{comment:o$1.commentRenderder,replies:o$1.commentRepliesRenderer});t.forEach((e=>{i(e,e.data.reply_control.location??"IP属地：未知");if(e.nodeName.toLowerCase()==="bili-comment-replies-renderer")n(e);}));}}),{nodeNameFilter:"bili-comment-thread-renderer",debounce:100,maxRetries:5,observeExisting:true,scanInterval:1e3});},async autoSelectVideoHighestQuality(){if(!this.userConfigs.auto_select_video_highest_quality)return;const e={127:"8K超清",120:"4K超清",116:"1080P60",112:"1080P高码率",80:"1080P高清",64:"720P高清",32:"480P清晰",16:"360P流畅"};const t=Array.from(await a$1.queryAll("qualitySwitchButtons")).map((e=>({value:+e.dataset.value,element:e,isVIP:e.children.length<2}))).sort(((e,t)=>t.value-e.value));const o=t.filter((e=>this.userConfigs.is_vip?true:e.isVIP));const i=o.find((e=>{if(!this.userConfigs.is_vip)return true;if(this.userConfigs.contain_quality_8k&&e.value===127)return true;if(this.userConfigs.contain_quality_4k&&e.value===120)return true;return e.value<120}));if(i){i.element.click();ne.info(`最高画质｜${this.userConfigs.is_vip?"VIP":"非VIP"}｜${e[i.value]||i.value}｜切换成功`);}},async autoCancelMute(){if(!this.userConfigs.auto_cancel_mute)return;const e=["mutedButton","volumeButton"];const[t,o]=await a$1.batch(e);if(!t||!o)return;const i={muted:Or(t),volume:Or(o)};if(i.muted.display==="block"||i.volume.display==="none"){t.click();ne.info("静音丨已关闭");}},async autoEnableSubtitle(){if(!this.userConfigs.auto_subtitle)return;const e=await a$1.switchSubtitleButton;const t=e.children[0].children[0].children[0].children[1].childElementCount===1;if(!t){e.children[0].children[0].click();ne.info("视频字幕丨已开启");}},async insertSideFloatNavToolsButtons(){const e=this.userConfigs.player_type==="video"?await a$1.videoFloatNav:await a$1.bangumiFloatNav;const t=e.lastChild.attributes[1].name;let o,i;if(this.userConfigs.player_type==="video"){o=kr(c$1.replace("videoLocateButton",{dataV:t}),e.lastChild,"prepend");i=kr(c$1.replace("videoSettingsOpenButton",{dataV:t}),e.lastChild,"prepend");}if(this.userConfigs.player_type==="bangumi"){const t=e.lastChild.lastChild.getAttribute("class");o=kr(c$1.replace("bangumiLocateButton",{floatNavMenuItemClass:t}),e.lastChild,"before");}Rr(o,"click",(async()=>{await this.locateToPlayer();}));Rr(i,"click",(async()=>{const e=await a$1.VideoSettingsPopover;e.showPopover();}));},processVideoCommentDescriptionHtml(e){return e.replace(u$1.video.specialBlank,"%20").replace(u$1.video.nbspToBlank," ").replace(u$1.video.timeString,(e=>`<a data-type="seek" data-video-part="-1" data-video-time="${Cr(e)}">${e}</a>`)).replace(u$1.video.url,(e=>`<a href="${e}" target="_blank">${e}</a>`)).replace(u$1.video.videoId,(e=>`<a href="https://www.bilibili.com/video/${e}" target="_blank">${e}</a>`)).replace(u$1.video.readId,(e=>`<a href="https://www.bilibili.com/read/${e}" target="_blank">${e}</a>`)).replace(u$1.video.blankLine,"")},async insertVideoDescriptionToComment(){if(!this.userConfigs.insert_video_description_to_comment||this.userConfigs.player_type==="bangumi")return;const e=["videoDescription","videoDescriptionInfo","videoCommentRoot"];const[t,o,i]=await a$1.batch(e);const n=setInterval((async()=>{const e=o.baseURI;if(e===location.href){clearInterval(n);const e=await a$1.query("adjustmentCommentDescription");e==null?void 0:e.remove();const a=await ie.queryUntil(i,o$1.commentRenderderContainer);if(t.childElementCount>1&&o.childElementCount>0){const e="//www.asifadeaway.com/Stylish/bilibili/avatar-description.png";const t=document.createElement("template");t.innerHTML=c$1.replace("shadowRootVideoDescriptionReply",{videoCommentDescription:d$1.videoCommentDescription,upAvatarFaceLink:e,processVideoCommentDescription:this.processVideoCommentDescriptionHtml(o.innerHTML)});const n=t.content.cloneNode(true);a==null?void 0:a.prepend(n);await gr(300);if(await ie.querySelector(i,o$1.descriptionRenderer))ne.info("视频简介丨已插入");else this.insertVideoDescriptionToComment();}else {const e=await a$1.videoDescriptionInfo;e.innerHTML=this.processVideoCommentDescriptionHtml(e.innerHTML);ne.info("视频简介丨已替换");}}}),300);},async unlockEpisodeSelector(){const e=await m$1.getVideoInformation(m$1.getCurrentVideoID(window.location.href));const{pages:t=false,ugc_season:o=false}=e.data;if(o||t.length>1){jr({UnlockEpisodeSelectorStyle:d$1.UnlockEpisodeSelector});a$1.each("videoEpisodeListMultiMenuItem",(e=>{Rr(e,"click",(async()=>{await this.locateToPlayer();}));}));}},async webfullPlayerModeUnlock(){if(!this.userConfigs.webfull_unlock||this.userConfigs.selected_player_mode!=="web"||this.userConfigs.player_type==="bangumi")return;const e=["app","playerWrap","player","playerWebscreen","playerModeWideEnterButton","playerModeWideLeaveButton","playerModeWebEnterButton","playerModeWebLeaveButton","playerModeFullControlButton"];const[t,o,i,n,a,s,r,l,c]=await a$1.batch(e);const u=async()=>{jr({UnlockWebPlayerStyle:d$1.UnlockWebPlayer,ResetPlayerLayoutStyle:d$1.ResetPlayerLayout});o.append(i);await Y.set("current_player_mode","wide");await this.locateToPlayer();};jr({UnlockWebPlayerStyle:d$1.UnlockWebPlayer.replace(/BODYHEIGHT/gi,`${Pr()}px`)});t.prepend(n);Rr([l,a,s,c],"click",(async()=>{await gr(100);await u();}));Rr(r,"click",(async()=>{const e=a$1.UnlockWebPlayerStyle;if(!e)jr({UnlockWebPlayerStyle:d$1.UnlockWebPlayer.replace(/BODYHEIGHT/gi,`${Pr()}px`)});t.prepend(n);await this.locateToPlayer();}));ne.info("网页全屏丨已解锁");H.emit("video:webfullPlayerModeUnlock");},async insertLocateToCommentButton(){if(!this.userConfigs.webfull_unlock||this.userConfigs.player_type==="bangumi"||this.userConfigs.selected_player_mode!=="web")return;const e=["playerControllerBottomRight","videoComment"];const[t,o]=await a$1.batch(e);const i=kr(c$1.locateToCommentBtn,t,"append");Rr(i,"click",(async e=>{e.stopPropagation();vr(await Sr(o)-10);}));},async handleHrefChangedFunctionsSequentially(){this.locateToPlayer();const e=[this.insertVideoDescriptionToComment,this.clickVideoTimeAutoLocation,this.doSomethingToCommentElements,this.unlockEpisodeSelector];const t=await this.checkVideoCanplaythrough(await a$1.video,false);if(t)Ar(e);},handleExecuteFunctionsSequentially(){const e=[this.webfullPlayerModeUnlock,this.clickPlayerAutoLocate,this.autoSelectVideoHighestQuality,this.autoCancelMute,this.autoEnableSubtitle,this.insertVideoDescriptionToComment,this.insertSideFloatNavToolsButtons,this.clickVideoTimeAutoLocation,this.doSomethingToCommentElements,this.unlockEpisodeSelector];Ar(e);}});

		})
	};
}));

System.register("./home.module-Bg15KL8Z-A7aEvGbK.js", ['./__monkey.entry-_VCtn1Is.js', './biliApis-NsIWQQZH-6R2uCkdV.js', './templates-p92U0-zb-yA85xlV-.js'], (function (exports, module) {
	'use strict';
	var Ar, Y, kr, Rr, W, Tr, jr, H, gr, m, a, c, d;
	return {
		setters: [module => {
			Ar = module.A;
			Y = module.Y;
			kr = module.k;
			Rr = module.R;
			W = module.W;
			Tr = module.T;
			jr = module.j;
			H = module.H;
			gr = module.g;
		}, module => {
			m = module.m;
		}, module => {
			a = module.a;
			c = module.c;
			d = module.d;
		}],
		execute: (function () {

			const p=new W("VideoModule");const u=exports("default", {name:"home",version:"1.0.0",async install(){H.on("app:ready",(async()=>{p.info("首页模块｜已加载");await this.preFunctions();}));},async preFunctions(){this.userConfigs=await Y.getAll("user");if(Tr()){p.info("标签页｜已激活");jr({IndexAdjustment:d.IndexAdjustment});this.handleExecuteFunctionsSequentially();this.initEventListeners();}},async initEventListeners(){const t=await a.indexRecommendVideoRollButton;Rr(t,"click",(async()=>{Ar([this.setRecordRecommendVideoHistory,this.generatorIndexRecommendVideoHistoryContents]);}));},async setRecordRecommendVideoHistory(){const e=await a.all('.recommended-container_floor-aside .feed-card:nth-child(-n+11):not(:has([class*="-ad"]))');e.forEach((async e=>{const n=e.querySelector("a").href;const i=e.querySelector("h3").title;if(location.host.includes("bilibili.com")&&!n.includes("cm.bilibili.com")){const{data:{tid:e,tid_v2:o,tname:s,tname_v2:a,pic:c}}=await m.getVideoInformation(m.getCurrentVideoID(n));await Y.set("index",i,{title:i,tid:e,tid_v2:o,tname:s,tname_v2:a,url:n,pic:c});}}));p.info("首页视频推荐历史记录｜已开启");},async insertIndexRecommendVideoHistoryPopover(){const e=await a.indexRecommendVideoRollButtonWrapper;const t=c.indexRecommendVideoHistoryOpenButton;const o=c.indexRecommendVideoHistoryPopover;kr(t,e,"append");const s=kr(o,document.body,"append");const a$1=["indexApp","indexRecommendVideoHistoryPopoverTitle"];Rr(s,"toggle",(async e=>{const[t,n]=await a.batch(a$1);if(e.newState==="open"){t.style.pointerEvents="none";this.generatorIndexRecommendVideoHistoryContents();}if(e.newState==="closed"){t.style.pointerEvents="auto";n.querySelector("span").innerText="首页视频推荐历史记录";}}));const c$1=await a.indexRecommendVideoHistoryOpenButton;Rr(c$1,"click",(async()=>{const e=await a.clearRecommendVideoHistoryButton;Rr(e,"click",(async()=>{this.clearRecommendVideoHistory();}));}));},async generatorIndexRecommendVideoHistoryContents(){const e=await Y.getAll("index");const o=await Y.getCount("index");const s=["indexRecommendVideoHistoryPopoverTitleCount","indexRecommendVideoHistoryCategory","indexRecommendVideoHistoryCategoryV2","indexRecommendVideoHistoryList"];const[a$1,c,r,l]=await a.batch(s);c.innerHTML='<li class="all adjustment_button primary plain">全部</li>';r.innerHTML="";l.innerHTML="";a$1.innerText=`首页视频推荐历史记录(${o})`;const y=async e=>{a.each("indexRecommendVideoHistoryCategoryButtons",(e=>{e.classList.remove("active");}));await gr(100);e.classList.add("active");};const p=Array.from(Object.entries(e).reduce(((e,[t,n])=>{const i=`${n.tid}_${n.tname}`;return e.has(i)?e:e.set(i,{tname:n.tname,tid:n.tid})}),new Map).values());const u=Array.from(Object.entries(e).reduce(((e,[t,n])=>{const i=`${n.tid_v2}_${n.tname_v2}`;return e.has(i)?e:e.set(i,{tname_v2:n.tname_v2,tid_v2:n.tid_v2})}),new Map).values());for(const t of p)kr(`<li data-tid="${t.tid}">${t.tname}</li>`,c,"append");for(const t of u)kr(`<li data-tid="${t.tid_v2}">${t.tname_v2}</li>`,r,"append");for(const t of Object.entries(e))kr(`<li><span><img src="${t[1].pic}"></span><a href="${t[1].url}" target="_blank">${t[1].title}</a></li>`,l,"append");a.each("indexRecommendVideoHistoryCategoryButtons",(t=>{Rr(t,"click",(async()=>{y(t);l.innerHTML="";const i=Number(t.dataset.tid);for(const t of Object.entries(e))if([t[1].tid,t[1].tid_v2].includes(i))kr(`<li><span><img src="${t[1].pic}"></span><a href="${t[1].url}" target="_blank">${t[1].title}</a></li>`,l,"append");}));}));a.each("indexRecommendVideoHistoryCategoryButtonAll",(t=>{Rr(t,"click",(async()=>{y(t);l.innerHTML="";for(const t of Object.entries(e))kr(`<li><span><img src="${t[1].pic}"></span><a href="${t[1].url}" target="_blank">${t[1].title}</a></li>`,l,"append");}));}));},async clearRecommendVideoHistory(){await Y.clear("index");const e=await a.indexRecommendVideoHistoryPopover;e.hidePopover();},handleExecuteFunctionsSequentially(){const t=[this.setRecordRecommendVideoHistory,this.insertIndexRecommendVideoHistoryPopover,this.generatorIndexRecommendVideoHistoryContents];Ar(t);}});

		})
	};
}));

System.register("./biliApis-NsIWQQZH-6R2uCkdV.js", ['./__monkey.entry-_VCtn1Is.js'], (function (exports, module) {
	'use strict';
	var er, W, Y;
	return {
		setters: [module => {
			er = module.e;
			W = module.W;
			Y = module.Y;
		}],
		execute: (function () {

			function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var o={exports:{}};var i={exports:{}};var s;function a(){if(s)return i.exports;s=1;(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,n){return t<<n|t>>>32-n},rotr:function(t,n){return t<<32-n|t>>>n},endian:function(t){if(t.constructor==Number)return n.rotl(t,8)&16711935|n.rotl(t,24)&4278255360;for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var n=[];t>0;t--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(t){for(var n=[],e=0,r=0;e<t.length;e++,r+=8)n[r>>>5]|=t[e]<<24-r%32;return n},wordsToBytes:function(t){for(var n=[],e=0;e<t.length*32;e+=8)n.push(t[e>>>5]>>>24-e%32&255);return n},bytesToHex:function(t){for(var n=[],e=0;e<t.length;e++){n.push((t[e]>>>4).toString(16));n.push((t[e]&15).toString(16));}return n.join("")},hexToBytes:function(t){for(var n=[],e=0;e<t.length;e+=2)n.push(parseInt(t.substr(e,2),16));return n},bytesToBase64:function(n){for(var e=[],r=0;r<n.length;r+=3){var o=n[r]<<16|n[r+1]<<8|n[r+2];for(var i=0;i<4;i++)if(r*8+i*6<=n.length*8)e.push(t.charAt(o>>>6*(3-i)&63));else e.push("=");}return e.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,o=0;r<n.length;o=++r%4){if(o==0)continue;e.push((t.indexOf(n.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<o*2|t.indexOf(n.charAt(r))>>>6-o*2);}return e}};i.exports=n;})();return i.exports}var c;var u;function f(){if(u)return c;u=1;var t={utf8:{stringToBytes:function(n){return t.bin.stringToBytes(unescape(encodeURIComponent(n)))},bytesToString:function(n){return decodeURIComponent(escape(t.bin.bytesToString(n)))}},bin:{stringToBytes:function(t){for(var n=[],e=0;e<t.length;e++)n.push(t.charCodeAt(e)&255);return n},bytesToString:function(t){for(var n=[],e=0;e<t.length;e++)n.push(String.fromCharCode(t[e]));return n.join("")}}};c=t;return c}var l;var p;function d(){if(p)return l;p=1;l=function(e){return e!=null&&(t(e)||n(e)||!!e._isBuffer)};function t(t){return !!t.constructor&&typeof t.constructor.isBuffer==="function"&&t.constructor.isBuffer(t)}function n(n){return typeof n.readFloatLE==="function"&&typeof n.slice==="function"&&t(n.slice(0,0))}return l}var g;function h(){if(g)return o.exports;g=1;(function(){var t=a(),n=f().utf8,e=d(),r=f().bin,i=function(o,s){if(o.constructor==String)if(s&&s.encoding==="binary")o=r.stringToBytes(o);else o=n.stringToBytes(o);else if(e(o))o=Array.prototype.slice.call(o,0);else if(!Array.isArray(o)&&o.constructor!==Uint8Array)o=o.toString();var a=t.bytesToWords(o),c=o.length*8,u=1732584193,f=-271733879,l=-1732584194,p=271733878;for(var d=0;d<a.length;d++)a[d]=(a[d]<<8|a[d]>>>24)&16711935|(a[d]<<24|a[d]>>>8)&4278255360;a[c>>>5]|=128<<c%32;a[(c+64>>>9<<4)+14]=c;var g=i._ff,h=i._gg,y=i._hh,v=i._ii;for(var d=0;d<a.length;d+=16){var b=u,m=f,w=l,_=p;u=g(u,f,l,p,a[d+0],7,-680876936);p=g(p,u,f,l,a[d+1],12,-389564586);l=g(l,p,u,f,a[d+2],17,606105819);f=g(f,l,p,u,a[d+3],22,-1044525330);u=g(u,f,l,p,a[d+4],7,-176418897);p=g(p,u,f,l,a[d+5],12,1200080426);l=g(l,p,u,f,a[d+6],17,-1473231341);f=g(f,l,p,u,a[d+7],22,-45705983);u=g(u,f,l,p,a[d+8],7,1770035416);p=g(p,u,f,l,a[d+9],12,-1958414417);l=g(l,p,u,f,a[d+10],17,-42063);f=g(f,l,p,u,a[d+11],22,-1990404162);u=g(u,f,l,p,a[d+12],7,1804603682);p=g(p,u,f,l,a[d+13],12,-40341101);l=g(l,p,u,f,a[d+14],17,-1502002290);f=g(f,l,p,u,a[d+15],22,1236535329);u=h(u,f,l,p,a[d+1],5,-165796510);p=h(p,u,f,l,a[d+6],9,-1069501632);l=h(l,p,u,f,a[d+11],14,643717713);f=h(f,l,p,u,a[d+0],20,-373897302);u=h(u,f,l,p,a[d+5],5,-701558691);p=h(p,u,f,l,a[d+10],9,38016083);l=h(l,p,u,f,a[d+15],14,-660478335);f=h(f,l,p,u,a[d+4],20,-405537848);u=h(u,f,l,p,a[d+9],5,568446438);p=h(p,u,f,l,a[d+14],9,-1019803690);l=h(l,p,u,f,a[d+3],14,-187363961);f=h(f,l,p,u,a[d+8],20,1163531501);u=h(u,f,l,p,a[d+13],5,-1444681467);p=h(p,u,f,l,a[d+2],9,-51403784);l=h(l,p,u,f,a[d+7],14,1735328473);f=h(f,l,p,u,a[d+12],20,-1926607734);u=y(u,f,l,p,a[d+5],4,-378558);p=y(p,u,f,l,a[d+8],11,-2022574463);l=y(l,p,u,f,a[d+11],16,1839030562);f=y(f,l,p,u,a[d+14],23,-35309556);u=y(u,f,l,p,a[d+1],4,-1530992060);p=y(p,u,f,l,a[d+4],11,1272893353);l=y(l,p,u,f,a[d+7],16,-155497632);f=y(f,l,p,u,a[d+10],23,-1094730640);u=y(u,f,l,p,a[d+13],4,681279174);p=y(p,u,f,l,a[d+0],11,-358537222);l=y(l,p,u,f,a[d+3],16,-722521979);f=y(f,l,p,u,a[d+6],23,76029189);u=y(u,f,l,p,a[d+9],4,-640364487);p=y(p,u,f,l,a[d+12],11,-421815835);l=y(l,p,u,f,a[d+15],16,530742520);f=y(f,l,p,u,a[d+2],23,-995338651);u=v(u,f,l,p,a[d+0],6,-198630844);p=v(p,u,f,l,a[d+7],10,1126891415);l=v(l,p,u,f,a[d+14],15,-1416354905);f=v(f,l,p,u,a[d+5],21,-57434055);u=v(u,f,l,p,a[d+12],6,1700485571);p=v(p,u,f,l,a[d+3],10,-1894986606);l=v(l,p,u,f,a[d+10],15,-1051523);f=v(f,l,p,u,a[d+1],21,-2054922799);u=v(u,f,l,p,a[d+8],6,1873313359);p=v(p,u,f,l,a[d+15],10,-30611744);l=v(l,p,u,f,a[d+6],15,-1560198380);f=v(f,l,p,u,a[d+13],21,1309151649);u=v(u,f,l,p,a[d+4],6,-145523070);p=v(p,u,f,l,a[d+11],10,-1120210379);l=v(l,p,u,f,a[d+2],15,718787259);f=v(f,l,p,u,a[d+9],21,-343485551);u=u+b>>>0;f=f+m>>>0;l=l+w>>>0;p=p+_>>>0;}return t.endian([u,f,l,p])};i._ff=function(t,n,e,r,o,i,s){var a=t+(n&e|~n&r)+(o>>>0)+s;return (a<<i|a>>>32-i)+n};i._gg=function(t,n,e,r,o,i,s){var a=t+(n&r|e&~r)+(o>>>0)+s;return (a<<i|a>>>32-i)+n};i._hh=function(t,n,e,r,o,i,s){var a=t+(n^e^r)+(o>>>0)+s;return (a<<i|a>>>32-i)+n};i._ii=function(t,n,e,r,o,i,s){var a=t+(e^(n|~r))+(o>>>0)+s;return (a<<i|a>>>32-i)+n};i._blocksize=16;i._digestsize=16;o.exports=function(n,e){if(n===void 0||n===null)throw new Error("Illegal argument "+n);var o=t.wordsToBytes(i(n,e));return e&&e.asBytes?o:e&&e.asString?r.bytesToString(o):t.bytesToHex(o)};})();return o.exports}var y=h();const v=r(y);const b=new W("BiliApis");const m=exports("m", {async getQueryWithWbi(n){const e=[46,47,18,2,53,8,23,32,15,50,10,31,58,3,45,35,27,43,5,49,33,9,42,19,29,28,14,39,12,38,41,13,37,48,7,16,24,55,40,61,26,17,0,1,60,51,30,4,22,25,54,21,56,59,6,63,57,62,11,36,20,34,44,52];const r=t=>e.map((n=>t[n])).join("").slice(0,32);const o=(t,n,e)=>{const o=r(n+e),i=Math.round(Date.now()/1e3),s=/[!'()*]/g;Object.assign(t,{wts:i});const a=Object.keys(t).sort().map((n=>{const e=t[n].toString().replace(s,"");return `${encodeURIComponent(n)}=${encodeURIComponent(e)}`})).join("&");const c=v(a+o);return a+"&w_rid="+c};const i=async()=>{const n="https://api.bilibili.com/x/web-interface/nav";const e=await er.get(n,{withCredentials:true});const{data:{wbi_img:{img_url:r,sub_url:o}}}=e.data;return {img_key:r.slice(r.lastIndexOf("/")+1,r.lastIndexOf(".")),sub_key:o.slice(o.lastIndexOf("/")+1,o.lastIndexOf("."))}};const s=async()=>{const t=await i();const e=n,r=t.img_key,s=t.sub_key;const a=o(e,r,s);return a};return s()},getCurrentVideoID(t=location.href){const{pathname:n}=new URL(t);const[,e]=n.match(/\/(video\/BV\w+|bangumi\/play\/ss\d+)/)||[];return (e==null?void 0:e.split("/").pop())||"error"},async getVideoInformation(n){const e=`https://api.bilibili.com/x/web-interface/view?bvid=${n}`;const{data:r,data:{code:o}}=await er.get(e,{withCredentials:true});if(o===0)return r;else if(o===-400)b.info("获取视频基本信息丨请求错误");else if(o===-403)b.info("获取视频基本信息丨权限不足");else if(o===-404)b.info("获取视频基本信息丨无视频");else if(o===62002)b.info("获取视频基本信息丨稿件不可见");else if(o===62004)b.info("获取视频基本信息丨稿件审核中");else if(o==="ERR_BAD_REQUEST")b.info("获取视频基本信息丨请求失败");else b.warn("获取视频基本信息丨请求错误");},async getUserInformation(n){const e=`https://api.bilibili.com/x/web-interface/card?mid=${n}`;const{data:r,data:{code:o}}=await er.get(e,{withCredentials:true});if(o===0)return r;else if(o===-400)b.info("获取用户基本信息丨请求错误");else if(o===-403)b.info("获取用户基本信息丨权限不足");else if(o===-404)b.info("获取用户基本信息丨用户不存在");else if(o==="ERR_BAD_REQUEST")b.info("获取用户基本信息丨请求失败");else b.warn("获取用户基本信息丨请求失败");},async isVip(){const t=this.getCookieByName("DedeUserID");const{data:{card:{vip:{status:n}}}}=await m.getUserInformation(t);if(n)Y.legacySet("is_vip",true);else Y.legacySet("is_vip",false);},async getUserVideoList(n){const e=await m.getQueryWithWbi({mid:n});const r=`https://api.bilibili.com/x/space/wbi/arc/search?${e}`;const{data:o,data:{code:i}}=await er.get(r,{withCredentials:true});if(i===0)return o;else if(i===-400)b.info("获取用户投稿视频列表丨权限不足");else if(i===-412)b.info("获取用户投稿视频列表丨请求被拦截");else b.info("获取用户投稿视频列表丨请求失败");}});

		})
	};
}));

System.register("./dynamic.module-CSPBKJD5-CfBhDl8K.js", ['./__monkey.entry-_VCtn1Is.js', './regexps-CYJsJudb-B6_X37vw.js', './templates-p92U0-zb-yA85xlV-.js'], (function (exports, module) {
	'use strict';
	var Ar, kr, Rr, W, Y, Tr, H, u$1, r, a, c;
	return {
		setters: [module => {
			Ar = module.A;
			kr = module.k;
			Rr = module.R;
			W = module.W;
			Y = module.Y;
			Tr = module.T;
			H = module.H;
		}, module => {
			u$1 = module.u;
			r = module.r;
		}, module => {
			a = module.a;
			c = module.c;
		}],
		execute: (function () {

			const l=new W("VideoModule");const y=new r;const u=exports("default", {name:"dynamic",version:"1.0.0",async install(){H.on("app:ready",(async()=>{l.info("动态模块｜已加载");await this.preFunctions();}));},async preFunctions(){this.userConfigs=await Y.getAll("user");this.registSettings();if(Tr()){l.info("标签页｜已激活");this.handleExecuteFunctionsSequentially();}},async registSettings(){await y.init(this.userConfigs);},changeCurrentHrefToVideoSubmissions(){const t=this.userConfigs.dynamic_video_link;const i=location.href;const n="https://t.bilibili.com/pages/nav/index";if(i===n||u$1.dynamic.newIndexLink.test(i)||u$1.dynamic.indexVoteLink.test(i)||u$1.dynamic.webVoteLink.test(i)||u$1.dynamic.indexLotteryLink.test(i)||u$1.dynamic.webLotteryLink.test(i)||u$1.dynamic.moreDataLink.test(i)||u$1.dynamic.DetailLink.test(i)||u$1.dynamic.TopicDetailLink.test(i))return false;if(i!==t)location.href=t;else l.info("动态页｜已切换至投稿视频");},async insertSidebarButtons(){const t=["dynamicSidebar","DynamicSettingsPopover"];const[e,s]=await a.batch(t);const a$1=kr(c.dynamicSettingsOpenButton,e,"prepend");Rr(a$1,"click",(()=>{s.showPopover();}));},handleExecuteFunctionsSequentially(){const i=[this.insertSidebarButtons,this.changeCurrentHrefToVideoSubmissions];Ar(i);}});

		})
	};
}));

System.register("./regexps-CYJsJudb-B6_X37vw.js", ['./__monkey.entry-_VCtn1Is.js', './templates-p92U0-zb-yA85xlV-.js'], (function (exports, module) {
	'use strict';
	var br, jr, kr, Rr, Lr, Y, c, a, d;
	return {
		setters: [module => {
			br = module.b;
			jr = module.j;
			kr = module.k;
			Rr = module.R;
			Lr = module.L;
			Y = module.Y;
		}, module => {
			c = module.c;
			a = module.a;
			d = module.d;
		}],
		execute: (function () {

			class r{constructor(){this.userConfigs={};}async init(i){this.userConfigs=i;this.pageType=br();jr({BilibiliAdjustmentStyle:d.BilibiliAdjustment});this.render(this.pageType);}render(e){switch(e){case "video":this.renderVideoSettings();this.initVideoSettingsEventListeners();break;case "dynamic":this.renderDynamicSettings();this.initDynamicSettingsEventListeners();break}}renderVideoSettings(){const e=c.replace("videoSettings",{IsVip:this.userConfigs.is_vip,AutoLocate:this.userConfigs.auto_locate,AutoLocateVideo:this.userConfigs.auto_locate_video,AutoLocateBangumi:this.userConfigs.auto_locate_bangumi,OffsetTop:this.userConfigs.offset_top,PlayerOffsetTop:this.userConfigs.player_offset_top,ClickPlayerAutoLocation:this.userConfigs.click_player_auto_location,SelectedPlayerModeClose:this.userConfigs.selected_player_mode==="close",SelectedPlayerModeWide:this.userConfigs.selected_player_mode==="wide",SelectedPlayerModeWeb:this.userConfigs.selected_player_mode==="web",WebfullUnlock:this.userConfigs.webfull_unlock,AutoSelectVideoHighestQuality:this.userConfigs.auto_select_video_highest_quality,ContainQuality4kStyle:this.userConfigs.is_vip?"flex":"none",ContainQuality4k:this.userConfigs.contain_quality_4k,ContainQuality8kStyle:this.userConfigs.is_vip?"flex":"none",ContainQuality8k:this.userConfigs.contain_quality_8k,InsertVideoDescriptionToComment:this.userConfigs.insert_video_description_to_comment,AutoSkip:this.userConfigs.auto_skip,PauseVideo:this.userConfigs.pause_video,ContinuePlayStyle:this.userConfigs.is_vip?"flex":"none",ContinuePlay:this.userConfigs.continue_play,AutoSubtitle:this.userConfigs.auto_subtitle,AutoReload:this.userConfigs.auto_reload});kr(e,document.body,"append");}async initVideoSettingsEventListeners(){const e=["app","VideoSettingsPopover","IsVip","AutoLocate","AutoLocateVideo","AutoLocateBangumi","ClickPlayerAutoLocation","WebfullUnlock","AutoSelectVideoHighestQuality","ContainQuality4k","ContainQuality8k","InsertVideoDescriptionToComment","AutoSkip","PauseVideo","ContinuePlay","AutoSubtitle","OffsetTop","Checkbox4K","Checkbox8K"];const[t,i,a$1,c,r,u,d,g,p,y,h,f,b,_,m,C,k,S,v]=await a.batch(e);Rr(i,"toggle",(e=>{if(e.newState==="open")t.style.pointerEvents="none";if(e.newState==="closed")t.style.pointerEvents="auto";}));Rr([a$1,c,r,u,d,g,p,y,h,f,b,_,m,C],"change",(async e=>{const t=Lr(e.target.id);await Y.legacySet(t,e.target.checked);e.target.attributes.checked.value=await Y.legacyGet(t);if(e.target.id==="IsVip"){S.style.display=e.target.checked?"flex":"none";v.style.display=e.target.checked?"flex":"none";}if(e.target.id==="OffsetTop")await Y.legacySet(t,e.target.value);}));Rr(k,"change",(async e=>{await Y.legacySet("offset_top",e.target.value);}));a.each("SelectPlayerModeButtons",(e=>{Rr(e,"click",(async e=>{await Y.legacySet("selected_player_mode",e.target.value);}));}));}renderDynamicSettings(){const e=c.replace("dynamicSettings",{DynamicVideoLink:this.userConfigs.dynamic_video_link});kr(e,document.body,"append");}async initDynamicSettingsEventListeners(){const e=["app","DynamicSettingsPopover"];const[t,i]=await a.batch(e);Rr(i,"toggle",(e=>{if(e.newState==="open")t.style.pointerEvents="none";if(e.newState==="closed")t.style.pointerEvents="auto";}));}} exports("r", r);const u=exports("u", {video:{nbspToBlank:/&nbsp;/gi,timeString:/\b(?:[0-9]|1\d|2[0-3]):[0-5]\d(?::[0-5]\d)?\b/g,url:new RegExp('(?<!((href|url)="))(http|https|ftp):\\/\\/[\\w-]+(\\.[\\w-]+)*([\\w\\-.,@?^=%&:/~+#;]*[\\w\\-@?^=%&/~+#;])?',"g"),videoId:new RegExp("(?<!(>|\\/))\\bBV(?:1[1-9a-km-zA-Z]|2[0-9a-zA-Z])[0-9a-zA-Z]{8}\\b(?!<)","g"),readId:/\bcv\d{7}\b/g,blankLine:/^\s*$(?:\r?\n?)/gm,specialBlank:/(%09)+/g},dynamic:{newIndexLink:/(https:\/\/t.bilibili.com\/pages\/nav\/index_new).*/i,indexVoteLink:/https:\/\/t.bilibili.com\/vote\/h5\/index\/#\/result\?vote_id=.*/i,webVoteLink:/t.bilibili.com\/h5\/dynamic\/vote#\/result\?vote_id=.*/i,indexLotteryLink:/https:\/\/t.bilibili.com\/lottery\/h5\/index\/.*/i,webLotteryLink:/https:\/\/t.bilibili.com\/lottery\/.*/i,moreDataLink:/https:\/\/t.bilibili.com\/[0-9]+\?tab=[0-9]+/i,DetailLink:/https:\/\/t.bilibili.com\/[0-9]+/i,TopicDetailLink:/https:\/\/t.bilibili.com\/topic\/[0-9]+/i}});

		})
	};
}));

System.register("./templates-p92U0-zb-yA85xlV-.js", [], (function (exports, module) {
	'use strict';
	return {
		execute: (function () {

			const e=new Map;const t={app:"#app",header:"#biliMainHeader",headerMini:"#biliMainHeader .bili-header .mini-header",player:"#bilibili-player",playerWrap:"#playerWrap",playerWebscreen:"#bilibili-player.mode-webscreen",playerContainer:"#bilibili-player .bpx-player-container",playerController:"#bilibili-player .bpx-player-ctrl-btn",playerControllerBottomRight:".bpx-player-control-bottom-right",playerTooltipArea:".bpx-player-tooltip-area",playerTooltipTitle:".bpx-player-tooltip-title",playerDanmuSetting:".bpx-player-dm-setting",playerEndingRelateVideo:".bpx-player-ending-related-item",volumeButton:".bpx-player-ctrl-volume-icon",mutedButton:".bpx-player-ctrl-muted-icon",video:"#bilibili-player video",videoWrap:"#bilibili-player .bpx-player-video-wrap",videoBwp:"bwp-video",videoTitleArea:"#viewbox_report",videoFloatNav:".fixed-sidenav-storage",videoComment:"#commentapp",videoCommentRoot:"#commentapp > bili-comments",videoCommentReplyList:"#comment .reply-list",videoRootReplyContainer:"#comment .root-reply-container",videoTime:'a[data-type="seek"]',videoDescription:"#v_desc",videoDescriptionInfo:"#v_desc .basic-desc-info",videoDescriptionText:"#v_desc .desc-info-text",adjustmentCommentDescription:"#adjustment-comment-description",videoNextPlayAndRecommendLink:".video-page-card-small .card-box",videoSectionsEpisodeLink:".video-pod__list .video-pod__item",videoEpisodeListMultiMenuItem:".bpx-player-ctrl-eplist-multi-menu-item",videoMultiPageLink:"#multi_page ul li",videoPreviousButton:".bpx-player-ctrl-btn.bpx-player-ctrl-prev",videoNextButton:".bpx-player-ctrl-btn.bpx-player-ctrl-next",bangumiApp:"#__next",bangumiComment:"#comment_module",bangumiFloatNav:'#__next div[class*="navTools_floatNavExp"] div[class*="navTools_navMenu"]',bangumiMainContainer:".main-container",bangumiSectionsEpisodeLink:'#__next div[class*="numberList_wrapper"] div[class*="numberListItem_number_list_item"] ',qualitySwitchButtons:".bpx-player-ctrl-quality-menu-item",playerModeWideEnterButton:".bpx-player-ctrl-wide-enter",playerModeWideLeaveButton:".bpx-player-ctrl-wide-leave",playerModeWebEnterButton:".bpx-player-ctrl-web-enter",playerModeWebLeaveButton:".bpx-player-ctrl-web-leave",playerModeFullControlButton:".bpx-player-ctrl-full",danmukuBox:"#danmukuBox",danmuShowHideTip:'div[aria-label="弹幕显示隐藏"]',membersContainer:".members-info-container",membersUpAvatarFace:".membersinfo-upcard:first-child picture img",upAvatarFace:".up-info-container .up-avatar-wrap .bili-avatar .bili-avatar-face",upAvatarDecoration:".up-info-container .up-avatar-wrap .bili-avatar .bili-avatar-pendent-dom .bili-avatar-img",upAvatarIcon:".up-info-container .up-avatar-wrap .bili-avatar .bili-avatar-icon",setSkipTimeNodesPopover:"#setSkipTimeNodesPopover",setSkipTimeNodesPopoverToggleButton:"#setSkipTimeNodesPopoverToggleButton",setSkipTimeNodesPopoverHeaderExtra:"#setSkipTimeNodesPopover .header .extra",setSkipTimeNodesPopoverTips:"#setSkipTimeNodesPopover .tips",setSkipTimeNodesPopoverTipsDetail:"#setSkipTimeNodesPopover .tips .detail",setSkipTimeNodesPopoverTipsContents:"#setSkipTimeNodesPopover .tips .contents",setSkipTimeNodesPopoverRecords:"#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .records",setSkipTimeNodesPopoverClouds:"#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .clouds",setSkipTimeNodesPopoverResult:"#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .result",setSkipTimeNodesInput:"#setSkipTimeNodesInput",skipTimeNodesRecordsArray:"#skipTimeNodesRecordsArray",skipTimeNodesCloudsArray:"#skipTimeNodesCloudsArray",clearRecordsButton:"#clearRecordsButton",saveRecordsButton:"#saveRecordsButton",uploadSkipTimeNodesButton:"#uploadSkipTimeNodesButton",syncSkipTimeNodesButton:"#syncSkipTimeNodesButton",indexApp:"#i_cecream",indexRecommendVideo:'.recommended-container_floor-aside .feed-card:nth-child(-n+11):not(:has([class*="-ad"]))',indexRecommendVideoRollButtonWrapper:".recommended-container_floor-aside .feed-roll-btn",indexRecommendVideoHistoryPopoverTitle:"#indexRecommendVideoHistoryPopoverTitle",indexRecommendVideoHistoryPopoverTitleCount:"#indexRecommendVideoHistoryPopoverTitle span",indexRecommendVideoRollButton:".recommended-container_floor-aside .feed-roll-btn button.roll-btn",indexRecommendVideoHistoryOpenButton:"#indexRecommendVideoHistoryOpenButton",indexRecommendVideoHistoryPopover:"#indexRecommendVideoHistoryPopover",indexRecommendVideoHistoryCategory:"#indexRecommendVideoHistoryCategory",indexRecommendVideoHistoryCategoryV2:"#indexRecommendVideoHistoryCategoryV2",indexRecommendVideoHistoryCategoryButtons:"#indexRecommendVideoHistoryCategory li,#indexRecommendVideoHistoryCategoryV2 li",indexRecommendVideoHistoryCategoryButtonsExceptAll:"#indexRecommendVideoHistoryCategory li:not(.all)",indexRecommendVideoHistoryCategoryButtonAll:"#indexRecommendVideoHistoryCategory li.all,#indexRecommendVideoHistoryCategoryV2 li.all_v2",indexRecommendVideoHistoryList:"#indexRecommendVideoHistoryList",indexRecommendVideoHistoryListItem:"#indexRecommendVideoHistoryList li",clearRecommendVideoHistoryButton:"#clearRecommendVideoHistoryButton",notChargeHighLevelCover:".not-charge-high-level-cover",switchSubtitleButton:".bpx-player-ctrl-btn.bpx-player-ctrl-subtitle",dynamicSidebar:".bili-dyn-sidebar",DynamicSettingsPopover:"#DynamicSettingsPopover",DynamicSettingSaveButton:"#DynamicSettingSaveButton",DynamicSettingsPopoverTips:"#DynamicSettingsPopoverTips",DynamicHeaderContainer:"#bili-header-container",VideoSettingsPopover:"#VideoSettingsPopover",VideoSettingsSaveButton:"#VideoSettingsSaveButton",AutoSkipSwitchInput:"#AutoSkipSwitch",AutoEnableSubtitleSwitchInput:"#AutoEnableSubtitle",WebVideoLinkInput:"#WebVideoLink",IsVip:"#IsVip",AutoLocate:"#AutoLocate",AutoLocateVideo:"#AutoLocateVideo",AutoLocateBangumi:"#AutoLocateBangumi",OffsetTop:"#OffsetTop",ClickPlayerAutoLocation:"#ClickPlayerAutoLocation",AutoSelectVideoHighestQuality:"#AutoSelectVideoHighestQuality",ContainQuality4k:"#ContainQuality4k",ContainQuality8k:"#ContainQuality8k",Checkbox4K:"#Checkbox4K",Checkbox8K:"#Checkbox8K",FourKAndEightK:".fourK,.eightK",SelectPlayerModeButtons:'input[name="PlayerMode"]',WebfullUnlock:"#WebfullUnlock",AutoReload:"#AutoReload",AutoSkip:"#AutoSkip",InsertVideoDescriptionToComment:"#InsertVideoDescriptionToComment",PauseVideo:"#PauseVideo",ContinuePlay:"#ContinuePlay",AutoSubtitle:"#AutoSubtitle",BilibiliAdjustmentStyle:"#BilibiliAdjustmentStyle",VideoPageAdjustmentStyle:"#VideoPageAdjustmentStyle",FreezeHeaderAndVideoTitleStyle:"#FreezeHeaderAndVideoTitleStyle",UnlockEpisodeSelectorStyle:"#UnlockEpisodeSelectorStyle",UnlockWebPlayerStyle:"#UnlockWebPlayerStyle",ResetPlayerLayoutStyle:"#ResetPlayerLayoutStyle",VideoSettingsStyle:"#VideoSettingsStyle",IndexAdjustmentStyle:"#IndexAdjustmentStyle",DynamicSettingStyle:"#DynamicSettingStyle",BodyOverflowHiddenStyle:"#BodyOverflowHiddenStyle"};const o=exports("o", {descriptionRenderer:"#feed > bili-adjustment-comment-thread-renderer",descriptionVideoTime:'#feed > #bili-adjustment-contents > [data-type="seek"]',videoTime:'#comment >> bili-rich-text >> #contents > a[data-type="seek"]',replyVideoTime:'bili-comment-replies-renderer >> bili-comment-reply-renderer >> bili-rich-text >> #contents > a[data-type="seek"]',commentRenderderContainer:"#feed",commentRenderder:"bili-comment-renderer",commentRepliesRenderer:"bili-comment-replies-renderer",replyPublicDate:"#footer > bili-comment-action-buttons-renderer >> #pubdate"});const i=async(t,o=false)=>{const i=`${t}|${o}`;if(e.has(i)){const n=e.get(i);const a=Array.isArray(n.element)?n.element:[n.element];if(a.every((e=>{var o;return (e==null?void 0:e.isConnected)&&((o=e.matches)==null?void 0:o.call(e,t))})))return o?a:a[0];e.delete(i);}const n=o?"querySelectorAll":"querySelector";const a=()=>{const e=document[n](t);if(e&&!o&&e!==null)return e;if(o&&(e==null?void 0:e.length)>0)return e;return new Promise((e=>{const i=new MutationObserver((()=>{const a=document[n](t);if(o&&a.length>0||!o&&a){i.disconnect();e(a);}}));i.observe(document,{childList:true,subtree:true});setTimeout((()=>{i.disconnect();e(o?[]:null);}),1e4);}))};let d=document[n](t)||await a();if(o&&!(d instanceof NodeList))d=d?[d]:[];e.set(i,{element:o?[...d]:d,observer:new MutationObserver((()=>e.delete(i)))});if(d&&!o&&d.parentElement)e.get(i).observer.observe(d.parentElement,{childList:true});return o?[...d]:d};const n=async(e,o)=>{const n=t[e];const a=await i(n,true);a.forEach(o);};const a=exports("a", new Proxy(t,{get(e,o){if(o==="batch")return async t=>{const o=t.map((t=>e[t])).join(", ");const n=await i(o,true);const a=new Map;n.forEach((o=>{t.forEach((t=>{if(o.matches(e[t]))a.set(t,o);}));}));return t.map((e=>a.get(e)))};if(o==="all")return e=>i(e,true);if(o==="value")return e=>t[e];if(o==="query")return e=>document.querySelector(t[e]);if(o==="queryAll")return e=>document.querySelectorAll(t[e]);if(o==="each")return n;return i(e[o])}}));window.addEventListener("unload",(()=>{e.forEach((e=>e.observer.disconnect()));}));const d=exports("d", {BilibiliAdjustment:'::-webkit-scrollbar{width:6px!important;height:6px!important}::-webkit-scrollbar-track-piece{border-radius:0!important;background-color:#212121!important}::-webkit-scrollbar-thumb:vertical{height:5px!important;border-radius:6px!important;background-color:#00a1d6!important}::-webkit-scrollbar-thumb:horizontal{width:5px!important;border-radius:6px!important;background-color:#00a1d6!important}::-webkit-scrollbar-corner{border-radius:0!important;background-color:#141414!important}.adjustment-popover{position:fixed;top:50%;left:50%;box-sizing:border-box;margin:0;padding:15px;width:400px;max-height:70vh;border:0;border-radius:6px;font-size:1em;transform:translate(-50%,-50%);overscroll-behavior:contain;background:#212121;overflow-y:auto;color:#868686;border:1px solid #424242}.adjustment-popover::backdrop{backdrop-filter:blur(3px)}.adjustment-popover-title{margin-bottom:15px;text-align:center;font-weight:700;font-size:22px}.adjustment-popover-title .subTitle{font-size:14px}.recommend{padding:3px;border:1px solid #424242;border-radius:6px;box-sizing:border-box;text-align:center;margin-bottom:15px;font-size:14px}.recommend a{color:#00a1d6;text-decoration:none}.adjustment-buttonGroup{display:flex;margin-top:10px;align-items:center;justify-content:end;gap:10px}.adjustment-button{display:inline-block;box-sizing:border-box;margin:0;padding:10px 20px;outline:0;border:1px solid #424242;border-radius:4px;background:#fff;color:#606266;text-align:center;white-space:nowrap;font-weight:500;font-size:14px;line-height:1;cursor:pointer;transition:.1s;-webkit-appearance:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.adjustment-button.plain:disabled,.adjustment-button.plain:disabled:active,.adjustment-button.plain:disabled:focus,.adjustment-button.plain:disabled:hover,.adjustment-button:disabled,.adjustment-button:disabled:active,.adjustment-button:disabled:focus,.adjustment-button:disabled:hover{border-color:#ebeef5;background-color:#fff;background-image:none;color:#c0c4cc;cursor:not-allowed}.adjustment-button.primary{border-color:#00a1d6;background-color:#00a1d6;color:#fff}.adjustment-button.success{border-color:#67c23a;background-color:#67c23a;color:#fff}.adjustment-button.info{border-color:#909399;background-color:#909399;color:#fff}.adjustment-button.warning{border-color:#e6a23c;background-color:#e6a23c;color:#fff}.adjustment-button.danger{border-color:#f56c6c;background-color:#f56c6c;color:#fff}.adjustment-button.primary:focus,.adjustment-button.primary:hover{border-color:#66b1ff;background:#66b1ff;color:#fff}.adjustment-button.success:focus,.adjustment-button.success:hover{border-color:#85ce61;background:#85ce61;color:#fff}.adjustment-button.info:focus,.adjustment-button.info:hover{border-color:#a6a9ad;background:#a6a9ad;color:#fff}.adjustment-button.warning:focus,.adjustment-button.warning:hover{border-color:#ebb563;background:#ebb563;color:#fff}.adjustment-button.danger:focus,.adjustment-button.danger:hover{border-color:#f78989;background:#f78989;color:#fff}.adjustment-button.primary.plain{border-color:#b3d8ff;background:#ecf5ff;color:#409eff}.adjustment-button.success.plain{border-color:#c2e7b0;background:#f0f9eb;color:#67c23a}.adjustment-button.info.plain{border-color:#a6a9ad;background:#a6a9ad;color:#fff}.adjustment-button.warning.plain{border-color:#f5dab1;background:#fdf6ec;color:#e6a23c}.adjustment-button.danger.plain{border-color:#fbc4c4;background:#fef0f0;color:#f56c6c}.adjustment-button.primary.plain:focus,.adjustment-button.primary.plain:hover{border-color:#409eff;background:#409eff;color:#fff}.adjustment-button.success.plain:focus,.adjustment-button.success.plain:hover{border-color:#67c23a;background-color:#67c23a;color:#fff}.adjustment-button.info.plain:focus,.adjustment-button.info.plain:hover{border-color:#909399;background-color:#909399;color:#fff}.adjustment-button.warning.plain:focus,.adjustment-button.warning.plain:hover{border-color:#e6a23c;background-color:#e6a23c;color:#fff}.adjustment-button.danger.plain:focus,.adjustment-button.danger.plain:hover{border-color:#f56c6c;background-color:#f56c6c;color:#fff}.adjustment-button.primary:disabled,.adjustment-button.primary:disabled:active,.adjustment-button.primary:disabled:focus,.adjustment-button.primary:disabled:hover{border-color:#a0cfff;background-color:#a0cfff;color:#fff}.adjustment-button.success:disabled,.adjustment-button.success:disabled:active,.adjustment-button.success:disabled:focus,.adjustment-button.success:disabled:hover{border-color:#b3e19d;background-color:#b3e19d;color:#fff}.adjustment-button.info:disabled,.adjustment-button.info:disabled:active,.adjustment-button.info:disabled:focus,.adjustment-button.info:disabled:hover{border-color:#c8c9cc;background-color:#c8c9cc;color:#fff}.adjustment-button.warning:disabled,.adjustment-button.warning:disabled:active,.adjustment-button.warning:disabled:focus,.adjustment-button.warning:disabled:hover{border-color:#f3d19e;background-color:#f3d19e;color:#fff}.adjustment-button.danger:disabled,.adjustment-button.danger:disabled:active,.adjustment-button.danger:disabled:focus,.adjustment-button.danger:disabled:hover{border-color:#fab6b6;background-color:#fab6b6;color:#fff}.adjustment-button.primary.plain:disabled,.adjustment-button.primary.plain:disabled:active,.adjustment-button.primary.plain:disabled:focus,.adjustment-button.primary.plain:disabled:hover{border-color:#d9ecff;background-color:#ecf5ff;color:#8cc5ff}.adjustment-button.success.plain:disabled,.adjustment-button.success.plain:disabled:active,.adjustment-button.success.plain:disabled:focus,.adjustment-button.success.plain:disabled:hover{border-color:#e1f3d8;background-color:#f0f9eb;color:#a4da89}.adjustment-button.info.plain:disabled,.adjustment-button.info.plain:disabled:active,.adjustment-button.info.plain:disabled:focus,.adjustment-button.info.plain:disabled:hover{border-color:#e9e9eb;background-color:#f4f4f5;color:#bcbec2}.adjustment-button.warning.plain:disabled,.adjustment-button.warning.plain:disabled:active,.adjustment-button.warning.plain:disabled:focus,.adjustment-button.warning.plain:disabled:hover{border-color:#faecd8;background-color:#fdf6ec;color:#f0c78a}.adjustment-button.danger.plain:disabled,.adjustment-button.danger.plain:disabled:active,.adjustment-button.danger.plain:disabled:focus,.adjustment-button.danger.plain:disabled:hover{border-color:#fde2e2;background-color:#fef0f0;color:#f9a7a7}.adjustment-tips{display:inline-block;box-sizing:border-box;padding:3px 5px;height:fit-content;border:1px solid #d9ecff;border-radius:4px;background-color:#272727;color:#409eff;font-size:14px;line-height:1.5}.adjustment-tips.info{border-color:#424242;background-color:#272727;color:#868686}.adjustment-tips.success{border-color:#e1f3d8;background-color:#f0f9eb;color:#67c23a}.adjustment-tips.warning{border-color:#faecd8;background-color:#fdf6ec;color:#e6a23c}.adjustment-tips.danger{border-color:#fde2e2;background-color:#fef0f0;color:#f56c6c}.adjustment-form,.adjustment-form-item{display:flex;flex-direction:column}.adjustment-form{gap:15px}.adjustment-form-item{gap:15px;background:#2c2c2c;padding:15px;border-radius:6px}.adjustment-checkbox,.adjustment-form-item-content{display:flex;align-items:center;justify-content:space-between}.adjustment-checkbox-btn .btn-bg,.adjustment-checkbox-btn .knob{position:absolute;top:0;right:0;bottom:0;left:0}.adjustment-checkbox-btn,.adjustment-radio-btn{position:relative;top:50%;width:54px;height:26px;overflow:hidden}.adjustment-checkbox-btn.btn-pill,.adjustment-checkbox-btn.btn-pill>.btn-bg{border-radius:100px}.adjustment-checkbox .radio,.adjustment-checkbox-btn .checkbox{position:relative;width:100%;height:100%;padding:0;margin:0;opacity:0;cursor:pointer;z-index:3}.adjustment-checkbox-btn .knob{z-index:2}.adjustment-checkbox-btn .checkbox[checked=false]+.knob::before,.adjustment-checkbox-btn .knob::before{content:"";position:absolute;top:3px;left:3px;width:9px;height:4px;color:#fff;font-size:10px;font-weight:700;text-align:center;line-height:1;padding:8px 6px;background-color:#f44336;border-radius:50%;transition:.3s cubic-bezier(.18,.89,.35,1.15) all}.adjustment-checkbox-btn .btn-bg,.adjustment-checkbox-btn .checkbox[checked=false]~.btn-bg{width:100%;background-color:#fcebeb;transition:.3s ease all;z-index:1}.adjustment-checkbox-btn .checkbox[checked=true]+.knob::before,.adjustment-checkbox-btn .checkbox[checked]:not([checked=false])+.knob::before{content:"";left:30px;background-color:#00a1d6}.adjustment-checkbox-btn .checkbox[checked=true]~.btn-bg,.adjustment-checkbox-btn .checkbox[checked]:not([checked=false])~.btn-bg{background-color:#ebf7fc}.adjustment-checkbox-btn .btn-bg,.adjustment-checkbox-btn .knob,.adjustment-checkbox-btn .knob::before{transition:.3s ease all}.adjustment-radio-btn{gap:15px;width:66px;overflow:auto;height:26px;display:flex;align-items:center;justify-content:flex-start}.adjustment-radio-btn .radio{width:auto;height:auto}.adjustment-radio-btn .circle{position:absolute;top:0;right:0;bottom:0;left:0;z-index:2}.adjustment-radio-btn .radio+.circle::before{content:"";position:absolute;top:7px;left:5px;width:8px;height:8px;border-radius:50%;background:#424242;border:3px solid #272727;outline:2px solid #424242}.adjustment-radio-btn .radio:checked+.circle::before{background-color:#00a1d6;border-color:#ebf7fc;outline-color:#00a1d6}.adjustment-form-item label{font-size:18px}.adjustment-checkboxGroup{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:10px}.adjustment-checkboxGroup span{color:#666}.adjustment-checkbox{width:100%;font-size:16px;gap:3px}.adjustment-input{display:inline-flex;padding:1px 11px;outline:0;border:1px solid #424242;border-radius:6px;background:#272727;line-height:32px;cursor:text;align-items:center;justify-content:center;color:#868686;width:100%;box-sizing:border-box}',IndexAdjustment:'#indexRecommendVideoHistoryOpenButton{margin-top:10px}#indexRecommendVideoHistoryPopover{width:fit-content;border:1px solid #424242;outline:0;background:#2c2c2c;border-radius:4px;color:#868686;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:15px;max-height:777px;overflow:hidden}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryPopoverTitle{display:flex;box-sizing:border-box;padding-bottom:15px;border-bottom:1px solid #424242;font-weight:700;font-size:22px;align-items:center;justify-content:space-between}#indexRecommendVideoHistoryPopover ul{display:flex;flex-direction:column;align-items:center}#indexRecommendVideohistoryContents{display:flex;gap:10px}#indexRecommendVideohistoryCategories{width:440px;border-right:1px solid #424242;padding-right:10px;max-height:700px;overflow:auto;overscroll-behavior:contain}#indexRecommendVideohistoryCategories hr{height:1px;background:#424242;border:none;position:relative}#indexRecommendVideohistoryCategories hr:before{width:fit-content;content:"以下是 V2 版本分区";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#868686;background:#2c2c2c;display:block;text-align:center;padding:0 5px;font-size:12px}ul#indexRecommendVideoHistoryCategory,ul#indexRecommendVideoHistoryCategoryV2{display:grid;margin:10px 0 0;padding:0 0 10px 0;border-bottom:1px solid #424242!important;gap:5px;grid-template-columns:repeat(3,1fr);align-items:center;justify-content:center}ul#indexRecommendVideoHistoryCategory{border:none!important;margin:10px 0 15px;padding:0}ul#indexRecommendVideoHistoryCategoryV2{margin-top:15px;padding-bottom:10px}ul#indexRecommendVideoHistoryCategory li,ul#indexRecommendVideoHistoryCategoryV2 li{padding:5px 0!important;border:1px solid;border-radius:6px;justify-content:center;text-wrap-mode:nowrap}ul#indexRecommendVideoHistoryCategory li:hover,ul#indexRecommendVideoHistoryCategoryV2 li:hover{cursor:pointer;color:#00a1d6;border-color:#00a1d6!important}ul#indexRecommendVideoHistoryCategory li:hover,ul#indexRecommendVideoHistoryCategoryV2 li:hover{cursor:pointer;color:#00a1d6;border-color:#00a1d6}ul#indexRecommendVideoHistoryCategory li.active,ul#indexRecommendVideoHistoryCategoryV2 li.active{cursor:pointer;color:#fff;background:#00a1d6;border-color:#00a1d6!important}#indexRecommendVideoHistoryPopover ul li{display:flex;align-items:center;padding:7px 0;width:100%;border:1px solid #424242!important;line-height:24px}#indexRecommendVideoHistoryList{width:500px;max-height:700px;overflow:auto;overscroll-behavior:contain}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li{border-width:0 0 1px!important}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li span{display:flex;width:32px;height:24px;margin-right:5px;border-radius:4px;overflow:hidden}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li span img{width:100%;height:24px;object-fit:inherit}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li a{width:fit-content;color:#868686!important}#indexRecommendVideoHistoryPopover #indexRecommendVideoHistoryList li:hover a{color:#00a1d6!important}#clearRecommendVideoHistoryButton{position:sticky;display:flex;padding:10px;width:80px;border-radius:6px;background:#00a1d6;color:#fff;font-size:15px;line-height:16px;cursor:pointer;align-items:center;justify-content:center}',VideoPageAdjustment:'.bpx-player-container[data-screen=full] #goToComments{opacity:.6;cursor:not-allowed;pointer-events:none}#comment-description .user-name{display:flex;padding:0 5px;height:22px;border:1px solid;border-radius:4px;align-items:center;justify-content:center}.bpx-player-ctrl-skip{border:none!important;background:0 0!important}.bpx-player-container[data-screen=full] #setSkipTimeNodesPopoverToggleButton,.bpx-player-container[data-screen=web] #setSkipTimeNodesPopoverToggleButton{height:32px!important;line-height:32px!important}#setSkipTimeNodesPopover{top:50%!important;left:50%!important;box-sizing:border-box!important;padding:15px!important;max-width:456px!important;border:0!important;border-radius:6px!important;font-size:14px!important;transform:translate(-50%,-50%)!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper{display:flex!important;flex-direction:column!important;gap:7px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper button{display:flex!important;width:100%;height:34px!important;border-style:solid!important;border-width:1px!important;border-radius:6px!important;text-align:center!important;line-height:34px!important;cursor:pointer;align-items:center!important;justify-content:center!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper button:disabled{cursor:not-allowed}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .header{display:flex!important;font-weight:700!important;align-items:center!important;justify-content:space-between!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .header .title{font-weight:700!important;font-size:16px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .header .extra{font-size:12px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .header .extra,#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .result{padding:2px 5px!important;border:1px solid #d9ecff!important;border-radius:6px!important;background-color:#ecf5ff!important;color:#409eff!important;font-weight:400!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .success{display:flex!important;padding:2px 5px!important;border-color:#e1f3d8!important;background-color:#f0f9eb!important;color:#67c23a!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .danger{display:flex!important;padding:2px 5px!important;border-color:#fde2e2!important;background-color:#fef0f0!important;color:#f56c6c!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .handles{display:flex!important;align-items:center!important;justify-content:space-between!important;gap:7px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips{position:relative!important;overflow:hidden;box-sizing:border-box!important;padding:7px!important;border-color:#e9e9eb!important;border-radius:6px!important;background-color:#f4f4f5!important;color:#909399!important;font-size:13px!important;transition:height .3s!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips.open{height:134px!important;line-height:20px!important;}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips.close{height:34px!important;line-height:22px!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips .detail{position:absolute!important;top:9px!important;right:7px!important;display:flex!important;cursor:pointer!important;transition:transform .3s!important}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips .detail.open{transform:rotate(0)}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .tips .detail.close{transform:rotate(180deg)}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .records{display:none;flex-direction:column!important;gap:7px}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .records .recordsButtonsGroup{display:flex!important;align-items:center!important;justify-content:space-between!important;gap:7px!important}#clearRecordsButton{border-color:#d3d4d6!important;background:#f4f4f5!important;color:#909399!important}#clearRecordsButton:disabled{border-color:#e9e9eb!important;background-color:#f4f4f5!important;color:#bcbec2!important}#saveRecordsButton{border-color:#c2e7b0!important;background:#f0f9eb!important;color:#67c23a!important}#saveRecordsButton:disabled{border-color:#e1f3d8!important;background-color:#f0f9eb!important;color:#a4da89!important}#setSkipTimeNodesInput{box-sizing:border-box!important;padding:5px!important;width:calc(100% - 39px)!important;height:34px!important;border:1px solid #cecece!important;border-radius:6px!important;line-height:34px!important}#uploadSkipTimeNodesButton,#syncSkipTimeNodesButton{width:52px!important;height:34px!important;border:none!important;background:#00a1d6!important;color:#fff!important}#uploadSkipTimeNodesButton:hover{background:#00b5e5!important}#skipTimeNodesRecordsArray{display:flex!important;padding:2px 5px!important;border-radius:6px!important}#bilibili-player .bpx-player-video-wrap{position:relative}#bilibili-player .bpx-player-video-wrap::before{position:absolute;display:block;background:var(--video-cover) top left no-repeat;background-size:cover;content:"";inset:0}#setSkipTimeNodesPopover .setSkipTimeNodesWrapper .records{display:none}.bili-adjustment-icon{width: 40px!important;display:flex!important;align-items:center!important;justify-content:center!important}.bili-adjustment-icon svg{margin-bottom:3px!important}',BodyOverflowHidden:"body{overflow:hidden!important}",ResetPlayerLayout:"body{padding-top:0;position:auto}#playerWrap{display:block}#bilibili-player{height:auto;position:relative}.bpx-player-mini-warp{display:none}",UnlockWebPlayer:"body.webscreen-fix{padding-top:BODYHEIGHT;position:unset}#bilibili-player.mode-webscreen{height:BODYHEIGHT;position:absolute}#playerWrap{display:none}#danmukuBox{margin-top:0}",VideoSettings:"#VideoSettingsPopover{width:550px;max-height:90vh}#OffsetTop{width:100px}.player-mod .adjustment-checkboxGroup{flex-direction:row}.player-mod .adjustment-checkboxGroup .adjustment-checkbox:last-child .adjustment-radio-btn{width:98px}",UnlockEpisodeSelector:".bpx-player-control-bottom-right .bpx-player-ctrl-btn.bpx-player-ctrl-eplist{visibility:visible!important;width:36px!important}.bpx-player-ctrl-eplist-menu-wrap{min-height:auto!important;height:fit-content;overscroll-behavior:contain}",videoCommentDescription:"#bili-adjustment-body{position:relative;padding-left:80px;padding-top:22px}#bili-adjustment-user-avatar{position:absolute;left:20px;top:22px;width:48px;height:48px;transform-origin:left top;transform:scale(1)}#bili-adjustment-avatar-picture{width:48px;height:48px;opacity:1;border-radius:50%;border:2px solid #00a1d6}#bili-adjustment-info{display:inline-flex;align-items:center}#bili-adjustment-user-name{font-size:13px;font-weight:500}#bili-adjustment-user-name a{color:#00a1d6;text-decoration:none}#bili-adjustment-user-badge{background:#0491bf;border-radius:3px;color:#fff;padding:2px 3px;margin-left:5px;font-size:10px}#bili-adjustment-content{font-size:15px;line-height:24px}#bili-adjustment-contents{margin-block-start:0;margin-block-end:0;margin-inline-start:0;margin-inline-end:0;display:inline;white-space:pre-line;word-break:break-word;-webkit-font-smoothing:antialiased}#bili-adjustment-contents a{color:#00a1d6;text-decoration:none;background-color:transparent;cursor:pointer}#bili-adjustment-spread-line{padding-bottom:14px;margin-left:80px;border-bottom:1px solid var(--graph_bg_thick)}"});const r={videoLocateButton:'<div class="fixed-sidenav-storage-item bili-adjustment-icon locate" title="定位至播放器" [[DATAV]]><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="currentColor" d="M432 512a80 80 0 1 0 160 0 80 80 0 1 0-160 0z"/><path fill="currentColor" d="M960 480h-33.632C910.752 276.16 747.84 113.248 544 97.632V64a32 32 0 1 0-64 0v33.632C276.16 113.248 113.248 276.16 97.632 480H64a32 32 0 0 0 0 64h33.632C113.248 747.84 276.16 910.752 480 926.368V960a32 32 0 1 0 64 0v-33.632C747.84 910.752 910.752 747.84 926.368 544H960a32 32 0 1 0 0-64zM544 862.368V800a32 32 0 1 0-64 0v62.368C311.424 847.104 176.896 712.576 161.632 544H224a32 32 0 1 0 0-64h-62.368C176.896 311.424 311.424 176.896 480 161.632V224a32 32 0 0 0 64 0v-62.368C712.576 176.928 847.104 311.424 862.368 480H800a32 32 0 1 0 0 64h62.368C847.104 712.576 712.576 847.104 544 862.368z"/></svg>定位</div>',bangumiLocateButton:'<div class="[[FLOATNAVMENUITEMCLASS]] bili-adjustment-icon locate" style="height:40px;padding:0" title="定位至播放器"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="currentColor" d="M432 512a80 80 0 1 0 160 0 80 80 0 1 0-160 0z"/><path fill="currentColor" d="M960 480h-33.632C910.752 276.16 747.84 113.248 544 97.632V64a32 32 0 1 0-64 0v33.632C276.16 113.248 113.248 276.16 97.632 480H64a32 32 0 0 0 0 64h33.632C113.248 747.84 276.16 910.752 480 926.368V960a32 32 0 1 0 64 0v-33.632C747.84 910.752 910.752 747.84 926.368 544H960a32 32 0 1 0 0-64zM544 862.368V800a32 32 0 1 0-64 0v62.368C311.424 847.104 176.896 712.576 161.632 544H224a32 32 0 1 0 0-64h-62.368C176.896 311.424 311.424 176.896 480 161.632V224a32 32 0 0 0 64 0v-62.368C712.576 176.928 847.104 311.424 862.368 480H800a32 32 0 1 0 0 64h62.368C847.104 712.576 712.576 847.104 544 862.368z"/></svg></div>',locateToCommentBtn:'<div class="bpx-player-ctrl-btn bpx-player-ctrl-comment" role="button" aria-label="前往评论" tabindex="0"><div id="goToComments" class="bpx-player-ctrl-btn-icon"><span class="bpx-common-svg-icon"><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="88" height="88" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px);"><path d="M512 85.333c235.637 0 426.667 191.03 426.667 426.667S747.637 938.667 512 938.667a424.779 424.779 0 0 1-219.125-60.502A2786.56 2786.56 0 0 0 272.82 866.4l-104.405 28.48c-23.893 6.507-45.803-15.413-39.285-39.296l28.437-104.288c-11.008-18.688-18.219-31.221-21.803-37.91A424.885 424.885 0 0 1 85.333 512c0-235.637 191.03-426.667 426.667-426.667zm-102.219 549.76a32 32 0 1 0-40.917 49.216A223.179 223.179 0 0 0 512 736c52.97 0 103.19-18.485 143.104-51.67a32 32 0 1 0-40.907-49.215A159.19 159.19 0 0 1 512 672a159.19 159.19 0 0 1-102.219-36.907z" fill="#currentColor"/></svg></span></div></div>',shadowRootVideoDescriptionReply:'<bili-adjustment-comment-thread-renderer id="adjustment-comment-description"><style>[[VIDEOCOMMENTDESCRIPTION]]</style><bili-adjustment-comment-renderer><div id="bili-adjustment-body"class="light"><a id="bili-adjustment-user-avatar"><bili-adjustment-avatar><img id="bili-adjustment-avatar-picture"src="[[UPAVATARFACELINK]]"alt="[[UPAVATARFACELINK]]"></bili-adjustment-avatar></a><div id="bili-adjustment-main"style="width:100%"><div id="bili-adjustment-header"><bili-adjustment-comment-user-info><div id="bili-adjustment-info"><div id="bili-adjustment-user-name"><a href="#"onclick="event.preventDefault()">视频简介君(ﾉ≧∀≦)ﾉ</a></div><div id="bili-adjustment-user-badge">Bilibili调整</div></div></bili-adjustment-comment-user-info></div><div id="bili-adjustment-content"><bili-adjustment-rich-text><p id="bili-adjustment-contents">[[PROCESSVIDEOCOMMENTDESCRIPTION]]</p></bili-adjustment-rich-text></div></div></div></bili-adjustment-comment-renderer><div id="bili-adjustment-spread-line"></div></bili-adjustment-comment-thread-renderer>',indexRecommendVideoHistoryOpenButton:'<button id="indexRecommendVideoHistoryOpenButton" popovertarget="indexRecommendVideoHistoryPopover" class="primary-btn roll-btn"><span>历史记录</span></button>',indexRecommendVideoHistoryPopover:'<div id="indexRecommendVideoHistoryPopover" class="adjustment-popover" popover><div id="indexRecommendVideoHistoryPopoverTitle"><span>首页视频推荐历史记录</span><div id="clearRecommendVideoHistoryButton">清空记录</div></div><div id="indexRecommendVideohistoryContents"><div id="indexRecommendVideohistoryCategories"><ul id="indexRecommendVideoHistoryCategory"><li class="all adjustment_button primary plain">全部</li></ul><hr><ul id="indexRecommendVideoHistoryCategoryV2"></ul></div><ul id="indexRecommendVideoHistoryList"></ul></div></div>',videoSettingsOpenButton:'<div class="fixed-sidenav-storage-item bili-adjustment-icon settings" title="打开脚本设置" [[DATAV]]><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="currentColor" d="M812.698 195.977L936.02 409.6a204.8 204.8 0 0 1 0 204.8L812.715 828.023a204.8 204.8 0 0 1-177.374 102.4H388.676a204.8 204.8 0 0 1-177.374-102.4L87.98 614.4a204.8 204.8 0 0 1 0-204.8l123.323-213.623a204.8 204.8 0 0 1 177.374-102.4h246.648a204.8 204.8 0 0 1 177.374 102.4zm-59.12 34.133a136.533 136.533 0 0 0-118.254-68.267H388.676a136.533 136.533 0 0 0-118.255 68.267L147.115 443.733a136.533 136.533 0 0 0 0 136.534L270.438 793.89a136.533 136.533 0 0 0 118.255 68.267h246.648a136.533 136.533 0 0 0 118.255-68.267l123.29-213.623a136.533 136.533 0 0 0 0-136.534L753.561 230.11z"/><path fill="currentColor" d="M512 682.667c94.26 0 170.667-76.408 170.667-170.667S606.259 341.333 512 341.333 341.333 417.741 341.333 512 417.741 682.667 512 682.667zm0-68.267a102.4 102.4 0 1 1 0-204.8 102.4 102.4 0 0 1 0 204.8z"/></svg>设置</div>',videoSettings:`<bilibili-adjustment-video-setting id="VideoSettingsPopover"class="adjustment-popover" popover><div class="adjustment-popover-title">哔哩哔哩播放页设置<div class="subTitle">（以下设置内容更改即生效，刷新页面即可）</div></div><div class="recommend">推荐使用样式表：<a href="https://userstyles.world/style/241/nightmode-for-bilibili-com" target="_blank">「夜间哔哩 NightMode For Bilibili」</a></div><div class="adjustment-form"><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>是否为大会员</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="IsVip" checked="[[ISVIP]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">请如实勾选，否则影响部分设置项</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动定位至播放器</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoLocate" checked="[[AUTOLOCATE]]"class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div class="adjustment-checkboxGroup"><div class="adjustment-checkbox video"><span>普通视频(video)</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoLocateVideo" checked="[[AUTOLOCATEVIDEO]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div class="adjustment-checkbox bangumi"><span>其他视频(bangumi)</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoLocateBangumi" checked="[[AUTOLOCATEBANGUMI]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div><span class="adjustment-tips info">只有勾选自动定位至播放器，才会执行自动定位的功能；勾选自动定位至播放器后，video 和 bangumi 两者全选或全不选，默认在这两种类型视频播放页都执行；否则勾选哪种类型，就只在这种类型的播放页才执行。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>播放器顶部偏移(px)</label><input id="OffsetTop" class="adjustment-input" value="[[OFFSETTOP]]"></div><span class="adjustment-tips info">播放器距离浏览器窗口默认距离为 [[PLAYEROFFSETTOP]]；请填写小于 [[PLAYEROFFSETTOP]] 的正整数或 0；当值为 0 时，播放器上沿将紧贴浏览器窗口上沿;值为 [[PLAYEROFFSETTOP]] 时，将保持B站默认。\n    </span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>点击播放器时定位</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="ClickPlayerAutoLocation" checked="[[CLICKPLAYERAUTOLOCATION]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div><div class="adjustment-form-item player-mod"><div class="adjustment-form-item-content"><label>播放器默认模式</label><div class="adjustment-checkboxGroup"><div class="adjustment-checkbox"><div class="adjustment-radio-btn"><input class="radio" type="radio" name="PlayerMode" value="close" checked="[[SELECTEDPLAYERMODECLOSE]]"><div class="circle"></div><span>关闭</span></div></div>\n        <div class="adjustment-checkbox"><div class="adjustment-radio-btn"><input class="radio" type="radio" name="PlayerMode" value="wide" checked="[[SELECTEDPLAYERMODEWIDE]]"><div class="circle"></div><span>宽屏</span></div></div><div class="adjustment-checkbox"><div class="adjustment-radio-btn"><input class="radio" type="radio" name="PlayerMode" value="web" checked="[[SELECTEDPLAYERMODEWEB]]"><div class="circle"></div><span>网页全屏</span></div></div></div></div><span class="adjustment-tips info">若遇到不能自动选择播放器模式可尝试刷新页面</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>网页全屏模式解锁</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="WebfullUnlock" checked="[[WebfullUnlock]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">勾选后网页全屏模式下可以滑动滚动条查看下方评论等内容（番剧播放页不支持）\n<br>-&gt;新增迷你播放器显示，不过比较简陋，只支持暂停/播放操作，有条件的建议还是直接使用浏览器自带的小窗播放功能。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动选择最高画质</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoSelectVideoHighestQuality" checked="[[AUTOSELECTVIDEOHIGHESTQUALITY]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div class="adjustment-checkboxGroup"><div id="Checkbox4K" class="adjustment-checkbox fourK" style="display:[[CONTAINQUALITY4KSTYLE]]"><span>包含4K画质</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="ContainQuality4k" checked="[[CONTAINQUALITY4K]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div id="Checkbox8K" class="adjustment-checkbox eightK" style="display:[[CONTAINQUALITY8KSTYLE]]"><span>包含8K画质</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="ContainQuality8k" checked="[[CONTAINQUALITY8K]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div><span class="adjustment-tips info">网络条件好时可以启用此项，勾哪项选哪项，都勾选8k，否则选择4k及8k外最高画质。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>优化视频简介并插入评论区</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="InsertVideoDescriptionToComment"\n        checked="[[INSERTVIDEODESCRIPTIONTOCOMMENT]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">将视频简介内容优化后插入评论区或直接替换原简介区内容(替换原简介中固定格式的静态内容为跳转链接)。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动跳过时间节点</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoSkip" checked="[[AUTOSKIP]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">自动跳过视频已设置设置时间节点，视频播放到相应时间点时将触发跳转至设定时间点。</span></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>离开页面自动暂停视频</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="PauseVideo" checked="[[PAUSEVIDEO]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><div class="adjustment-checkboxGroup"><div class="adjustment-checkbox continuePlay" style="display:[[CONTINUEPLAYSTYLE]]"><span>返回页面恢复播放</span><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="ContinuePlay" checked="[[CONTINUEPLAY]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动开启字幕</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoSubtitle" checked="[[AUTOSUBTITLE]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div></div><div class="adjustment-form-item"><div class="adjustment-form-item-content"><label>自动刷新</label><div class="adjustment-checkbox-btn btn-pill"><input type="checkbox" id="AutoReload" checked="[[AUTORELOAD]]" class="adjustment-checkbox checkbox"><div class="knob"></div><div class="btn-bg"></div></div></div><span class="adjustment-tips info">（不建议开启）若脚本执行失败是否自动刷新页面重试，开启后可能会对使用体验起到一定改善作用，但若是因为B站页面改版导致脚本失效，则会陷入页面无限刷新的情况，此时则必须在页面加载时看准时机关闭此项才能恢复正常，请自行选择是否开启。</span></div></div><div class="adjustment-buttonGroup"></bilibili-adjustment-video-setting>`,dynamicSettings:'<bilibili-adjustment-dynamic-setting id="DynamicSettingsPopover" class="adjustment-popover" popover><div class="adjustment-popover-title">哔哩哔哩动态页设置<div class="subTitle">（以下设置内容更改即生效，刷新页面即可）</div></div><div class="recommend">推荐使用样式表：<a href="https://userstyles.world/style/241/nightmode-for-bilibili-com" target="_blank">「夜间哔哩 NightMode For Bilibili」</a></div><label class="bilibili-adjustment-setting-label" style="padding-top:0!important;display: grid;grid-gap: 10px">「投稿视频」链接：<input id="WebVideoLinkInput" class="adjustment-input" value="[[DYNAMICVIDEOLINK]]"></label><div id="DynamicSettingsPopoverTips" class="adjustment-tips info">点击「投稿视频」选项后，填入当前浏览器地址栏链接，即可自动跳转至该链接</div><div class="adjustment-buttonGroup"><button id="DynamicSettingsSaveButton" class="adjustment-button primary">保存</button></div></bilibili-adjustment-dynamic-setting>',dynamicSettingsOpenButton:'<div class="bili-dyn-sidebar__btn bili-adjustment-icon settings" title="打开脚本设置" [[DATAV]]><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path fill="currentColor" d="M812.698 195.977L936.02 409.6a204.8 204.8 0 0 1 0 204.8L812.715 828.023a204.8 204.8 0 0 1-177.374 102.4H388.676a204.8 204.8 0 0 1-177.374-102.4L87.98 614.4a204.8 204.8 0 0 1 0-204.8l123.323-213.623a204.8 204.8 0 0 1 177.374-102.4h246.648a204.8 204.8 0 0 1 177.374 102.4zm-59.12 34.133a136.533 136.533 0 0 0-118.254-68.267H388.676a136.533 136.533 0 0 0-118.255 68.267L147.115 443.733a136.533 136.533 0 0 0 0 136.534L270.438 793.89a136.533 136.533 0 0 0 118.255 68.267h246.648a136.533 136.533 0 0 0 118.255-68.267l123.29-213.623a136.533 136.533 0 0 0 0-136.534L753.561 230.11z"/><path fill="currentColor" d="M512 682.667c94.26 0 170.667-76.408 170.667-170.667S606.259 341.333 512 341.333 341.333 417.741 341.333 512 417.741 682.667 512 682.667zm0-68.267a102.4 102.4 0 1 1 0-204.8 102.4 102.4 0 0 1 0 204.8z"/></svg></div>'};const s=(e,t)=>{if(t){Object.entries(t).forEach((([t,o])=>{e=e.replaceAll(`[[${t.toUpperCase()}]]`,o);}));return e}return e};const c=exports("c", new Proxy(r,{get(e,t){if(t==="replace")return (e,t)=>s(r[e],t);return e[t]}}));

		})
	};
}));

System.import("./__entry.js", "./");
